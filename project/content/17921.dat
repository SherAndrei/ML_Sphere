app.techmill.ru/paruspub/parusLASTWIN32/documentation/files.html
<html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:v="urn:schemas-microsoft-com:vml"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><link href="css.css" type="text/css" rel="stylesheet"><style>
			  v\:* { behavior: url(#default#VML) }
			</style><script language="JavaScript" src="scripts.js"></script><title>WEB-приложение Сведение отчетности (одним файлом)</title></head><body onload="javascript:loaded(0)"><table border="0" class="texttable" width="100%"><tr><td class="generalHeader">WEB-приложение Сведение отчетности  (одним файлом) <small>(22.05.2013)</small></td></tr></table><a name="0C0469FCDA9A4D9296B0D3041DD21FD6"></a><table border="0" style="margin-left:1em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">1. Общие сведения</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Сервис обеспечивает доступ удаленных пользователей к базе данных Системы Парус 8. С использованием предлагаемого решения удаленные пользователи получают возможность работать с базой данных Системы Парус 8, применяя все функциональные возможности модуля "Сведение отчетности - Центр учета" Системы. Схема работы Как показано на схеме, сервис "WEB-приложение "Сведение отчетности - Центр учета" реализует интерфейс между базой данных Парус 8 и удаленными пользователями, являясь фактически шлюзом между корпоративной сетью и внешним миром. Сервис дает возможность реализовать сбор и сведение отчетности с удаленных абонентских пунктов, используя все преимущества Web-технологий, а именно: Отсутствие необходимости распространять и устанавливать какое-либо программное обеспечение на компьютеры удаленных абонентских пунктов. Мгновенное автоматическое применение изменений настроек форм (алгоритмов расчета показателей, проверок, настройку трафаретов, и т. п.) ко всем отчетам удаленных абонентских пунктов без необходимости уведомлять их об этом и распространять какие-либо пакеты обновлений. Не выдвигается требований к наличию на компьютерах удаленных абонентских пунктов каких-либо третьих продуктов, не поставляемых бесплатно в составе операционной системы. Отсутствие необходимости в хранении данных, входящих в представляемые отчеты, на компьютерах абонентских пунктов снижает вероятность их хищения и/или фальсификации без применения нетривиальных усилий по физической защите удаленных компьютеров. Существование одной и только одной полностью подконтрольной центру учета точке, через которую проходят данные удаленных абонентских пунктов, позволяет более внимательно подойти к вопросу контроля целостности и аутентичности. </div></td></tr></table><br><a name="4F062C9AC5CD4AF1AC07764A8DFFC3D6"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">1.1. Технические требования к аппаратно-программному обеспечению</div></td></tr><tr><td class="texttablecell"><div class="normalText"> В данном разделе будет описана рекомендуемая конфигурация аппаратно- программного обеспечения, необходимого для развертывания и последующего функционирования системы. Описанная ниже конфигурация является минимальной для обеспечения функционирования сервиса Если все сервера расположены в одной стойке, то возможно использование одного ИБП повышенной мощности. Необходимо обратить внимание, что в серверах должны быть установлены сетевые адаптеры надежного производителя. Внимание: сервера некоторых производителей поставляются с сетевыми картами, имеющими программные ограничения и требующие активации для функционирования в полнодуплексном режиме. Рекомендуется обеспечить доступ к Интернет через провайдера, имеющего прямой выход на общефедеральные каналы связи. Ваш доступ к Интернету должен иметь минимальные ограничения со стороны провайдера. Крайне нежелательно подключение системы с использованием прокси-сервера. Канал выделяемый провайдером должен быть "выделенным" (т.е. не разделен с другими клиентами). Провайдер должен обеспечивать доступ к Интернет с полосой пропускания не менее 1 Мбит/с. Ниже приведены минимальные требования к каналу связи по количеству пользователей. 1-150 пользователей 150-500 пользователей 500-1000 пользователей более 1000 пользователей Скорость доступа 1 Мб/с 10 Мб/с 100 Мб/с 1 Гб/с В таблице ниже отражена зависимость скорости доступа к Интернет центрального сервера и задержки системы при удаленной работе пользователей. Скорость доступа 10-100 пользователей 100-300 пользователей 300-1000 пользователей 100 Кбит/с 20-40 сек 40-80 сек 60-300 сек 1 Мбит/с 3-10 сек 10-20 сек 20-40 сек 10 Мбит/с 1-5 сек 5-10 сек 10-20 сек Допускается использование провайдером брэндмауров, но порт 80 должен быть полностью открыт. В случае использования протокола HTTPS также должен быть полностью открыт порт 443. Желательно заключить с провайдером дополнительное соглашение о доступе в режиме 24х7. Все технические перерывы должны быть прописаны и известны заранее. Необходимо также учитывать, что Интернет-трафик в период сбора отчетности может достигать нескольких десятков Гигабайт (80% трафика - исходящий). Рекомендуется позаботится о выборе/смене тарифного плана. Для выбора оптимальной схемы работы аппаратного обеспечения сервиса в зависимости от предполагаемого количества пользователей перейдите по соответствующей ссылке: </div></td></tr></table><br><a name="A9EAC249D0CF49B6B423F1FF274ED803"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">1.1.1. 1-150 пользователей</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Рекомендуется использовать схему с одним WEB-сервером: Схема работыМинимальные требования к аппаратному обеспечению:Процессор : Intel Core 2 Duo (2 Ггц) Память : 1 ГБ Минимальные требования к каналу связи: 1 Мб/сек Программное обеспечение: - Операционная система : Windows Server 2003/2008 (x86/x64) - Отчетная система : Microsoft Excel 2003/2010 (x86/x64 в соответствии с сервером приложений) </div></td></tr></table><br><a name="DE78984718DD4A19AB127BF9C5AC6D87"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">1.1.2. 150-500 пользователей</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Рекомендуется использовать схему с одним WEB-сервером: Схема работыМинимальные требования к аппаратному обеспечению:Процессор: Intel Core i5 или i7 или  Intel Xeon (2 Ггц) Память: 2 ГБ Минимальные требования к каналу связи: 10 Мб/сек Программное обеспечение: - Операционная система : Windows Server 2003/2008 (x86/x64) - Отчетная система : Microsoft Excel 2003/2010 (x86/x64 в соответствии с сервером приложений) </div></td></tr></table><br><a name="E6DEAB0ED83645518BD4538E66F044A8"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">1.1.3. 500-1000 пользователей</div></td></tr><tr><td class="texttablecell"><div class="normalText">В данном случае рекомендуется использовать кластерную схему работы. Однако можно использовать и отдельный WEB-сервер.</div></td></tr></table><br><a name="C03AECDC61AA4C8C995C89831EDAC4E2"></a><table border="0" style="margin-left:4em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">1.1.3.1. Отдельный WEB-сервер</div></td></tr><tr><td class="texttablecell"><div class="normalText">Схема работыМинимальные требования к аппаратному обеспечению:Процессор: 2 x Intel Xeon E5606 или E5620 (2Гц) Память: 4 ГБ Минимальные требования к каналу связи: 100 Мб/сек Программное обеспечение: - Операционная система : Windows Server 2003/2008 (x86/x64) - Отчетная система : Microsoft Excel 2003/2010 (x86/x64 в соответствии с сервером приложений) </div></td></tr></table><br><a name="D0D6C80E42C1490F895E0BE5EC9E774E"></a><table border="0" style="margin-left:4em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">1.1.3.2. Кластерная схема</div></td></tr><tr><td class="texttablecell"><div class="normalText">Кластер Схема применяется для снижения вычислительной нагрузки на отдельный WEB-сервер и может объединять в себе несколько WEB-серверов (узлов кластера). Кластер обычно используется только для перенаправления запросов пользователей на узлы с определенной в настрйоках вероятностью. Основная вычислительная нагрузка ложится на узлы кластера. Минимальные требования к аппаратному обеспечению для кластера и узлов кластера:Процессор: Intel Core i5 или i7, Intel Xeon (2 Ггц) Память: 2 ГБ Минимальные требования к каналу связи: 100 Мб/сек Программное обеспечение для кластера: - Операционная система : Windows Server 2003/2008 (x86/x64) Программное обеспечение для узлов кластера: - Операционная система : Windows Server 2003/2008 (x86/x64) - Отчетная система : Microsoft Excel 2003/2010 (x86/x64 в соответствии с сервером приложений) </div></td></tr></table><br><a name="7603C614E103491897190EAFAE7C6C97"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">1.1.4. более 1000 пользователей</div></td></tr><tr><td class="texttablecell"><div class="normalText"><IDXSKIP>В данном случае рекомендуется использовать кластерную схему работы. Однако можно использовать и отдельный WEB-сервер.</IDXSKIP></div></td></tr></table><br><a name="D68EB10C809C4E45A3C28476B1BF8954"></a><table border="0" style="margin-left:4em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">1.1.4.1. Отдельный WEB-сервер</div></td></tr><tr><td class="texttablecell"><div class="normalText">Схема работыМинимальные требования к аппаратному обеспечению:Процессор: 2 или 4 x Intel Xeon E5-2600 или E5-4600 (2 Ггц) Память: &gt;= 8 ГБ Минимальные требования к каналу связи: 1 Гб/сек Программное обеспечение: - Операционная система : Windows Server 2003/2008 (x86/x64) - Отчетная система : Microsoft Excel 2003/2010 (x86/x64 в соответствии с сервером приложений) </div></td></tr></table><br><a name="A5AB3443C00048959300899ED98B11A5"></a><table border="0" style="margin-left:4em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">1.1.4.2. Кластерная схема</div></td></tr><tr><td class="texttablecell"><div class="normalText">Кластер Схема применяется для снижения вычислительной нагрузки на отдельный WEB-сервер и может объединять в себе несколько WEB-серверов (узлов кластера). Кластер обычно используется только для перенаправления запросов пользователей на узлы с определенной в настрйоках вероятностью. Основная вычислительная нагрузка ложится на узлы кластера. Минимальные требования к аппаратному обеспечению для кластера:Процессор: Intel Core i5 или i7, Intel Xeon (2 Ггц) Память: 2 ГБ Минимальные требования к аппаратному обеспечению для узлов кластера: Требования к каждому узлу кластера определяются исходя из предполагаемого количества пользователей перенаправленных на данный узел кластером. Для определения минимальных требований к процессору и ОЗУ можно ориентироваться на таблицу: 1-150 пользователей 150-500 пользователей 500-1000 пользователей более 1000 пользователей Конфигурация Intel Core 2 Duo   (2 Ггц)        Память: 1 ГБ Intel Core i5 или i7, Intel Xeon (2 Ггц) Память: 2 ГБ 2 x Intel Xeon E5606 или E5620 (2 Ггц) Память: 4 ГБ 2 или 4 x Intel Xeon        E5-2600 или E5-4600 (2 Ггц)                       Память: &gt;= 8 ГБ Минимальные требования к каналу связи: 1 Гб/сек Программное обеспечение для кластера: - Операционная система : Windows Server 2003/2008 (x86/x64) Программное обеспечение для узлов кластера: - Операционная система : Windows Server 2003/2008 (x86/x64) - Отчетная система : Microsoft Excel 2003/2010 (x86/x64 в соответствии с сервером приложений) </div></td></tr></table><br><a name="6FEE0366DCDD49908C98F5D4D7540D77"></a><table border="0" style="margin-left:1em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">2. Установка</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Порядок установки: Запустить на выполнение установочный файл сервиса ParusBalanceOnline с диска дистрибутива. На запрос операционной системы, нажмите Run (Выполнить). Начнется процесс установки сервиса.  Информация о версии: Установка 1 Окно содержит информацию о продукте и номер устанавливаемой версии. Нажмите Далее. Путь установки: Установка 2 Здесь необходимо указать путь к папке установки файлов Сервиса на жестком диске. В дальнейшем выбранная директория будет использоваться в качестве рабочей директории Сервиса. Нажмите Установить. Начинается процесс установки. Установка 3 Процесс может занять некоторое время (минута-две). По окончании откроется главное окно Конфигуратора Сервиса. </div></td></tr></table><br><a name="C3C894209FD8440BA47B795D90BB1FFE"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">2.1. Состав поставки</div></td></tr><tr><td class="texttablecell"><div class="normalText"> После установки Сервиса "Сведение отчетности OnLine" в папке, заданной на этапе установки, будут созданы следующие папки и файлы:  DOJO - папка, содержащая библиотеки свободной модульной библиотеки JavaScript, для упрощения ускоренной разработки основанных на JavaScript или AJAX приложений и сайтов. MILLJS, PARUSJS  - папки, содержащие вспомогательные библиотеки поддержки работы Сервиса. REDIST - папка, содержащая необходимые третьесторонние компоненты. DebugView.exe - отладочный монитор, для отслеживания событий Сервиса. DBSetupShell.exe - утилита для обслуживания Баз данных. BalanceOnline.chm - файл справки по Сервису (этот файл). MillAppServer.conf - файл конфигурации Сервера. MillAppServer.exe - утилита управления Сервером. ParusBalanceOnlineUninstaller.exe - деинсталлятор Сервиса. ParusWebServerConfigurator.exe - конфигуратор Сервиса. Дополнительные программы и библиотеки для функционирования Сервиса. Кроме того, в меню Start (Пуск) будет создана группа ярлыков: Группа в Пуск Здесь: Документация - ссылка на этот документ. Настройка Сервиса - запуск Конфигуратора Сервиса. Отладочный монитор - утилита для отслеживания событий Сервиса. Удалить ПАРУС - Сведение отчетности Онлайн - деинсталлятор Сервиса. </div></td></tr></table><br><a name="6609CA226ECB481D8E75CB399CA13D27"></a><table border="0" style="margin-left:1em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3. Конфигурирование</div></td></tr><tr><td class="texttablecell"><div class="normalText">Основное окно конфигуратора: Главное окно с тагамиЭлементы управления:Закрыть - закрывается окно конфигуратора сервиса. При этом сервис остается в рабочем состоянии. Чтобы остановить сервис необходимо повторно открыть конфигуратор и воспользоваться кнопкой Остановить сервис. Стартовать сервис - сервис регистрируется в операционной системе как служба и запускается. Кнопка изменяет вид на Кнопка останов. При нажатии на нее сервис будет остановлен. Создание конфигурации - пошаговое создание новой конфигурации. Подробнее. Параметры сетевых настроек - установка протокола обмена (HTTP, HTTPS). Подробнее. Параметры подключения к базе данных - объявление базы данных, пользователя и пароля для доступа. Подробнее. Распределение соединений по организациям - дополнительные настройки (распределение лицензий по организациям). Подробнее. Параметры протоколирования нагрузки - настройка протоколирования событий сервера (в файл, в БД). Подробнее. Проверить наличие обновления - проверка на наличие новых версий сервиса на сайте разработчика. Подробнее. </div></td></tr></table><br><a name="9FDB68FF8E5D44F2BD801CAC36677B99"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.1. Создание конфигурации</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для начала работы с сервисом необходимо задать настройки конфигурации сервера. В главном окне нажать значок "Создание конфигурации": Создание конфигурации Будет выведено диалоговое окно: Диалог новая конфигурация При выборе "Yes" ("Да") - вводимые настройки будут применяться к существующей конфигурации. При выборе "No" ("Нет") - будет создана новая конфигурация сервера. "Cancel" ("Отмена") - будет осуществлен возврат к предыдущему шагу настроек. В следующем окне: Кластер, узел, сервер необходимо определить, какую роль будет исполнять сервер, на котором производится настройка конфигурации. Подробнее по ролям: </div></td></tr></table><br><a name="9E70A52F7F8C43089D0A5DAFE1D81623"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.1.1. Кластер</div></td></tr><tr><td class="texttablecell"><div class="normalText">Кластер - при большом количестве ожидаемых запросов от удаленных пользователей рекомендуется организовать кластерную структуру. Для этого, одно из рабочих мест объявляется кластером (сервером, распределяющим нагрузку по другим серверам). При этом, данное рабочее место может не обладать высокой производительностью, так как будет использоваться исключительно для перенаправления запросов удаленных пользователей на другие рабочие сервера. Настройки кластера В окне прописываются доменные имена серверов (узлов кластера), на которые кластер должен перенаправлять запросы удаленных пользователей, а также вероятность перенаправления. На скриншоте-примере указаны три сервера с определенными доменными именами. При этом на сервер svody1.svody.ru будет перенаправляться 50% запросов, а на другие два по 25%. Это может быть связано с большей производительностью первого сервера. После того как будут заданы все узлы кластера, необходимо нажать ссылку "Завершить". Будет предложено сохранить изменения. Настройка для кластера на этом закончена и необходимо перейти к следующему серверу для настройки его в качестве узла кластера. Работа</div></td></tr></table><br><a name="84846C14A61C4E1CB7F47CFE638D3F8A"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.1.2. Самостоятельный сервер/Узел кластера</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Самостоятельный отдельно стоящий сервер - данный вариант используется в случае если не планируется большое количество одновременных подключений удаленных пользователей. После выбора данного пункта будет запущена пошаговая процедура настройки конфигурации. Следующий шаг</div></td></tr></table><br><a name="F69544ED6CF3466D9D7DF5A470F88EB4"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.1.3. Сервер с настройками по умолчанию</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для упрощения и ускорения процедуры настройки конфигурации предуссмотрен вариант установок сервера по умолчанию. При выборе этого пункта все настройки устанавливаются в соответствии с наиболее часто употребляемыми. Необходимо указать только путь к базе данных, пользователя и пароль (Параметры подключения к базе данных). После того, как все настройки внесены, нажмите ссылку "Далее". Будет предложено сохранить созданную конфигурацию. Настройки по умолчанию:- Протокол обмена данными  - HTTP- Номер порта TCP - 80- Время ожидания после старта системы - 0 сек- Время бездействия сессии - 3600 сек- Повторно использовать сессии - включено- Сжимать трафик - включено- Рабочий каталог (стартовая страница) - путь на жестком диске, указанный при установке Сервиса- Количество лицензий - максимальное, равномерно распределенное по всем организациям - Без протоколированияРабота</div></td></tr></table><br><a name="AEE2029B4E7043878EEDFEAC8E76ADC7"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.2. Параметры сетевых настроек</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для установки сетевых настроек для существующей конфигурации нажмите Сетевые настройки Откроется окно выбора протокола обмена данными: Выбор протокола Доступны два варианта: HTTP - стандартный протокол обмена данными через интернет HTTPS - защищенный протокол обмена данными через интернет Настройки для HTTP:HTTP настройки - Параметр Порт TCP указывает номер порта TCP/IP, который будет прослушиваться сервисом для приема входящих запросов на всех имеющихся на момент старта сервиса в системе сетевых интерфейсах. Поскольку сервис реализует протокол HTTP, то рекомендуется использовать порт 80. В случае, если Web-сервер использует третьестороннее серверное программное обеспечение (Microsoft IIS, Apache, и т. п.), которое обслуживает 80 порт (и "занимает" его), то необходимо использовать порт, отличный от 80 (и при этом свободный). Обращаться к сервису в таком случае необходимо, указывая порт в строке адреса после двоеточия. При помощи команды Windows netstat можно узнать текущее состояние портов TCP. - Время ожидания после старта системы определяет количество секунд, в течение которых сервис будет ожидать завершения инициализирующих действий других компонент системы, после чего приступит к собственной инициализации. В случае, если web-сервер и сервер БД установлены на одной машине, то необходимо дождаться перехода БД в состояние "open", прежде, чем открывать сессии Oracle и приступать к обработке запросов удаленных пользователей. Время, необходимое для этого, нужно выразить в секундах и задать в значении этого параметра. Полезные цифры 1/2 минуты 30 секунд 1 минутa 60 секунд 2 минуты 120 секунд 3 минуты 180 секунд 5 минут 300 секунд 10 минут 600 секунд - Параметр Время бездействия сессии определяет количество секунд, в течение которых сессия (серверный объект, владеющий информацией о состоянии удаленного подключения) сохраняется в памяти сервера в случае отсутствия активности удаленного пользователя. После истечения этого времени сессия будет уничтожена вместе со всей несохраненной клиентом информацией (в том числе и аутентификационной). Это не касается только информации о значениях редактируемого трафарета, поскольку элемент ActiveX предпринимает для этого специальные меры. Категорически не рекомендуется устанавливать это значение меньше, чем 300 секунд (5 минут). Значение по умолчанию - 3600 секунд (1 час). Полезные цифры 1/2 часа 1800 секунд 1 час 3600 секунд 3/2 часа, полтора часа 5400 секунд 2 часа 7200 секунд 3 часа 10800 секунд - Параметр Повторно использовать сессии позволяет не переоткрывать соединения после каждого обмена "запрос-ответ" между клиентом и сервером. Повторно используются соединения только в том случае, если такие соединения поддерживаются клиентом и сервером согласованно. Время ожидания нового запроса на зарезервированном соединении составляет 75 секнд. Рекомендуется выключать этот параметр при обслуживании более 300 одновременных соединений, поскольку слишком большой ресурс сервера начинает тратиться на проверку состояния зарезервированных соединений, что отрицательно сказывается на производительности системы в целом. - Параметр  Сжимать трафик  позволяет серверу использовать архивацию передаваемых данных. Архивация применяется только в том случае, если браузер удаленного клиента способен корректно обрабатывать сжатые данные. Для сжатия трафика используется библиотека zlib (http://www.zlib.net/). Минимальная тестированная на совместимость версия - 1.0.4, она включается в стандартную поставку сервиса. Настройки для HTTPS:HTTPS настройки - Параметр Порт TCP указывает номер порта TCP/IP, который будет прослушиваться сервисом для приема входящих запросов на всех имеющихся на момент старта сервиса в системе сетевых интерфейсах. Поскольку сервис реализует протокол HTTPS, то рекомендуется использовать порт 443. В случае, если Web-сервер использует третьестороннее серверное программное обеспечение (Microsoft IIS, Apache, и т. п.), которое обслуживает 443 порт (и "занимает" его), то необходимо использовать порт, отличный от 443 (и при этом свободный). Обращаться к сервису в таком случае необходимо, указывая порт в строке адреса после двоеточия. При помощи команды Windows netstat можно узнать текущее состояние портов TCP. - Время ожидания после старта системы определяет количество секунд, в течение которых сервис будет ожидать завершения инициализирующих действий других компонент системы, после чего приступит к собственной инициализации. В случае, если web-сервер и сервер БД установлены на одной машине, то необходимо дождаться перехода БД в состояние "open", прежде, чем открывать сессии Oracle и приступать к обработке запросов удаленных пользователей. Время, необходимое для этого, нужно выразить в секундах и задать в значении этого параметра. Полезные цифры 1/2 минуты 30 секунд 1 минутa 60 секунд 2 минуты 120 секунд 3 минуты 180 секунд 5 минут 300 секунд 10 минут 600 секунд - Параметр Время бездействия сессии определяет количество секунд, в течение которых сессия (серверный объект, владеющий информацией о состоянии удаленного подключения) сохраняется в памяти сервера в случае отсутствия активности удаленного пользователя. После истечения этого времени сессия будет уничтожена вместе со всей несохраненной клиентом информацией (в том числе и аутентификационной). Это не касается только информации о значениях редактируемого трафарета, поскольку элемент ActiveX предпринимает для этого специальные меры. Категорически не рекомендуется устанавливать это значение меньше, чем 300 секунд (5 минут). Значение по умолчанию - 3600 секунд (1 час). Полезные цифры 1/2 часа 1800 секунд 1 час 3600 секунд 3/2 часа, полтора часа 5400 секунд 2 часа 7200 секунд 3 часа 10800 секунд - Параметр Повторно использовать сессии позволяет не переоткрывать соединения после каждого обмена "запрос-ответ" между клиентом и сервером. Повторно используются соединения только в том случае, если такие соединения поддерживаются клиентом и сервером согласованно. Время ожидания нового запроса на зарезервированном соединении составляет 75 секнд. Рекомендуется выключать этот параметр при обслуживании более 300 одновременных соединений, поскольку слишком большой ресурс сервера начинает тратиться на проверку состояния зарезервированных соединений, что отрицательно сказывается на производительности системы в целом. - Параметр  Сжимать трафик  позволяет серверу использовать архивацию передаваемых данных. Архивация применяется только в том случае, если браузер удаленного клиента способен корректно обрабатывать сжатые данные. Для сжатия трафика используется библиотека zlib (http://www.zlib.net/). Минимальная тестированная на совместимость версия - 1.0.4, она включается в стандартную поставку сервиса. - Сертификат центра сертификации - указать путь на жестком диске к файлу *.pem, скачанному с сайта Центра сертификации на этапе получения SSL-сертификата. - Сертификат домена - указать путь на жестком диске к файлу, полученному на этапе получения SSL-сертификата в личном кабинете на сайте RU-CENTER . - Закрытый ключ - указать путь на жестком диске к файлу закрытого ключа, сгенерированному в процессе получения SSL-сертификата. - Пароль закрытого ключа (если был установлен). Подробнее про процесс получения SSL-сертификата написано здесь. После внесения всех данных, нажмите ссылку Далее. Откроется окно выбора рабочего каталога: Выбор каталога Здесь необходимо указать католог на жестком диске, в котором находятся исполняемые скрипты сервиса. По умолчанию (Станадртная) - папка PARUSJS в каталоге установки сервиса. Можно назначить свой путь к папке. Для этого выберите ссылку Своя. Поле "Каталог" будет очищено и можно будет ввести свой путь. После нажатия ссылки "Далее" будет осуществлен переход к шагу </div></td></tr></table><br><a name="00E284C9EEB64D1187142B27B418AFAC"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.3. Параметры подключения к базе данных</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для установки параметров подключения к базе данных нажмите Иконка БД Откроется окно настроек параметров подключения к базе данных: Окно БД В поле База данных необходимо псевдоним БД Oracle, к которой планируется осуществить подключение. Параметр Пользователь-владелец данных определяет имя схемы БД Парус 8, данные которой становятся доступны удаленным пользователям. По традиции это имя - "parus" без кавычек. Параметр Пароль определяет пароль пользователя- владельца схемы БД Парус 8, данные которой становятся доступны удаленным пользователям. Пароль хранится в файле конфигурации в домашней папке сервиса в открытом виде - будьте осторожны при выдаче прав на эту папку ненадежным людям. Сессии Oracle, через которые будет происходить (почти) всё взаимодействие сервиса и БД, будут открыты c использованием аутентификационной информации, заданной этими двумя параметрами. Нажатие ссылки "Далее" открывает следующий шаг настройки Распределение соединений по организациям</div></td></tr></table><br><a name="D34C68432DBC40FD9E7FADD9A1B5B16A"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.4. Распределение соединений по организациям</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для установки параметров, в главном окне выберите: Иконка распределение лицензий На данном шаге настроек осуществляется распределение общего числа лицензий по организациям. Распределение по организациям Информацию о наименованиях Организаций и общем количестве соединений конфигугуратор получает из БД Oracle, указанной в настройках подключения к БД. По умолчанию, равномерно распределяется 80% доступных соединений.  Для добавления строки нажмите "Insert". Ввод данных подтвердите нажатием "Enter". Если Вы распределили не все лицензии, то появится сообщение об этом: Есть свободные лицензии На этом шаге можно вернуться к распределению снова. Или нажать "Yes" ("Да") для подтверждения операции. Следующий шаг Параметры протоколирования нагрузки</div></td></tr></table><br><a name="DC844D890A4D476884B90F5A5868E4B6"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.5. Параметры протоколирования нагрузки</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для установки парметров протоколирования событий сервера нажмите: Иконка протоколирование В открывшемся окне: Выбор протоколирование необходимо выбрать способ протоколирования из следующих: </div></td></tr></table><br><a name="03BF953D984142F6A8F47EC04C7C375F"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.5.1. В файл</div></td></tr><tr><td class="texttablecell"><div class="normalText"> - В файл - записи о событиях сервера будут сохраняться в текстовый файл в формате W3CExtended. После начала работы сервера в рабочем каталоге будет создана папка LOGS, в которой будут сохранятся log-файлы с наименованием w3cext.log.  Пример log-файла: #Version: 1.0 #Date: 2012-06-04 15:55:53  #Software: DMAS/1.1 #Fields: date time time-taken bytes c-ip cs-username cs-method cs-uri cs-status cs-bytes sc-bytes x-cookie 2012-06-04 15:56:05 0.0 1433 127.0.0.1 - GET / 200 451 1102 HTTPID={921CFE12-F2B3-4186-A5FC-C03C12ABCBDD} 2012-06-04 15:56:05 0.0 0 127.0.0.1 - GET /parusjs/parus8.js 304 575 307 HTTPID={921CFE12-F2B3-4186-A5FC-C03C12ABCBDD} 2012-06-04 15:56:05 0.0 0 127.0.0.1 - GET /.system/contents.xml?dojo.preventCache=1338810965668 200 639 1101 HTTPID={921CFE12-F2B3-4186-A5FC-C03C12ABCBDD} 2012-06-04 15:56:13 0.0 0 127.0.0.1 parus GET /parus/sysinfo.xml?login=parus&amp;password=parus&amp;dojo.preventCache=1338810973239 200 663 489 HTTPID={921CFE12-F2B3-4186-A5FC-C03C12ABCBDD} 2012-06-04 15:56:13 0.0 0 127.0.0.1 parus GET /parusjs/balance.html 304 578 307 HTTPID={921CFE12-F2B3-4186-A5FC-C03C12ABCBDD} 2012-06-04 15:56:13 0.6 0 127.0.0.1 parus POST /parus/query.xml 200 808 973 HTTPID={921CFE12-F2B3-4186-A5FC-C03C12ABCBDD} 2012-06-04 15:56:15 0.92 0 127.0.0.1 parus POST /parus/query.xml 200 811 8479 HTTPID={921CFE12-F2B3-4186-A5FC-C03C12ABCBDD} 2012-06-04 15:56:15 0.1 0 127.0.0.1 parus POST /parus/query.xml 200 816 749 HTTPID={921CFE12-F2B3-4186-A5FC-C03C12ABCBDD} 2012-06-04 15:56:16 0.0 0 127.0.0.1 parus POST /parus/query.xml 200 794 381 HTTPID={921CFE12-F2B3-4186-A5FC-C03C12ABCBDD} 2012-06-04 15:56:45 0.0 0 127.0.0.1 - GET /.admin/counters.xml 200 123 816 - 2012-06-04 15:56:45 0.0 0 127.0.0.1 - GET /.admin/sessions.xml 200 123 765 - 2012-06-04 15:56:45 0.0 0 127.0.0.1 - GET /.admin/messages.xml 200 123 400 - В начале файла идет служебная информация об используемом ПО для генерации log-файла. Далее каждая строка описывает одно событие сервера, и содержит дату и время события, время выполнения, объем данных, ip-адрес клиента, используемый метод и т.д. В дальнейшем, при необходимости, есть возможность экспортировать log-файл в базу данных. После выбора данного способа протоколирования будет предложено сохранить настройки конфигурации. Можно приступать к работе с сервисом. Работа</div></td></tr></table><br><a name="2630C2615D5F4B22BC8E5E43FEC453EB"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.5.2. В базу данных</div></td></tr><tr><td class="texttablecell"><div class="normalText">Протоколировать в БД При выборе пункта будет установлена дополнительная схема данных в БД Oracle с именем WEBSERVERLOG, в которую будеn производиться запись событий сервера. -  Пользователь-владелец данных - имя пользователя, от имени которого будет вестись log. - Пароль - пароль для пользователя - Пароль пользователя SYS - пароль пользователя, наделенного правами создания нового пользователя. После нажатия " Завершить " будет предложено сохранить настройки конфигурации. После сохранения можно приступить к работе с сервисом. Работа</div></td></tr></table><br><a name="6A29FC89511D4081AB987183FC0B2EC0"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.5.3. Не протоколировать</div></td></tr><tr><td class="texttablecell"><div class="normalText"> - Не протоколировать - отключить возможность протоколирования событий сервера. После выбора данного пункта будет предложено сохранить настройки конфигурации. Можно приступать к работе с сервисом. Работа</div></td></tr></table><br><a name="42A60D1580A34ACB8E99A0B23DA002F6"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.6. Проверить наличие обновлений</div></td></tr><tr><td class="texttablecell"><div class="normalText"> При нажатии на Проверка обновлений конфигуратор автоматически проверит наличие обновлений и, при необходимости, предложит скачать новую версию конфигуратора: Скачать? При нажатии кнопки "Yes" ("Да") будет произведено автоматическое скачивание новой версии сервиса. Скачка По окончании скачивания подтвердите установку: Установить? обновления будут установлены в фоновом режиме. При этом конфигуратор будет выгружен из памяти компьютера. После установки конфигуратор снова будет запущен и готов к работе. Если при проверке обновлений найдено не было, будет выведено сообщение: Нет обновлений</div></td></tr></table><br><a name="99A7AB6BB7C94982BAEC97213C5BF38A"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">3.7. Самостоятельное создание стартовой страницы</div></td></tr><tr><td class="texttablecell"><div class="normalText">При конфигурировании сервиса вы можете указать каталог, содержащий файлы вашей собственной стартовой страницы: Стартовая страница В указываемом вами каталоге должен находится файл с именем index.html, который будет выдан сервером в ответ на запрос. Внутри этого html-документа вы можете организовать взаимодействие с поставляемым web-приложением одним из следующих способов: С помощью перенаправления по ссылке. В этом случае пользователь будет просто перенаправлен на стартовую страницу web-приложения, и должен будет вводить параметры соединения, если они не были запомнены браузером. С помощью реализации своего механизма ввода логина и пароля. В этом случае у вас появляется возможность избавить пользователя от необходимости взаимодействовать с окном ввода логина и пароля, но на вас возлагается обязанность проверки правильности аутентификационной информации пользователя. С помощью фрейма. Вы можете "встроить" web-приложение внутрь вашего собственного документа с помощью механизма фреймов. Помните, что все текстовые файлы должны быть подготовлены вами в кодировке UTF-8. Ниже приведен пример реализации файла index.html. В демонстрационно-дидактических целях документ содержит примеры всех упомянутых механизмов: &lt;html&gt; &lt;head&gt; &lt;script&gt; function createHttpRequest() { var httpRequest; if(window.XMLHttpRequest) { httpRequest = new XMLHttpRequest(); if (httpRequest.overrideMimeType) httpRequest.overrideMimeType('text/xml'); } else if(window.ActiveXObject) { try { httpRequest = new ActiveXObject("Msxml2.XMLHTTP"); } catch(e) { try { httpRequest = new ActiveXObject("Microsoft.XMLHTTP"); } catch(e){} } } return httpRequest; } function doSubmit() { var handler = "parus"; //если организация одна, то оставить так. //если несколько организаций, то, соответственно, //"parus1", "parus2" и так далее. var oTestReq = createHttpRequest(); oTestReq.open("GET", "/" + handler + "/" + "sysinfo.xml?" + "login=" + document.all["login"].value + "&amp;" + "password=" + document.all["password"].value, false, document.all["login"].value, document.all["password"].value); oTestReq.setRequestHeader("Disable-Basic-Auth", "yes") oTestReq.send(""); if (oTestReq.status == 401 || oTestReq.status == 403) alert("Пользователь или пароль указаны неверно."); else if (oTestReq.status == 200) { document.cookie = "justClosed=0"; document.cookie = "loggedUserHandler=" + handler; document.cookie = "loggedUserName=" + document.all["login"].value; document.cookie = "loggedUserPassword=" + document.all["password"].value; document.all["loginform"].submit(); } } &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;!-- перенаправление на "стандартную" форму логина !--&gt; &lt;a href="/parusjs" target="_blank"&gt;Работа с приложением.&lt;/a&gt; &lt;hr/&gt; &lt;!-- реализация своей формы логина с обработкой аутентификаци !--&gt; &lt;form id="loginform" action="/parusjs" method="post"&gt; Пользователь: &lt;input type="text" id="login" name="login"/&gt;&lt;br/&gt; Пароль: &lt;input type="password" id="password" name="password"/&gt;&lt;br/&gt; &lt;input type="button" value="Войти" onClick="doSubmit()" /&gt; &lt;/form&gt; &lt;hr/&gt; &lt;!-- приложение во фрейме --&gt; &lt;iframe src="/parusjs" frameborder="0" width="100%" height="70%"&gt; &lt;/iframe&gt; &lt;/body&gt; &lt;/html&gt; </div></td></tr></table><br><a name="ABC2F0C22FDA4A2CA692DAC84D83A3A1"></a><table border="0" style="margin-left:1em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">4. Работа</div></td></tr><tr><td class="texttablecell"><div class="normalText"> После установки всех настроек появится запрос на сохранение конфигурации: Сохранить? Подтвердите сохранение. Для запуска сервера нажмите Запуск В процессе запуска необходимо зарегистрировать службу Windows, а также может потребоваться внести изменения в сетевые настройки компьютера, чтобы зарегистрировать правило, разрешающее сеFirewall. Перед изменением сетевых настроек конфигуратором будет задан вопрос: Изменения в сетевые настройки Отвечайте "Да" при работе в локальном сеансе на выделенном web-сервере. При установке сервиса через терминальный доступ, а также в случае, если на сервере установлено другое работающее в данный момент серверное программное обеспечение (особенно серверы управления базами данных с подключенными к ним пользователями), отвечайте "Нет". В этом случае вам потребуется настроить Firewall (если он используется) вручную. Об успешной установке службы Windows сигнализирует сообщение: Сервис успешно установлен После завершения работы инсталлятора необходимо убедиться в наличии службы Windows, а также в том, что она находится в состоянии "Запущен". Для этого в апплете "Службы" (Start --&gt; Control Panel --&gt; Administrative Tools --&gt; Services) найдите службу с именем "DataMill Application Server": Управление службами В этом окне с помощью контекстного меню Вы сможете в дальнейшем управлять состоянием службы - останавливать и запускать ее, когда это будет необходимо. Серверное приложение будет зарегистрировано в качестве службы операционной системы и сервер будет запущен: Сервис успешно установлен Главное окно изменит вид: ГО работа Кнопка Останов Служит для остановки сервиса. Нажатие ссылки " Активные сессии " открывает спсиок активных в настоящий момент сессий с указанием IP-адреса клиента, имени подключенного пользователя, временем до окончания сессии. Активные сессии Для того чтобы новый удаленный клиент мог подключиться к работе, он должен в адресной строке своего браузера набрать адрес сервера (или ip-адрес). Откроется окно с запросом имени и пароля пользователя: Логин После ввода имени и пароля необходимо нажать "Ок" и будет открыта форма работы сервиса. </div></td></tr></table><br><a name="E16C41C21FBD4F3189DE0053C28BFF42"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">4.1. Использование отладочного монитора</div></td></tr><tr><td class="texttablecell"><div class="normalText">Для устранения проблем и локализации ошибок применяется отладочный монитор из состава поставки сервиса: Отладочный монитор Отладочный монитор в реальном времени отображает все http и sql-запросы, приходящие через сервис. Воспользовавшись действием "Сохранить в файл", можно получить почти всю информацию, необходимую разработчику для локализации проблемы, в виде одного файла. </div></td></tr></table><br><a name="1D7394484F204FAA82D50E4F634A3E60"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">4.2. Рекомендации по разработке трафаретов</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Рекомендуется избегать следующих факторов при создании трафарета, которые могут влиять на замедление работы сервиса: 1. Выход за область отображения (печати) формы документа   При разработке трафарета необходимо отслеживать, чтобы за границами видимой формы (области печати) не было заполненных, не несущих смысловой нагрузки ячеек, а также ячеек с любым нестандартным форматированием. В противном случае, эти ячейки также попадут в область печати и будет распечатана ненужная страница. Также будет потрачено время на их отображение в форме документа. Ячейки вне области печати   2. Использование аттрибутов форматирования ячейки При создании трафарета документа, при выборе способа форматирования ячейки необходимо использовать метод выравнивания данных в ячейке по вертикали "ПО ВЕРХНЕМУ КРАЮ".   Данный метод позволяет существенно сократить время на генерацию формы в режиме он-лайн. Также включенная функция "ПЕРЕНОСИТЬ ПО СЛОВАМ" существенно замедляет отрисовку форм документов. В связи с этим необходимо ограничить использование данной функции в трафарете для тех ячеек, в которых находится статическая (постоянная) информация. Для приведенного ниже трафарета желтым цветом выделены ячейки, для которых функция "ПЕРЕНОС ПО СЛОВАМ" должна быть отключена. Эти ячейки не несут в себе переменной информации. Голубым выделены ячейки, для которых возможно также не требуется включение функции "ПЕРЕНОС ПО СЛОВАМ", так как для информации, которая будет в них внесена, достаточно места. Остальные ячейки можно использовать с переносом по словам. Пример с переносом и выравниванием Для того чтобы узнать способ форматирования одной или нескольких ячеек, необходимо выделить эту ячейку (или несколько ячеек с зажатой клавишей Ctrl). После этого правой кнопкой мыши вызвать контекстное меню и выбрать действие "Формат ячеек".  Перейти на вкладку "Выравнивание"  и убедиться, что соответствующие пункты заполнены верно:  Выравнивание в ячейке по верхнему краю3. Наличие скрытых ячеек В трафарете не должно быть скрытых столбцов и строк. Их наличие влияет на производительность работы сервиса, а также может влиять на отображение формы документа при распечатке.   Скрытые столбцы В данном примере при создании трафарета были скрыты столбцы А и F. Эти столбцы не несут никакой смысловой нагрузки, однако учитываются при генерации формы документа при работе он-лайн. Для того чтобы отобразить все скрытые ячейки на листе (если они есть) необходимо выбрать весь диапазон данных (одиночный щелчок левой кнопки мыши на выделенной на рисунке области): Выделение всего выделятся все ячейки. После этого в любом месте листа вызвать контекстное меню и выбрать действие "ОТОБРАЗИТЬ". 4. Перекрестные и неверные формулы Для увеличения производительности необходимо минимизировать использование перекрестных ссылок между формулами в разных ячейках. То есть если необходимо в одной ячейке посчитать, например, сумму двух ячеек, которые, в свою очередь, содержат формулы для подсчета сумм других ячеек, то для оптимальной работы необходимо в конечной ячейке произвести полный расчет необходимой суммы, а не давать ссылку на промежуточные расчеты. Рассмотрим следующий пример:   Пример с формулами В ячейке О20 считается значение суммы значений в ячейках O22 и O23, в которых в свою очередь подсчитываеются суммы соответственно ячеек L22, M22, N22 для O22 и L23, M23, N23 для O23. Для увеличения быстродействия рекомендуется в ячейке O20 сразу подсчитать сумму значений L22, M22, N22, L23, M23, N23, не прибегая при этом к дополнительным промежуточным вычислениям. 5. Использование нестандартных шрифтов. Нежелательно использование a трафарете шрифтов, не вкюченных в стандартную поставку Microsoft Excel, так как это значительно замедляет процесс отображения форм документов.  6. Ошибка при переносе трафарета Существуют ситуации, когда трафарет при разработке переносится с одного листа на другой. В этом случае, важно обратить внимание на точное выделение всех необходимых ячеек. Иначе в трафарет могут не попасть значимые ячейки и вся форма может оказаться неверной. </div></td></tr></table><br><a name="2B2A9B9DD7B04EEE856C7AB468BD8636"></a><table border="0" style="margin-left:1em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5. Часто задаваемые вопросы</div></td></tr><tr><td class="texttablecell"><div class="normalText"></div></td></tr></table><br><a name="ED01679A80A74E999952269A89D95D36"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1. Получение SSL-сертификата</div></td></tr><tr><td class="texttablecell"><div class="normalText"></div></td></tr></table><br><a name="5EA1B236BC3E4DC999210F7DBDBAE73B"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.1. Протокол SSL</div></td></tr><tr><td class="texttablecell"><div class="normalText">SSL (англ. Secure Sockets Layer — уровень защищённых сокетов) SSL это криптографический протокол использующий протокол TCP/IP, т.е. он (SSL) находится между транспортным протоколом TCP/IP и протоколами прикладного уровня HTTP, SMTP, преобразуя их сообщения в шифрованный вид. Для работы по протоколу SSL требуется, чтобы на сервере был установлен SSL-сертификат. Безопасность соединения обеспечивается с помощью аутентификации (сертификат привязан к одному конкретному домену) и шифрования (передаваемая информация может быть расшифрована только с помощью специального ключа). Каждый сертификат содержит в себе информацию о: доменное имя, на которое получен сертификат; юридическое лицо, владеющее сертификатом; местонахождение владельца сертификата (страна, город); реквизиты компании, удостоверяющей подлинность сертификата. SSL-cертификат подтверждает, что домен принадлежит реальной компании и что его владелец вправе пользоваться секретным ключом на законных основаниях. Выпуск SSL-сертификатов осуществляется Центрами сертификации. Существует большое количество Центров сертификации во всем мире, в том числе и в России. Однако, для того чтобы Ваш сертификат принимался во всем мире, желательно получить сертификат в большой международной организации. Наиболее известные мировые центры сертификации: Thawte Products GeoTrust VeriSign В России интересы Центров сертификации представляют многие компании-регистраторы. Для примера далее рассматривается процесс получения SSL-сертификатов от Компании Thawte Products через российскую RU-CENTER. </div></td></tr></table><br><a name="CF716D6DC1534A749943C8E6B8532CA9"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.2. Виды сертификатов</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Компания RU-CENTER предлагает получить SSL-сертификаты крупнейших международных Центров Сертификации. Для примера рассмотрен процесс получения сертификатов компании Thawte. Эта компания предлагает следующие виды SSL-сертификатов, наиболее востребованных в российских реалиях: SSL 123SSL Web ServerSSL WildcardСертификат Период SSL 123SSL Web Server CertificatesWildcard SSL CertificatesОбласть применения Сети интранет Почтовые сервисы Небольшие интернет-магазины Авторизация и передача личной информации Платежные системы Интернет-банкинг Оплата пластиковыми картами Интернет-магазины Защита каналов связи Корпоративные сети Другие Защита неограниченного числа субдоменов одного уровня (например, вида *.test.ru). Выдается Физическим и юридическим лицам Юридическим лицам Юридическим лицам Подтверждает информацию О домене О домене и организации О домене и организации Примерные сроки выдачи от 1 дня от 3 дней от 3 дней Стоимость (руб.) на 10.02.2012 1 год 2 года 3 года 4 года 5 лет 2630 4970 6570 8540 10490 4750 8320 11430 15410 18980 20990 36740 - - - Дополнительно Упрощенная процедура проверки. Удостоверяет одно доменное имя. Не требует предоставления документов. Стандартный сертификат для интернет-коммерции. Удостоверяет одно доменное имя. Подтверждает существование организации. Поддержка субдоменов: удостоверяет множество доменов вида *.test.ru на одном домене. Подтверждает существование организации. Для всех сертификатов уровень шифрования от 128-бит до 256-бит; совместимость с браузерами 99.9%; бесплатный перевыпуск (до 3 раз); поддержка протоколов HTTP, IMAP, POP3, SMTP, NNTP, FTP, IRC, SIP, IPP, RDP и др. </div></td></tr></table><br><a name="6DEC13D3F6744B6880FDF1D51617032A"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3. Получение SSL-сертификатов</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Процедура получения SSL-сертификата для юридического лица состоит из двух этапов: Предварительная подготовка - на данном этапе необходимо подготовить все обязательные документы, создать и опубликовать доменное имя, создать адрес электронной почты в соответствии с требованиями центра сертификации. Создание и отправка запроса</div></td></tr></table><br><a name="6D0176B8B2AD48998194DDA8AD71779D"></a><table border="0" style="margin-left:4em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.1. Предварительная подготовка</div></td></tr><tr><td class="texttablecell"><div class="normalText"> <IDXSKIP>Перед подачей заявления на выпуск SSL-сертификата необходимо выполнить следующие условия: </IDXSKIP></div></td></tr></table><br><a name="ABEBE88D0CC5473CAD338387FD0944AC"></a><table border="0" style="margin-left:5em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.1.1. Пакет документов</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Электронную копию (скан) свидетельства о внесении записи о вашем юридическом лице в единый государственный реестр юридических лиц. Электронную копию (скан) свидетельства о постановке вашего юридического лица на учет в территориальном налоговом органе. Электронную копию (скан) документа, подтверждающего наличие контактного телефонного номера (копия счета телефонной компании или копия договора с телефонной компанией). Пожалуйста, выделите ручкой или маркером номер вашего телефона на странице. Данный документ требуется для осуществления проверочного звонка в организацию. Если предоставить такой документ затруднительно, рекомендуем вам зарегистрироваться в общедоступных базах данных. Существует еще один альтернативный вариант — можно загрузить нотариально заверенное заявление, подтверждающее право технического контакта подать заявку на сертификат SSL от лица организации. В случае если заказчик SSL-сертификата не является администратором домена, Удостоверяющий центр может потребовать предоставить письмо («domain release letter») в качестве доказательства того, что Администратор домена не возражает против выпуска сертификата на его доменное имя. Письмо предоставляется с подписью и печатью организации, являющейся администратором домена. При заполнении следует соблюсти следующие требования: - оформление заявления на бланке организации; - визирование подписью Корпоративного Контакта, указанного, в заказе на SSL-сертификат; - заполнение должным образом всех граф. </div></td></tr></table><br><a name="DC92C49735E44176A777D30BC88EEA9B"></a><table border="0" style="margin-left:5em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.1.2. Доменное имя</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для того чтобы иметь возможность получить SSL-сертификат, ваше доменное имя должно быть зарегистрировано и иметь запись в международном сервисе WHOIS. Для того чтобы узнать наличие записи о Вашем доменном имени, перейдите по ссылке whois.  В открывшемся окне введите проверяемое доменное имя. Пример запроса информации по доменному имени:  Whois2 </div></td></tr></table><br><a name="B5B639C62B8247D8980D9390C50D9148"></a><table border="0" style="margin-left:5em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.1.3. IP-адрес</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для установки и корректного функционирования SSL-сертификата обязательно наличие выделенного IP-адреса. Если у вас несколько субдоменов на одном IP вы можете воспользоваться Wildcard SSL сертификатом. </div></td></tr></table><br><a name="FDF67BB1578B4633917730DB234CDA05"></a><table border="0" style="margin-left:5em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.1.4. Адрес электронной почты</div></td></tr><tr><td class="texttablecell"><div class="normalText"> По требованию Удостоверяющего центра при заказе SSL-сертификата необходимо указать адрес электронной почты (approver email), на который будет отправлен запрос на подтверждение выпуска сертификата. E-mail получателя может принимать одно из следующих значений: admin@[имя_домена] administrator@[имя_домена] hostmaster@[имя_домена] root@[имя_домена] postmaster@[имя_домена] webmaster@[имя_домена] где [имя_домена] должно соответствовать полю «Common Name» (CN), указанному в CSR. В случае если сертификат заказывается для поддомена, в e-mail допускается использовать домен второго уровня. Например, при заказе сертификата для домена «www.test.ru» с именем получателя «admin» можно использовать e-mail: - admin@www.test.ru, - admin@test.ru. </div></td></tr></table><br><a name="654BEE7BC7C84DCBB8070A14B3392A58"></a><table border="0" style="margin-left:5em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.1.5. Создание аккаунта RU-CENTER</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для заказа любого вида SSL-сертификата, например через компанию RU-CENTER, предварительно необходимо создать аккаунт на сайте RU-CENTER. Если у компании уже есть аккаунт на www.nic.ru - пропустите данный раздел. Заходим на страницу регистрации нового аккаунта . Проставляем галочку "Я ознакомлен и согласен со всеми условиями, на которых будут оказаны услуги." Выбираем признак "Анкета заполняется для резидента РФ" (да/нет) Выбираем форму собственности компании: </div></td></tr></table><br><a name="FFAC8734ED0E4EFCB3B5E608E6CF414D"></a><table border="0" style="margin-left:6em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.1.5.1. Для физического лица</div></td></tr><tr><td class="texttablecell"><div class="normalText">Заполнение анкеты:Фамилия, имя, отчество (person-r): Заполняется в соответствии с паспортными данными по-русски. Сидоров Сидор Сидорович Имя и фамилия (person): Без точек, заполняется латинскими буквами. Данная информация общедоступна при использовании сервиса Whois для международных и зарубежных доменов. Можно воспользоваться функцией "Создать автоматически по полю person-r" для автоматической транслитерации русского написания в латинское. Sidor Sidorov Паспортные данные (passport):* Серия, номер, кем выдан, дата выдачи, место регистрации с указанием города, улицы, номера дома и квартиры, если частный дом, должно быть указано "частный дом". 12 34 567890 выдан 123 отделением милиции г.Москвы, 30.01.1990 зарегистрирован по адресу: Москва, ул.Кошкина, д.15, кв.4 Дата рождения (birth-date): Указывается цифрами через точку в формате DD.MM.YYYY, где DD - число, MM - месяц, YYYY - год. 18.10.1965 Почтовый адрес (p-addr): Будет использоваться для рассылки возможных уведомлений и официальных документов. Повторная отправка возвращенных почтовым отделением документов, оформление заверенных копий и переоформление оригиналов документов осуществляется платно, согласно действующим тарифам. Кому: Сидорову Сидору Сидоровичу Куда: Москва, ул.Кошкина, д.15, кв.4 Индекс: 123456 Телефон (phone): С обязательным указанием международного кода и кода города. Информация по каждому телефону должна быть представлена отдельной строкой. Для делегирования доменов.RU и.РФ необходимо указать номер телефона с функцией приема SMS. Данная информация общедоступна при использовании сервиса Whois. +7 495 1234567 Факс (fax-no): С обязательным указанием международного кода и кода города. Информация по каждому факсу должна быть представлена отдельной строкой. Данная информация общедоступна при использовании сервиса Whois. +7 495 1234567 Адрес электронной почты (e-mail): Используется для направления запросов RU-CENTER и информации административного характера, а также для отсылки уведомлений о запрошенных и оказанных услугах, о необходимости продления услуг. Для более надежной связи желательно указать групповой адрес рассылки. Возможно указание нескольких электронных адресов, в этом случае информация по каждому адресу должна быть представлена отдельной строкой. Данная информация общедоступна при использовании сервиса Whois. adm-group@my-internet-name.ru sidor@test.my-provider.ru Адрес электронной почты для уведомлений технического характера (mnt-nfy): Используется для направления уведомлений RU-CENTER об изменениях параметров услуг и их настроек, об изменении данных в анкете и т.п. Возможно указание нескольких электронных адресов, в этом случае информация по каждому адресу должна быть представлена отдельной строкой. Если поле не заполнено, уведомления технического характера по электронной почте не высылаются noc@my-internet-name.ru Административный пароль: административный пароль, который Вы будете использовать для доступа в раздел "Для клиентов" для заказа и настройки услуг Подтверждение административного пароля: Технический пароль: Технический пароль обладает ограниченными возможностями по сравнению с административным, он предназначен для специалиста, непосредственно осуществляющего настройку технических параметров услуги. При создании паролей разрешается использовать только латинские буквы и цифры. После заполнения всех необходимых полей нажать кнопку "Отправить анкету" Будет выведено сообщение об успешном заполнении анкеты. На указанный почтовый ящик будет отправлено письмо с уведомлением об успешном заполнении анкеты. Для продолжения работы нажать кнопку "Начать работу". </div></td></tr></table><br><a name="F8E0EF2014EA4D4BAB3E74278BDC795E"></a><table border="0" style="margin-left:6em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.1.5.2. Для юридического лица</div></td></tr><tr><td class="texttablecell"><div class="normalText">Заполнение анкеты:Наименование организации в соответствии с учредительными документами (org): Включает организационно-правовую форму и название юридического лица. Заполняется латинскими буквами. Допускается использование аббревиатуры. Длина поля org не должна превышать 100 символов. Данная информация общедоступна при использовании сервиса Whois. JSC "New time" Полное наименование организации в соответствии с учредительными документами (org-r): Включает организационно-правовую форму и полное (без сокращений!) наименование юридического лица в соответствии с учредительными документами. Используется при формировании счетов и счетов-фактур. Поле заполняется по-русски. Закрытое Акционерное Общество "Новое время" Пример для структурного подразделения: Калужский филиал Закрытого Акционерного Общества "Новое время" (наименование филиала) Наименование головной организации (parent-org-r): Заполняется только структурным подразделением (филиалом, представительством). Указывается полное наименование головной организации. Используется при формировании счетов-фактур. В остальных случаях заполнять поле и ставить прочерк не нужно. Закрытое Акционерное Общество "Новое время" (название головной организации) ИНН (code): Данные из этого поля будут использоваться при формировании счетов на оплату, а также для идентификации в базе данных Регистратора. 1234567891 КПП (kpp): Код причины постановки на учет налогоплательщика покупателя. Данные из этого поля будут использоваться при формировании счетов-фактур в поле "ИНН/КПП покупателя". 123456789 Юридический адрес организации (address-r): Место нахождения юридического лица в соответствии с учредительными документами. Данные из этого поля будут использоваться при формировании счетов и счетов-фактур. 123456, Москва, ул.Собачкина, д.13а Пример для структурного подразделения: 123456, Москва, ул.Собачкина, д.13а (место нахождения головной организации) Почтовый адрес (p-addr): На этот адрес по почте будут высылаться оригиналы счетов и другие официальные документы. В поле нужно указать всю информацию, необходимую для надежной доставки письма до адресата. Обязательно: — указание почтового индекса и получателя (адресата), — наличие договора об оказании услуг почтовой связи с вашим почтовым отделением. Кому: ЗАО "Новое Время", Отдел телекоммуникаций, Сидорову Сидору Сидоровичу Куда: Москва, ул.Собачкина, д.13а Индекс: 123456 Адрес грузополучателя (d-addr): Почтовый адрес без названия организации и указания лиц, получающих корреспонденцию. Данные из этого поля будут использоваться при формировании счетов-фактур в поле "Грузополучатель и его адрес". Пример: 123456, Москва, ул.Собачкина, д.13а Пример для структурного подразделения: 248600, г. Калуга, ул. Театральная, д. 36 (почтовый адрес структурного подразделения) Телефон (phone): С обязательным указанием международного кода и кода города. Информация по каждому телефону должна быть представлена отдельной строкой. Для делегирования доменов.RU и.РФ необходимо указать номер телефона с функцией приема SMS. Данная информация общедоступна при использовании сервиса Whois. +7 495 1234567 +7 495 1234568 +7 495 1234569 Факс (fax-no): С обязательным указанием международного кода и кода города. Информация по каждому факсу должна быть представлена отдельной строкой. Данная информация общедоступна при использовании сервиса Whois. +7 495 1234560 Адрес электронной почты (e-mail): Используется для направления запросов RU-CENTER и информации административного характера, а также для отсылки уведомлений о запрошенных и оказанных услугах, о необходимости продления услуг. Для более надежной связи желательно указать групповой адрес рассылки. Возможно указание нескольких электронных адресов, в этом случае информация по каждому адресу должна быть представлена отдельной строкой. Данная информация общедоступна при использовании сервиса Whois. adm-group@my-internet-name.ru Адрес электронной почты для уведомлений технического характера (mnt-nfy): Используется для направления уведомлений RU-CENTER об изменениях параметров услуг и их настроек, об изменении данных в анкете и т.п. Возможно указание нескольких электронных адресов, в этом случае информация по каждому адресу должна быть представлена отдельной строкой. Если поле не заполнено, уведомления технического характера по электронной почте не высылаются Административный пароль: административный пароль, который Вы будете использовать для доступа в раздел "Для клиентов" для заказа и настройки услуг Разрешается использовать только латинские буквы и цифры. Технический пароль: обладает ограниченными возможностями по сравнению с административным, он предназначен для специалиста, непосредственно осуществляющего настройку технических параметров услуги. После заполнения всех необходимых полей нажать кнопку "Отправить анкету" Будет выведено сообщение об успешном заполнении анкеты. На указанный почтовый ящик будет отправлено письмо с уведомлением об успешном заполнении анкеты. Для продолжения работы нажать кнопку "Начать работу". </div></td></tr></table><br><a name="2E41118E98404704B5838AC03F687427"></a><table border="0" style="margin-left:6em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.1.5.3. Для индивидуального предпринимателя (ИП)</div></td></tr><tr><td class="texttablecell"><div class="normalText">Заполнение анкеты:Фамилия, имя, отчество (person-r): Заполняется по-русски в соответствии с паспортными данными. Перед фамилией должна присутствовать аббревиатура ИП. ИП Сидоров Сидор Сидорович Имя и фамилия (person): Без точек, заполняется латинскими буквами. Можно воспользоваться функцией "Создать автоматически по полю person-r" для автоматической транслитерации русского написания в латинское. Данная информация общедоступна при использовании сервиса Whois для международных и зарубежных доменов. Sidor Sidorov Паспортные данные (passport): Серия, номер, кем выдан, дата выдачи, место регистрации с указанием города, улицы, номера дома и квартиры, если частный дом, должно быть указано "частный дом". 12 34 567890 выдан 123 отделением милиции г.Москвы, 30.01.1990 зарегистрирован по адресу: Москва, ул.Кошкина, д.15, кв.4 Адрес прописки (address-r): Место регистрации индивидуального предпринимателя. Данные из этого поля будут использоваться при формировании счетов и счетов-фактур. 123456 Москва, ул.Собачкина, д.13а, кв.78 ИНН предпринимателя (code) : Данные из этого поля будут использоваться при формировании счетов на оплату, а также для идентификации в базе данных Регистратора. 123456789012 Дата рождения (birth-date): Указывается цифрами через точку в формате DD.MM.YYYY, где DD - число, MM - месяц, YYYY - год. 18.10.1965 Почтовый адрес (p-addr): На этот адрес по почте будут высылаться оригиналы счетов и другие официальные документы. В поле нужно указать всю информацию, необходимую для надежной доставки письма до адресата. Обязательно указание почтового индекса и получателя (адресата). Повторная отправка возвращенных почтовым отделением документов, оформление заверенных копий и переоформление оригиналов документов осуществляется платно, согласно действующим тарифам. Кому: Сидорову Сидору Сидоровичу Куда: Москва, ул.Кошкина, д.15, кв.4 Индекс: 123456 Адрес грузополучателя (d-addr): Почтовый адрес без указания лиц, получающих корреспонденцию. Данные из этого поля будут использоваться при формировании счетов-фактур в поле "Грузополучатель и его адрес". 123456, Москва, ул.Собачкина, д.13а Телефон (phone): С обязательным указанием международного кода и кода города. Информация по каждому телефону должна быть представлена отдельной строкой. Для делегирования доменов.RU и.РФ необходимо указать номер телефона с функцией приема SMS. Данная информация общедоступна при использовании сервиса Whois. +7 495 1234567 +7 495 1234568 +7 495 1234569 Факс (fax-no): С обязательным указанием международного кода и кода города. Информация по каждому факсу должна быть представлена отдельной строкой. Данная информация общедоступна при использовании сервиса Whois. +7 495 1234560 Адрес электронной почты (e-mail): Используется для направления запросов RU-CENTER и информации административного характера, а также для отсылки уведомлений о запрошенных и оказанных услугах, о необходимости продления услуг. Для более надежной связи желательно указать групповой адрес рассылки. Возможно указание нескольких электронных адресов, в этом случае информация по каждому адресу должна быть представлена отдельной строкой. Данная информация общедоступна при использовании сервиса Whois. adm-group@my-internet-name.ru sidor@test.my-provider.ru Адрес электронной почты для уведомлений технического характера (mnt-nfy): Используется для направления уведомлений RU-CENTER об изменениях параметров услуг и их настроек, об изменении данных в анкете и т.п. Возможно указание нескольких электронных адресов, в этом случае информация по каждому адресу должна быть представлена отдельной строкой. Если поле не заполнено, уведомления технического характера по электронной почте не высылаются noc@my-internet-name.ru Административный пароль: административный пароль, который Вы будете использовать для доступа в раздел "Для клиентов" для заказа и настройки услуг Разрешается использовать только латинские буквы и цифры. Технический пароль: обладает ограниченными возможностями по сравнению с административным, он предназначен для специалиста, непосредственно осуществляющего настройку технических параметров услуги. После заполнения всех необходимых полей нажать кнопку "Отправить анкету" Будет выведено сообщение об успешном заполнении анкеты. На указанный почтовый ящик будет отправлено письмо с уведомлением об успешном заполнении анкеты. Для продолжения работы нажать кнопку "Начать работу". </div></td></tr></table><br><a name="CDD2CABA154A4F428B6DD978C82DDB60"></a><table border="0" style="margin-left:5em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.1.6. Внесение денежных средств на личный счет</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для того чтобы заказать SSL-сертификат через компанию RU-CENTER необходимо, чтобы перед отправкой запроса на личном счету в личном кабинете вашей компании было достаточно средств для оплаты данной услуги. Текущий баланс можно проверить в личном кабинете (Оплата - Баланс личного счета): Баланс Для того чтобы пополнить баланс необходимо в личном кабинете из верхнего меню выбрать пункт "Оплата" и в выпадающем списке выбрать "Пополнить личный счет": Пополнить счет Откроется страница внесения денежных средств: Сумма Здесь нужно ввести сумму в рублях, на которую Вы планируете пополнить баланс и нажать кнопку "Пополнить". После этого откроется страница выбора способа пополнения, на которой можно выбрать нужный вариант. Банковские переводы (безналичный расчет) - здесь Вы можете сделать запрос о формировании нового счета на оплату указанной суммы. Через интернет и электронной наличностью (Яндекс.Деньги, MoneyMail, WebMoney и другие) - здесь для Вас будут выведены реквизиты выбранной платежной системы для оплаты (номер кошелька). Через терминалы и точки приема наличных - здесь будут выведены реквизиты для оплаты через платежные терминалы и точки приема платежей (номер заказа) При помощи мобильного телефона - будут выведены реквизиты для отправки платного SMS-сообщения. Электронные переводы - реквизиты платежной системы. Рассмотрим процесс безналичного перевода: Выбрать способом оплаты "Безналичный расчет":   Банк иконка Откроется страница с информацией о выставленном счете: Счет Счет можно просмотреть и распечатать, нажав на одну из ссылок: HTML, RTF, PDF. После оплаты счета денежные средства поступают на личный счет вашей компании. </div></td></tr></table><br><a name="46D4A32053BE40E2BA4AE625C509EEFF"></a><table border="0" style="margin-left:4em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.2. Создание и отправка запроса</div></td></tr><tr><td class="texttablecell"><div class="normalText"></div></td></tr></table><br><a name="2590C14AAFCD4F8296D51C34F6EF4563"></a><table border="0" style="margin-left:5em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.2.1. Выбор типа сертификата</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для заказа SSL-сертификата необходимо авторизоваться в личном кабинете на сайте Nic.ru. Для этого в правом верхнем углу нажать "Вход" и в открывшейся странице ввести свои номер договора и пароль, полученные в процессе регистрации. При этом суффикс договора оставить "NIC-D". После ввода данных нажать кнопку "Вход" ниже. Откроется личный кабинет. В разделе "Заказать услугу" выбрать пункт "SSL-сертификат". SSL сертификат Откроется окно выбора типа сертификата: Выбор сертификата Подробная информация о типах SSL-сертификатов: Виды сертификатов Выбрать необходимый сертификат и срок его действия, нажать "Продолжить". Откроется окно для ввода CSR-запроса. Подробно Создание CSR запроса</div></td></tr></table><br><a name="3279C18E869544E1BC42F320B13C4E5C"></a><table border="0" style="margin-left:5em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.2.2. Отправка CSR-запроса</div></td></tr><tr><td class="texttablecell"><div class="normalText"> После того как Вы определились с видом желаемого сертификата, необходимо Создать CSR запрос и внести его в форму на странице: Ввод CSR Заполнение поля запроса производится прямым копированием текста запроса из буфера обмена. После этого необходимо выбрать используемый Вами тип сервера из списка ниже. В случае если Вы планируете работу с Платформой "Мельница данных" - выберите пункт "Other" ("Другой"). Нажмите кнопку "Продолжить". На следующей странице: Проверка некоторые из реквизитов будут заполнены автоматически на основании данных введенных Вами ранее при создании запроса и при регистрации аккаунта. Проверьте эти данные и заполните все остальные поля достоверной информацией. Все поля заполняются латинскими символами. Название организации в поле «Organization name» должно соответствовать данным указанным в CSR, в Whois домена и в свидетельстве о регистрации юридического лица. Длина названия организации не должна превышать 64 символов. В поля формы «Данные контактного лица» необходимо вводить корректную информацию, так как Удостоверяющий центр может воспользоваться ей для запроса дополнительных сведений. Нажмите кнопку "Продолжить" после заполнения всех полей. На следующей странице Вам будет предложено проверить все введенные данные. Если данные введены верно, нажмите кнопку "Отправить заказ". Данные будут отправлены. </div></td></tr></table><br><a name="CEAB4D709B7C4730A360B1E3FEBEA709"></a><table border="0" style="margin-left:6em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.2.2.1. Создание CSR запроса</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Для генерации CSR-запроса существует несколько путей. Наиболее защищенным вариантом (рекомендуемым) является создание такого запроса с использованием OpenSource (свободно распространяемого) программного обеспечения OpenSSL Project (http://www.openssl.org/). На сайте проекта представлены открытые исходные коды программного обеспечения для обслуживания SSL-сертификатов. Коды находятся в свободном доступе на странице Исходные коды и могут быть скомпилированы под используемую конечным пользователем Платформу. Для Платформы Microsoft Windows готовые скомпилированные файлы проекта можно найти на сайте партнера проекта Shining Light Productions . В открывшемся списке файлов на этой странице выбрать вариант используемой операционной системы Windows компьютера, на котором будет производиться генерация CSR-запроса. Win32 OpenSSL v1.0.0g - для 32 битных операционных систем Win64 OpenSSL v1.0.0g - для 64 битных операционных систем После нажатия на выбранную ссылку начнется процесс скачивания файла программного обеспечения (около 16 Мб). По завершении скачивания, необходимо запустить с локального диска файл Win32OpenSSL-1_0_0g(1).exe (для 32-хбитных систем) или Win64OpenSSL-1_0_0g(1).exe (для 64-хбитных систем). Процесс установки (на примере для 32-хбитных систем): Setup1 Предупреждение системы безопасности - нажать "RUN" ("Выполнить") Setup2 1-й экран установщика - нажать "Next" ("Далее") Setup3 Лицензионное соглашение - ознакомиться, выбрать пункт "I accept the agreement" и нажать "Next" ("Далее"). Setup4 Выбор папки для установки - выбрать путь для установки программного обеспечения на жестком диске, нажать "Next" ("Далее"). Setup5 Выбор папки установки в меню "Start" ("Пуск") - выбрать наименование папки, нажать "Next" ("Далее"). Setup6 Выбор месторасположения дополнительных библиотек - установить библиотеки в папку установки программного обеспечения C:\OpenSSL\bin . Оставить без изменений, нажать "Next" ("Далее"). Setup7 Проверка информации - проверить введенную ранее информацию, нажать "Install" ("Установить"). Начнется процесс установки программного обеспечения (около минуты). Далее появится окно: Donations Здесь разработчики предлагают внести посильный вклад в развитие проекта путем перечисления определенной суммы. Данное действие добровольное и, если Вы не хотите перечислять денежные средства разработчикам, просто уберите все галочки из этого окна и нажмите "Finish" ("Завершить"). Установка завершена. Для создания CSR-запроса необходима следующая последовательность действий: Запустить сеанс командной строки MS. Для этого выполнить "START - RUN" ("ПУСК - Выполнить..."). В открывшемся окне CMD ввести "cdm", нажать кнопку "Ok". Откроется окно командной строки Windows Установить в качестве рабочей директории папку C:\OpenSSL\bin , для этого в командной строке ввести команду cd c:\openssl\bin. После ввода нажать "Enter": Установка папки Задать путь к конфигурационному файлу: set OPENSSL_CONF=C:\OpenSSL\bin\openssl.cfg. После ввода нажать "Enter": SSLConf Сгенерировать закрытый ключ шифрования. Для этого ввести в командной строке: openssl genrsa -des3 -out private.key 2048 - команда для формирования текста закрытого ключа. Параметр "2048" указывает минимальную длину закрытого ключа. "private.key" - имя файла, в который будет сохранен текст закрытого ключа. После ввода команды нажать "Enter". Начнется формирование закрытого ключа шифрования. На одном из этапов будет запрошен пароль для шифрования закрытого ключа: Ввод пароля Здесь необходимо 2 раза ввести секретный пароль, с помощью которого Вы в дальнейшем сможете восстановить информацию закрытого ключа. После ввода нажмите "Enter". По окончании процесса в папке C:\OpenSSL\bin будет сформирован файл, содержащий закрытый ключ. Примерное содержимое файла: -----BEGIN RSA PRIVATE KEY----- Proc-Type: 4,ENCRYPTED DEK-Info: DES-EDE3-CBC,BB1B386511FA8AA1 35KXOCPXp95tIc8HN9Z+/jWtv/1KDIQJPb2DKM90iqVbf2O8wfCAChG2/j3vwzoq fKD57/O7g9MdmeREJSxBt3JaBau/NMPKsACtKtWDpPQMQ9DX8ZpScGQ+FyVehkBh BKxXibuivdGBkgrHTgUBhT3FfRNZcP2Sq7HkaTFx55weUvTWjs099A6rf/SePMYU NC1qv7Ft6xZK43ANem3gG4UUzzvTVJIamH4516fZBcW0QQn6Jw0LVa58vAdVdFfD uVoyFEtU3eqDDGEw+20GMzCJbN2Lr3M/RUL4PQHp7jgHVxXGQE/HWfJlKeoUtqia B7UZ6zxbNZksGS9dcElEpL506/Ba5J4gXV8G+PlPRMUCEXJ//K6f/+dMDuEMlzvX tp6iX9spXwXx/kJQ3dNbWHIMkZYFUeFlA1XRW4OpRDhwktMzICT0K6DFxqcf1BQf Wmn2WKlPVNMfmtIEb1rGj9Neow/ekEmnKTlQYb73Bms5DerOEYGZB3mDfSzASYTG Pj32hdWGXQZHCtrDsc7vM5hn6rqFRm3+oEasakOaruWroCLk03mrbNb7QVGUDX3J JZgwqkzI0QxBJg27qpccgsF4vf5BOdK73otetVy2lHLZsyOP5jG26g4YqwcoEVKC aPzVzXhMXNIYzjnUxoB6E0ikTrH7kFhR776bLINNcAddvwTGNTio5wNdbEWalPuc 8xFOwDLeuG1L0gvZvrHS94cc4c6CXb+/9BiITo6pMv5Pn2TLZHh23EI0cQHfKY8i CNEAVnbg7nwFzCkLnmaKLFRIhGArUKAMbbF1IIZ3dVicdWhPWd72xFIrjOYKM0J6 uiyRqhTAlwzGg/93/dfryZhdlqRzm50PSTU2+dlTwKTugDtE8y3cT+5xQ66kbieZ rQTyh6/Wl+pVhvWdqeY3TNfgE+d/w5mBttKYu8/tYMmGmGHaDtwTg76PX8Z2EkhN 5dezGyhrVx126xXz6NEoeGoxBEQ6N68hxqVIHHGPZjkJT1c6sZRgUMQf29pA4C35 yQZj2WB4Xh+8qXOFoj5tg3r1JGGLoaz1rc71iGoquguugVWtqKtbE/lVo7Pt/tED aa07vvhhv6Pi4r1fVTceKUGEXVOP/EqAsUVgkf2xtpuNVRjJ1DflBnFladDpckTs LJ1g4CUCVTCVYoQg1WPNGsZoNb2HtolLBcK31HgIgcq8FEvi3byRH+grtcCZ20Sz hMPiytuxVeaS0wgoZbwWqb5vu46Om+rPyQ9ePMy7YdN/9ujRloGq8rIjzp7u3/qh -----END RSA PRIVATE KEY----- . Сохраните файл в надежном месте и не передавайте его никаким третьим лицам для сохранения конфиденциальности Вашего HTTPS-соединения. На основании полученного ранее закрытого ключа создать CSR-запрос на SSL-сертификат. Для этого в командной строке ввести команду: openssl req -new -key private.key -out csr.csr с указанием файла, содержащего текст закрытого ключа, полученного на предыдущем шаге (private.key) и именем нового файла, который будет содержать в себе текст CSR-запроса (csr.csr). После ввода команды нажать "Enter". Будет запрошен пароль закрытого ключа. Введите пароль, который вводили на предыдущем шаге, нажмите "Enter". Далее будут заданы несколько вопросов о принадлежности домена, для которого запрашивается SSL-сертификат. Country name (2 letter code) [AU] - Двухбуквенный код страны, в которой зарегистрирована организация. Для РФ необходимо указывать RU. State or Province name - Область. Для Москвы можно указывать Moscow. Locality Name(City) - Город, в котором зарегистрирована организация. Например, Moscow. Organization Name - Название организации. Название в форме заявки должно быть абсолютно идентичным, как и в представленных документах. Так, например, если в свидетельстве указано Открытое Акционерное Общество «Бизнес», то в сертификате должно фигурировать OAO Biznes. Иные написания: ОАО Компания Бизнес, ОАО Компания Biznes, ОАО КБ и т.п. — не допускаются. Обратите внимание на корректность указания формы собственности. Форма собственности указывается исключительно латинскими буквами, либо в Европейской интерпретации. OOO = Ltd или LLC OAO = OJSC, JSC или OAO (латинскими) ZAO = CJSC или JSC. название должно быть указано без кавычек и любых других специальных символов, которые можно набрать на клавиатуре, в английской раскладке (например ! @ # " и т.п.) Organizational Unit Name - Подразделение в компании, которое ответственно за данный сертификат. Например, IT Department. Common Name - Доменное имя, для которого необходим сертификат. Учтите, если сертификат необходим для сайта www.domain.tld, то это имя нужно указать полностью. Если сертификат необходим для сайта domain.tld, то именно это имя нужно указать. Для wildcard сертификатов необходимо указывать «звездочку» в левой части названия сайта, например, *.domain.tld Если домен не принадлежит компании, то необходимо предоставить скан-копию письма от владельца домена (DRL-письмо), подтверждающее его согласие на использование доменного имени для приобретения сертификата. Никаких печатей и подписей клиента на письме DRL быть не должно. Письмо подписывается исключительно владельцем домена. Никаких печатей и логотипов владельца быть не должно. Шаблон письма высылается на корпоративный контактный email клиента, указанный при регистрации на ssl.ru E-mail adress - корпоративный контактный email клиента. Далее идут необязательные параметры. Завершение ввода каждого из параметров необходимо завершать нажатием клавиши "Enter". После завершения работы построителя запроса в папке C:\OpenSSL\bin будет создан файл с заданным Вами именем (здесь csr.csr ). Файл содержит готовый CSR-запрос, примерно следующего вида: -----BEGIN CERTIFICATE REQUEST----- MIIC6TCCAdECAQAwgYwxCzAJBgNVBAYTAlJVMQ8wDQYDVQQIDAZNb3Njb3cxDzAN BgNVBAcMBk1vc2NvdzETMBEGA1UECgwKT0FPIENvbnNJRDELMAkGA1UECwwCSVQx FjAUBgNVBAMMDXd3dy5jb25zaWQucnUxITAfBgkqhkiG9w0BCQEWEnZvc3Rlbnp1 a0BpbmJveC5ydTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALbs88zF dpb1keTP10FI5Y9cozXL1Y/aXgfLGs4oCWVF1DE98aTitXpc06FgFhhZ2sDe6k1A vUb0ic+Jji7CJ94npUZ+YpIpUBAYthJcKxNPjFum9MKm4EA5QCFkjmW4Qr+uz6K8 wWEC665QKeTYGm1FN9xdnYMkrVVfLKPgqMBLfH1t9yPSMUJ7zchdqWKT+pAhJys/ AMVqst5k6W6drMMCAwEAAaAXMBUGCSqGSIb3DQEJBzEIDAYyMzU3MTEwDQYJKoZI hvcNAQEFBQADggEBAKUXW1ykVUM+k3No1IriZtOA9Ez23k6+A/UQihnfdV1U9BMA TU7FXx4/EjQ8TdykxLuC10AYPZKYotXNGw3scCBWAirGYYs9Z1t8hrJAE4Ms6Ms9 v7sNcu+7fGrrJLGXlhbFZwNTfCPEUC+bECEYLfv5KHJr1o7CBbSx5J5NIXTgksul O0G+9YJ5wcbOlMrL1LXLuO8KSKC7pNw37c00EzuWA0DQKzlvPNnH6U8N2ZaxEdqB yVeg6nYg1vvQrDYHhrbMRcPjZqI/o6BvUuI1Eg48v0UJjvZ6qRR55b1kn9KnlSQ2 mwcBiq6wsOO5p4OyEQCQpOkiMwQVUG+D7jVzj8w= -----END CERTIFICATE REQUEST----- Файл можно открыть для просмотра любым текстовым редактором. Откройте файл, содержащий CSR-запрос и скопируйте всю информацию в буфер обмена операционной системы ("Ctrl + A" - выделить все, "Ctrl + C" - скопировать в буфер). На этом этап создания CSR-закончен. Можно переходить к следующему шагу Отправка CSR-запроса</div></td></tr></table><br><a name="DF6DDCC67BF9462D99E5806CDA2C367C"></a><table border="0" style="margin-left:4em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.1.3.3. Дальнейшие действия</div></td></tr><tr><td class="texttablecell"><div class="normalText"> После отправки запроса вам придет запрос от компании RU-CENTER на предоставление дополнительных документов с инструкцией. По запросу предоставьте все необходимые материалы, собранные ранее на этапе предварительной подготовки. После получения ваших документов, специалист компании RU-CENTER, направит запрос с вашими данными в центр сертификации THAWTE. Производитель SSL-сертификатов производит обязательную проверку корректности CSR и предоставленных документов, а также осуществляет контрольный звонок в организацию, получающую сертификат. Обычно эта процедура занимает от 3 до 10 рабочих дней, в зависимости от типа заказанного сертификата. Если домен, на который оформляется сертификат, не принадлежит организации-заказчику, от владельца домена понадобится письменное разрешение (шаблон будет предоставлен при необходимости). Ответственный сотрудник — лицо, с которым пытаются связаться при осуществлении контрольного звонка. Он должен быть в курсе того, что осуществлен заказ SSL-сертификата, а также знать название компании, указанное в запросе на сертификат, и домен, на который сделан заказ. Сертификат выпускается, как правило, в течение трех суток после завершения процедуры проверки данных. После выпуска сертификат будет доступен для загрузки в вашем личном кабинете. Для того чтобы получить SSL-сертификат необходимо в личном кабинете перейти "Услуги - SSL-сертификаты". В выведенном списке выберите ссылку получить сертификат. Откроется страница для скачивания SSL-сертификата. Также, для дальнейшей работы потребуется корневой сертификат центра сертификации. В нашем случае - это сертификат компании Thawte. Скачать его можно на сайте Thawte . На открывшейся странице выделите весь текст, скопируйте его в блокнот и сохраните на жестком диске под именем SSL_CA_Bundle.pem . </div></td></tr></table><br><a name="16A82093EA344C7CAC9E0575432AAD0B"></a><table border="0" style="margin-left:2em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.2. Решение проблем</div></td></tr><tr><td class="texttablecell"><div class="normalText"></div></td></tr></table><br><a name="675AEBA3FCBA4229ACF330F78C407ACF"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.2.1. Проблема доставки запросов от клиента к серверу</div></td></tr><tr><td class="texttablecell"><div class="normalText">Описание проблемы:На клиенте - проходит авторизация, проходит получение данных дерева каталогов и гридов. При этом не проходят запросы на совершение действий и не проходят запросы после задания условий отбора.  На сервере  - В отладочном мониторе появляются сообщения "Socket became inactive in first line" или "Bad first line". Причины проблемы: Проблема связана с особенностями провайдера клиента.  У провайдера установлено ограничение на длину любого http-запроса, либо POST-запроса в 1KB или немногим более. Обычно проблема проявляется при использовании Microsoft (ISA) Internet Security and Acceleration Server на маршрутизаторе локальной сети. Для диагностики такой ситуации можно использовать командный  Сценарий проверки провайдера, размещенный также по адресу http://techmill.ru/public/testme.bat . Сценарий покажет, что отказ происходит именно при отправке запроса, размер которого превышает 1 КВ. Запуск файла производится из окружения интерпретатора командной строки Windows (cmd.exe) Решение проблемы лежит не в области функциональности программного продукта, а в области его эксплуатации, конкретнее - в области организации взаимодействия между web-сервером и клиентскими рабочими местами пользователей. Проблема должна решаться специалистами, отвечающими за сопровождение программного продукта у тех клиентов, у которых имеет место описанное выше ограничение. Пути решения проблемы: 1. Обратиться к провайдеру с просьбой о снятии ограничения на размер запросов. 2. Использовать нестандартный TCP/IP порт, договорившись с провайдером о его открытии с серверной и клиентской стороны. Данный путь не гарантирует решения проблемы, но может помочь. В данном случае "провайдером" может выступать как администратор локальной сети организации, так и ISP (интернет-провайдер), в зависимости от того, как организовано подключение конечного пользователя. 3. Использовать протокол https. В этом случае провайдер не сможет анализировать содержимое обмена и, следовательно, не сможет применять ограничения. Для использования протокола https необходимо иметь сертификат, а также внести изменения в настройки web-сервера. Первые два пути могут способствовать быстрому решению проблемы. При этом стратегически правильным является путь 3 - использование протокола https. Взаимодействие по протоколу https может быть организовано с использованием сертификатов двух видов: 1) Сертификат, выдаваемый уполномоченными организациями ("настоящий" сертификат). Инструкция по получению "настоящего" сертификата включена в данное руководство, а также доступна по адресу: http://app.techmill.ru/paruspub/current/documentation/ED01679A80A74E999952269A89D95D36.html  2) Самостоятельно сгенерированный сертификат. Инструкция по генерации такого сертификата приведена Здесь. При использовании самостоятельно сгенерированного сертификата браузер пользователя будет выдавать предупреждение о сомнении в его достоверности. О том как избежать отображения такого предупреждения также написано Здесь. Действия по установке настроек web-сервера для работы по протоколу https описаны Здесь. </div></td></tr></table><br><a name="C38D2B4933414776AF09FF300FAFD345"></a><table border="0" style="margin-left:4em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.2.1.1. Сценарий проверки провайдера</div></td></tr><tr><td class="texttablecell"><div class="normalText">Содержимое файла сценария проверки провайлера Testme.bat @echo off IF "%1"=="" GOTO NOHOST echo Checking connection... AppServerFetch download %TEMP%\1.bin from http://%1/ &gt;nul IF NOT %ERRORLEVEL%==0 GOTO ERROR echo passed. echo Checking DataMill Application Server.... AppServerFetch download %TEMP%\1.bin from http://%1/.system/session.xml &gt;nul IF NOT %ERRORLEVEL%==0 GOTO ERROR echo passed. echo Checking long GET.... AppServerFetch download %TEMP%\1.bin from http://%1/.system/session.xml?data=0123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 0123456789012345678901234567890123456789012345678901234567890123456789^ 01234567890 &gt; nul IF NOT %ERRORLEVEL%==0 GOTO ERROR echo passed. echo Checking POST.... echo 01234567890 &gt; %TEMP%\2.bin AppServerFetch download %TEMP%\1.bin from http://%1/.system/session.xml sending %TEMP%\2.bin &gt;nul IF NOT %ERRORLEVEL%==0 GOTO ERROR echo passed. echo Checking long POST.... for /L %%i in (1,1,100) DO echo 01234567890 &gt;&gt; %TEMP%\2.bin AppServerFetch download %TEMP%\1.bin from http://%1/.system/session.xml sending %TEMP%\2.bin &gt;nul IF NOT %ERRORLEVEL%==0 GOTO ERROR echo passed. exit /B 0 :ERROR echo Failed. exit /B 1 :NOHOST echo Host not given. exit /B 2 </div></td></tr></table><br><a name="5479F57290E542A694465AD2DF9BEC63"></a><table border="0" style="margin-left:4em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.2.1.2. Самостоятельная генерация сертификата</div></td></tr><tr><td class="texttablecell"><div class="normalText"> Скачиваем инсталлятор openssl с сайта openssl.org (для Windows). Устанавливаем openssl, если при установке openssl на Windows он потребует Microsoft Redistributables Package, то предварительно, скачиваем и устанавливаем соответствующий пакет.   Например, на данный момент доступна версия openssl v1.0.1c и соответствующий ему Visual C++ 2008 Redistributables (x86/x64) по следующим ссылкам: openssl  и Redistributables После установки openssl запускаем командную строку cmd и выполняем следующие команды, предварительно перейдя в каталог bin установленного openssl (по умолчанию c:\OpenSSL-Win32\bin): Указываем путь к конфигурации openssl: set OPENSSL_CONF=C:\OpenSSL-Win32\bin\openssl.cfg ; Генерируем приватный ключ (в процессе генерации приватного ключа необходимо задать пароль): openssl genrsa -des3 -out c:\certificate\private.key 2048 ; Генерируем запрос на сертификат: openssl req -new -key c:\certificate\private.key -out c:\certificate\csr.csr В процессе генерации запроса будут запрошены параметры для сертификата, которые необходимо вводить в латинской раскладке. Достаточными являются: - Country Name (2 letter code) [AU] - страна регистрации организации, для которой готовим сертификат (для Росcии - RU) - State or Province Name (full name) [Some-State] - область, регион регистрации организации (Москва - Moscow) - Locality Name (eg, city) [] - город регистрации организации (Москва - Moscow) - Organization Name (eg, company) [Internet Widgits Pty Ltd] - наименование организации - Common Name (e.g. server FQDN or YOUR name) [] - доменное имя, для которого генерируется сертификат (в данном случае может не совпадать с действительным доменным именем) (localhost, companyname.com) Генерируем сам сертификат сроком на 365 дней (можно больше или меньше): openssl x509 -req -days 365 -in c:\certificate\csr.csr -signkey c:\certificate\private.key -out c:\certificate\certificate.pem В результате в каталоге c:\certificate будет создан приватный ключ (private.key) и сертификат (certificate.pem), который, в случае самостоятельно генерируемого сертификата, будет являться и сертификатом центра сертификации. Для того чтобы браузер не выдавал предупреждения по поводу недостоверности сертификата, можно установить сертификат (certificate.pem) в систему (предварительно поменяв его расширение на.crt) или в браузер, если он использует собственное хранилище сертификатов.  </div></td></tr></table><br><a name="7CB2B343CE854E20AD2CC3EA5BC6F8B8"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.2.2. Клиент не может авторизоваться в системе</div></td></tr><tr><td class="texttablecell"><div class="normalText">Описание проблемы:На клиенте - ошибка " 403 Forbidden " при попытке входа в систему. На сервере  - наблюдается неконтролируемый рост числа сессий с одного ip-адреса. Причины проблемы: Удаленные клиенты идентифицируются сервером при помощи ip-адреса и "идентификатора сессии", который поддерживается посредством механизма cookies. Механизм cookies используется следующим образом: - при первом обращении клиента к серверу, сервер генерирует идентификатор cookie (GUID) и передает его вместе с ответом клиенту; при этом каждая cookie имеет свое время жизни; время жизни задается сервером как момент времени, в который cookie будет уничтожена. Этот момент (в будущем) определяется настройкой "время жизни сессии". В соответствии с требованием стандарта для единства операций со временем (сервер и клиент могут находиться в разных часовых поясах) время указывается по Гринвичу (GMT); - клиент, получив cookie, прикрепляет ее к каждому своему дальнейшему запросу, до тех пор, пока ее время жизни не истечет; когда время жизни истекает, сервер получает запрос без cookie и выдает ошибку авторизации; - для сравнения своего текущего времени со временем на Гринвиче и сервер и клиент используют информацию о своем системном времени и своем часовом поясе. При неверной установке системного времени и/или часового пояса на сервере или на клиенте, возникнет рассинхронизация, и клиент может ошибочно считать время жизни cookie истекшим. Также очевидно, что решение проблемы лежит не в области функциональности программного продукта, а в области его эксплуатации, конкретнее - решение заключается в настройке web-сервера и рабочих мест удаленных пользователей. Проблема должна решаться специалистами, отвечающими за сопровождение программного продукта у тех клиентов, у которых имеет место описанная проблема. Пути решения проблемы: Корректно установить время и часовой пояс в системных настройках web-сервера. Для применения новых значений достаточно выполнить перезапуск сервиса DataMill Application Server.  Если, после коррекции системного времени и часового пояса сервера (или если изначально они были установлены правильно), от удаленных пользователей продолжают поступать сообщения об ошибках авторизации, рекомендовать удаленным пользователям корректно выставить системное время и часовой пояс на своей локальной машине. Для применения новых значений пользователю достаточно презапустить свой браузер. Установить значение параметра "время жизни сессии" в значение, существенно превосходящее один час (например, два часа), поскольку из-за ошибочных установок перехода на летнее время время клиента может расходиться с реальным на час. Это несколько увеличит нагрузку на сервер, однако позволит таким клиентам нормально работать. Следует принимать во внимание, что после отмены перехода на зимнее время часовым поясом для Москвы стал часовой пояс GMT+4. </div></td></tr></table><br><a name="44CBC4762FDA47C78325D90CB31BA875"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.2.3. Получение ответов «403 Forbidden» при некоторых действиях после успешной авторизации</div></td></tr><tr><td class="texttablecell"><div class="normalText">Описание проблемы:На клиенте - после успешной авторизации на некоторые запросы возвращается ошибка "403 Forbidden". На сервере  - несколько запросов в рамках одной сессии приходят с одинакового ip-адреса, далее идут несколько запросов с разных ip-адресовв рамках той же сессии. После этого запросы снова идут с первого ip-адреса. Причины проблемы: Ошибка происходит в момент смены видимого ip-адреса (запрос приходит на сервер не с того ip-адреса, с которого выполнялась авторизация). Иными словами, имеется проблема нестабильности ip-адреса в рамках одной пользовательской сессии. Удаленные клиенты идентифицируются сервером при помощи ip-адреса и "идентификатора сессии", который поддерживается посредством механизма cookies. Использование ip-адреса в дополнение к cookies обусловлено следующими факторами: Обеспечение требуемого уровня безопасности.   cookie представляет собой глобально уникальный идентификатор (GUID), генерируемый сервером при первом обращении каждого из клиентов. При этом Microsoft официально утверждает, что вероятность повтора генерируемого GUID крайне мала, но не равна нулю. В связи с этим было принято решение дополнять идентификацию сессии по cookie контролем ip-адреса; не исключена возможность "перехвата" cookie на любом из узлов маршрутизации любого уровня запроса удаленного пользователя; при снятии контроля ip-адреса будет открыта возможность делать запросы с перехваченной cookie с других ip-адресов, не зная логина и пароля пользователя (и получать на эти адреса ответы). Перспектива контроля числа лицензий пользователя, определяемого через число активных подключений, определяемых по ip-адресам. Пути решения проблемы: Попытаться решить проблему стабильности ip-адреса посредством взаимодействия с администратором сети или провайдером удаленного пользователя.  Внести изменения в систему идентификации сессий, отказавшись от контроля ip-адреса. Этот путь имеет существенные недостатки, связанные со снижением уровня безопасности и теоретической невозможностью контроля web-сервером числа лицензий пользователей. </div></td></tr></table><br><a name="D559286A13E14DF6B2530337DD6628EA"></a><table border="0" style="margin-left:3em;" class="texttable"><tr><td class="texttablecell"><div class="documentHeader">5.2.4. Неустойчивый внешний канал</div></td></tr><tr><td class="texttablecell"><div class="normalText">Вопрос: - Не отображаются активные сессии в "Настройке сервиса" (используется протокол HTTP) - Наблюдается очень медленная работа веб-сервиса. Например, на авторизацию и открытие списка очетов уходит до 10 минут. При этом запросов от BalanceOnline активных в базе нет и ресурсы веб-сервера не загружены. Ответ: Причиной описанных проблем является неустойчивый внешний канал связи. Для решения необходимо предпринять следующие шаги: 1. Включить сжатие трафика (в настройках Сервиса) 2. Снять галку "повторно использовать сессии" (в настройках Сервиса)  3. Если предыдущие шаги не помогли, то вручную добавить в config-файл в узел ‹object ID="HTTPListener"› или ‹object ID="HTTPSListener"› узел ‹param name="ThreadCount" value="32"/›. Если клиентов ожидается больше 300 (на неусточивом канале), то задать значение ‹param name="ThreadCount" value="48"/›, или даже ‹param name="ThreadCount" value="64"/› . Ставить большее значение не имеет смысла,  в этом случае необходимо расширять внешний канал. </div></td></tr></table><br></body></html>
