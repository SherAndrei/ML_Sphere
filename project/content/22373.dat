hms.lostcut.net/viewtopic.php?id=140
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="oldie ie6" lang="ru" dir="ltr"> <![endif]-->
<!--[if IE 7 ]>    <html class="oldie ie7" lang="ru" dir="ltr"> <![endif]-->
<!--[if IE 8 ]>    <html class="oldie ie8" lang="ru" dir="ltr"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="ru" dir="ltr"> <!--<![endif]-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=600" />
<link rel="shortcut icon" href="favicon.ico"/>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" sizes="72x72" href="favicons/72px-hms.png">
<link rel="apple-touch-icon" sizes="144x144" href="favicons/144px-hms.png">
<link rel="apple-touch-icon" sizes="192x192" href="favicons/192px-forum.png">
<meta name="msapplication-TileColor" content="#35a1cc">
<meta name="msapplication-TileImage" content="favicons/144px-hms.png">
<meta name="msapplication-config" content="browserconfig.xml">
<meta name="description" content="Скрипт получения ссылок на ресурс (Страница 1) &mdash; Coding &mdash; Неофициальный форум DLNA Home Media Server &mdash; " />
<title>Скрипт получения ссылок на ресурс (Страница 1) &mdash; Coding &mdash; Неофициальный форум DLNA Home Media Server</title>
<link rel="alternate" type="application/rss+xml" href="https://hms.lostcut.net/extern.php?action=feed&amp;tid=140&amp;type=rss" title="RSS" />
<link rel="alternate" type="application/atom+xml" href="https://hms.lostcut.net/extern.php?action=feed&amp;tid=140&amp;type=atom" title="ATOM" />
<link rel="search" href="https://hms.lostcut.net/search.php" title="Поиск" />
<link rel="author" href="https://hms.lostcut.net/userlist.php" title="Пользователи" />
<link rel="stylesheet" type="text/css" media="screen" href="https://hms.lostcut.net/style/Oxygen/Oxygen.css" />
<link rel="stylesheet" type="text/css" media="screen" href="https://hms.lostcut.net/extensions/pun_bbcode/css/Oxygen/pun_bbcode.min.css" />
<link rel="stylesheet" type="text/css" media="all" href="https://hms.lostcut.net/extensions/nya_thanks/css/style.css" />
<link rel="stylesheet" type="text/css" media="all" href="https://hms.lostcut.net/extensions/pun_attachment/css/Oxygen/pun_attachment.min.css" />
<link rel="stylesheet" type="text/css" media="screen" href="https://hms.lostcut.net/extensions/fancy_jquery_addons/css/Oxygen/fancy_jquery_addons.min.css" />
<link rel="stylesheet" type="text/css" media="screen" href="https://hms.lostcut.net/extensions/fancy_stop_spam/css/Oxygen/fancy_stop_spam.css" />
<link rel="stylesheet" type="text/css" media="all" href="https://hms.lostcut.net/extensions/fancy_spellcheck/css/Oxygen/fancy_spellcheck.min.css" />
<style>#pun_bbcode_bar #pun_bbcode_button_fancy_video.image{background:url("https://hms.lostcut.net/extensions/fancy_video_tag/css/Oxygen/img/video.png") 50% 50% no-repeat}</style>
<style>#pun_bbcode_bar #pun_bbcode_button_smiles.image{background:url("https://hms.lostcut.net/extensions/k_smiles/css/Oxygen/img/smiles.png")  50% 50% no-repeat;}div#pun_bbcode_smilies{display:none;width:500px;}#pun_bbcode_smilies {background: none repeat scroll 0 0 #FFFFFF;border-radius: 5px;box-shadow: 0 1px 5px rgba(0, 0, 0, 0.32);overflow: hidden;position: absolute;z-index: 1000;left: 25%;margin-top: 5px;}</style>
<style>#pun_bbcode_bar #pun_bbcode_button_fancy_spoiler.image{background:url("https://hms.lostcut.net/extensions/fancy_spoiler/css/Oxygen/img/spoiler.png") 50% 50% no-repeat}.fancy_spoiler_switcher{border:solid 1px #eee!important;background:#fff;padding:.5em .75em;margin:.5em 0}.fancy_spoiler_switcher_header{color:#FF6144
;cursor:pointer;-moz-user-select:none;-webkit-user-select:none;user-select:none}.fancy_spoiler{margin-top:.7em!important;padding-top:.7em!important;color:#333;border-top:dashed 1px #eee!important}</style>
<style>.entry-content div.fancy_video_tag_player { max-width: 60em !important; overflow: none !important; }</style>
<style>#whfrmlogin form{text-align:center}#whfrmsearch input[type="submit"]{background: url('/img/find.png');width:34px;height:23px;background-repeat:no-repeat;background-size:contain;background-position:center;margin-left:4px;vertical-align:middle;margin-top:-2px}#whfrmsearch{position:absolute;padding:.2em .6em}</style>
<style>.shl{background:#E9FE7B}</style>
<style>.fancy_spoiler{display:none;padding:.35em 0}</style>
<noscript><style>.fancy_spoiler{display:block;padding:0.35em 0;border:none !important;margin:0 !important}.fancy_spoiler_switcher{border:none !important;background: inherit !important;margin:0 !important;padding:0}.fancy_spoiler_switcher_header{display:none}</style></noscript>
<style>.gist{padding:1em 0.75em}</style>
<style>#pun_bbcode_bar #pun_bbcode_button_wh_markdown.image{background:url(./extensions/wh_markdown/md.png) 50% 50% no-repeat}.post-entry .md_spoiler_switcher{background:#fff}.md_spoiler_switcher{border:solid 1px #eee!important;# border-radius:.3em;padding:1px 4px;# margin:.1em 1em}.md_spoiler_header strong{width:10px;display:inline-block}.md_spoiler_header{cursor:pointer;-moz-user-select:none;-webkit-user-select:none;user-select:none;color:#FF6144;position:relative}.md_spoiler{display:none}.wh_markdown{margin-top:.7em !important;padding-top:.7em !important;color:#333;border-top:dashed 1px #EEEEEE !important}@font-face{font-family:octicons-anchor;src:url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAYcAA0AAAAACjQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAABMAAAABwAAAAca8vGTk9TLzIAAAFMAAAARAAAAFZG1VHVY21hcAAAAZAAAAA+AAABQgAP9AdjdnQgAAAB0AAAAAQAAAAEACICiGdhc3AAAAHUAAAACAAAAAj//wADZ2x5ZgAAAdwAAADRAAABEKyikaNoZWFkAAACsAAAAC0AAAA2AtXoA2hoZWEAAALgAAAAHAAAACQHngNFaG10eAAAAvwAAAAQAAAAEAwAACJsb2NhAAADDAAAAAoAAAAKALIAVG1heHAAAAMYAAAAHwAAACABEAB2bmFtZQAAAzgAAALBAAAFu3I9x/Nwb3N0AAAF/AAAAB0AAAAvaoFvbwAAAAEAAAAAzBdyYwAAAADP2IQvAAAAAM/bz7t4nGNgZGFgnMDAysDB1Ml0hoGBoR9CM75mMGLkYGBgYmBlZsAKAtJcUxgcPsR8iGF2+O/AEMPsznAYKMwIkgMA5REMOXicY2BgYGaAYBkGRgYQsAHyGMF8FgYFIM0ChED+h5j//yEk/3KoSgZGNgYYk4GRCUgwMaACRoZhDwCs7QgGAAAAIgKIAAAAAf//AAJ4nHWMMQrCQBBF/0zWrCCIKUQsTDCL2EXMohYGSSmorScInsRGL2DOYJe0Ntp7BK+gJ1BxF1stZvjz/v8DRghQzEc4kIgKwiAppcA9LtzKLSkdNhKFY3HF4lK69ExKslx7Xa+vPRVS43G98vG1DnkDMIBUgFN0MDXflU8tbaZOUkXUH0+U27RoRpOIyCKjbMCVejwypzJJG4jIwb43rfl6wbwanocrJm9XFYfskuVC5K/TPyczNU7b84CXcbxks1Un6H6tLH9vf2LRnn8Ax7A5WQAAAHicY2BkYGAA4teL1+yI57f5ysDNwgAC529f0kOmWRiYVgEpDgYmEA8AUzEKsQAAAHicY2BkYGB2+O/AEMPCAAJAkpEBFbAAADgKAe0EAAAiAAAAAAQAAAAEAAAAAAAAKgAqACoAiAAAeJxjYGRgYGBhsGFgYgABEMkFhAwM/xn0QAIAD6YBhwB4nI1Ty07cMBS9QwKlQapQW3VXySvEqDCZGbGaHULiIQ1FKgjWMxknMfLEke2A+IJu+wntrt/QbVf9gG75jK577Lg8K1qQPCfnnnt8fX1NRC/pmjrk/zprC+8D7tBy9DHgBXoWfQ44Av8t4Bj4Z8CLtBL9CniJluPXASf0Lm4CXqFX8Q84dOLnMB17N4c7tBo1AS/Qi+hTwBH4rwHHwN8DXqQ30XXAS7QaLwSc0Gn8NuAVWou/gFmnjLrEaEh9GmDdDGgL3B4JsrRPDU2hTOiMSuJUIdKQQayiAth69r6akSSFqIJuA19TrzCIaY8sIoxyrNIrL//pw7A2iMygkX5vDj+G+kuoLdX4GlGK/8Lnlz6/h9MpmoO9rafrz7ILXEHHaAx95s9lsI7AHNMBWEZHULnfAXwG9/ZqdzLI08iuwRloXE8kfhXYAvE23+23DU3t626rbs8/8adv+9DWknsHp3E17oCf+Z48rvEQNZ78paYM38qfk3v/u3l3u3GXN2Dmvmvpf1Srwk3pB/VSsp512bA/GG5i2WJ7wu430yQ5K3nFGiOqgtmSB5pJVSizwaacmUZzZhXLlZTq8qGGFY2YcSkqbth6aW1tRmlaCFs2016m5qn36SbJrqosG4uMV4aP2PHBmB3tjtmgN2izkGQyLWprekbIntJFing32a5rKWCN/SdSoga45EJykyQ7asZvHQ8PTm6cslIpwyeyjbVltNikc2HTR7YKh9LBl9DADC0U/jLcBZDKrMhUBfQBvXRzLtFtjU9eNHKin0x5InTqb8lNpfKv1s1xHzTXRqgKzek/mb7nB8RZTCDhGEX3kK/8Q75AmUM/eLkfA+0Hi908Kx4eNsMgudg5GLdRD7a84npi+YxNr5i5KIbW5izXas7cHXIMAau1OueZhfj+cOcP3P8MNIWLyYOBuxL6DRylJ4cAAAB4nGNgYoAALjDJyIAOWMCiTIxMLDmZedkABtIBygAAAA==) format('woff')}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#333;overflow:hidden;font-family:"Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;font-size:14px;line-height:1.6;word-wrap:break-word}.markdown-body a{background:transparent}.markdown-body a:active,.markdown-body a:hover{outline:0}.markdown-body strong{font-weight:bold}.markdown-body h1{font-size:2em;margin:0.67em 0}.markdown-body img{border:0}.markdown-body hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace, monospace;font-size:1em}.markdown-body input{color:inherit;font:inherit;margin:0}.markdown-body html input[disabled]{cursor:default}.markdown-body input{line-height:normal}.markdown-body input[type="checkbox"]{-moz-box-sizing:border-box;box-sizing:border-box;padding:0}.markdown-body table{border-collapse:collapse;border-spacing:0}.markdown-body td,.markdown-body th{padding:0}.markdown-body *{-moz-box-sizing:border-box;box-sizing:border-box}.markdown-body input{font:13px/1.4 Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"}.markdown-body a{color:#4183c4;text-decoration:none}.markdown-body a:hover,.markdown-body a:focus,.markdown-body a:active{text-decoration:underline}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border:0;border-bottom:1px solid #ddd}.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{display:table;clear:both;content:""}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:10px;margin-bottom:0px;font-weight:300;line-height:1.1}.markdown-body h1{font-size:30px;color:#333}.markdown-body h2{font-size:21px;color:#666}.markdown-body h3{font-size:16px;color:#325d72;margin:1.5em 0 1em;border-bottom:1px solid #ddd}.markdown-body h4{font-size:14px}.markdown-body h5{font-size:12px}.markdown-body h6{font-size:11px}.markdown-body blockquote{margin:0}.markdown-body ul,.markdown-body ol{padding:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ul ul ol,.markdown-body ul ol ol,.markdown-body ol ul ol,.markdown-body ol ol ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code{font:12px Consolas, "Liberation Mono", Menlo, Courier, monospace}.markdown-body pre{margin-top:0;margin-bottom:0;font:12px Consolas, "Liberation Mono", Menlo, Courier, monospace}.markdown-body .octicon{font:normal normal 16px octicons-anchor;line-height:1;display:inline-block;text-decoration:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .octicon-link:before{content:'\f05c'}.markdown-body>*:first-child{margin-top:0 !important}.markdown-body .anchor{position:absolute;left:97%}.markdown-body .anchor:focus{outline:none}.markdown-body .anchor:focus{}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:1em;margin-bottom:16px;font-weight:bold;line-height:1.4}.markdown-body .octicon-link{display:none;color:#000;vertical-align:middle}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link,.markdown-body div.md_spoiler_header:hover .anchor .octicon-link{display:inline-block}.markdown-body h1{padding-bottom:0.3em;font-size:2.25em;line-height:1.2}.markdown-body h2{padding-bottom:0.3em;font-size:1.75em;line-height:1.225;border-bottom:1px solid #eee}.markdown-body h3{font-size:1.5em;line-height:1.43}.markdown-body h4{font-size:1.25em}.markdown-body h5{font-size:1em}.markdown-body h6{font-size:1em;color:#777}.markdown-body p,.markdown-body blockquote,.markdown-body ul,.markdown-body ol,.markdown-body dl,.markdown-body table,.markdown-body pre{margin-top:0;margin-bottom:16px}.markdown-body hr{height:4px;padding:0;margin:16px 0;background-color:#e7e7e7;border:0 none}.markdown-body ul,.markdown-body ol{padding-left:2em}.markdown-body ul ul,.markdown-body ul ol,.markdown-body ol ol,.markdown-body ol ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body blockquote{padding:0 15px;color:#777;border-left:4px solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:bold}.markdown-body table th,.markdown-body table td{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;-moz-box-sizing:border-box;box-sizing:border-box}.markdown-body code{padding:0;padding-top:0.2em;padding-bottom:0.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,0.04);border-radius:3px}.markdown-body code:before,.markdown-body code:after{letter-spacing:-0.2em;content:"\00a0"}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body pre{word-wrap:normal;width:99%}.markdown-body pre code{display:inline;max-width:initial;padding:.4em;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:before,.markdown-body pre code:after{letter-spacing:0;content:normal}.markdown-body .pl-c{color:#969896}.markdown-body .pl-c1,.markdown-body .pl-mdh,.markdown-body .pl-mm,.markdown-body .pl-mp,.markdown-body .pl-mr,.markdown-body .pl-s1 .pl-v,.markdown-body .pl-s3,.markdown-body .pl-sc,.markdown-body .pl-sv{color:#0086b3}.markdown-body .pl-e,.markdown-body .pl-en{color:#795da3}.markdown-body .pl-s1 .pl-s2,.markdown-body .pl-smi,.markdown-body .pl-smp,.markdown-body .pl-stj,.markdown-body .pl-vo,.markdown-body .pl-vpf{color:#333}.markdown-body .pl-ent{color:#63a35c}.markdown-body .pl-k,.markdown-body .pl-s,.markdown-body .pl-st{color:#a71d5d}.markdown-body .pl-pds,.markdown-body .pl-s1,.markdown-body .pl-s1 .pl-pse .pl-s2,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre,.markdown-body .pl-src,.markdown-body .pl-v{color:#df5000}.markdown-body .pl-id{color:#b52a1d}.markdown-body .pl-ii{background-color:#b52a1d;color:#f8f8f8}.markdown-body .pl-sr .pl-cce{color:#63a35c;font-weight:bold}.markdown-body .pl-ml{color:#693a17}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{color:#1d3e81;font-weight:bold}.markdown-body .pl-mq{color:#008080}.markdown-body .pl-mi{color:#333;font-style:italic}.markdown-body .pl-mb{color:#333;font-weight:bold}.markdown-body .pl-md,.markdown-body .pl-mdhf{background-color:#ffecec;color:#bd2c00}.markdown-body .pl-mdht,.markdown-body .pl-mi1{background-color:#eaffea;color:#55a532}.markdown-body .pl-mdr{color:#795da3;font-weight:bold}.markdown-body .pl-mo{color:#1d3e81}.markdown-body kbd{background-color:#e7e7e7;background-image:-webkit-linear-gradient(#fefefe, #e7e7e7);background-image:linear-gradient(#fefefe, #e7e7e7);background-repeat:repeat-x;display:inline-block;padding:3px 5px;font:11px Consolas, "Liberation Mono", Menlo, Courier, monospace;line-height:10px;color:#000;border:1px solid #cfcfcf;border-radius:2px}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{float:left;margin:0.3em 0 0.25em -1.6em;vertical-align:middle}.markdown-body :checked+.radio-label{z-index:1;position:relative;border-color:#4183c4}</style>
<link rel="stylesheet" type="text/css" media="all" href="https://hms.lostcut.net/extensions/wh_codehighlight/css/Oxygen/wh_codehighlight.min.css" />

<link href='https://fonts.googleapis.com/css?family=Exo+2:500' rel='stylesheet' type='text/css'>
</head>
<body>
	<div id="brd-messages" class="brd"></div>

	<div id="brd-head" class="gen-content">
		<IDXSKIP><p id="brd-title"><a href="https://hms.lostcut.net/index.php">Неофициальный форум DLNA Home Media Server</a></p></IDXSKIP>
		
	</div>
	<div id="brd-wrap" class="brd">
	<div id="brd-viewtopic" class="brd-page paged-page">
	<div class="nav">
		<ul>
		<IDXSKIP><li id="navindex" class="cl-effect-16"><a href="https://hms.lostcut.net/index.php" data-hover="Форум">Форум</a></li></IDXSKIP>
		
		<IDXSKIP><li id="navsearch" class="cl-effect-16"><a href="https://hms.lostcut.net/search.php" data-hover="Поиск">Поиск</a></li></IDXSKIP>
		<IDXSKIP><li id="navregister" class="cl-effect-16"><a href="https://hms.lostcut.net/register.php" data-hover="Регистрация">Регистрация</a></li></IDXSKIP>
		<IDXSKIP><li id="navlogin" class="cl-effect-16"><a href="https://hms.lostcut.net/login.php" data-hover="Вход">Вход</a></li></IDXSKIP>
		<IDXSKIP><li id="navextra1" class="cl-effect-16"><a href="/viewtopic.php?id=27" style="color:#EC683B;font-weight:bold" data-hover="&nbsp;&nbsp;FAQ&nbsp;&nbsp;&nbsp;">&nbsp;&nbsp;FAQ&nbsp;&nbsp;&nbsp;</a></li></IDXSKIP>
		<IDXSKIP><li id="navextra2" class="cl-effect-16"><a href="/help.php?section=rules" style="color:#E55625;font-weight:bold" data-hover="Правила">Правила</a></li></IDXSKIP>
	</ul>
		
	</div>
	<div id="whtopline"><div id="whfrmsearch" class="whtopform"><form method="get" accept-charset="utf-8" action="https://hms.lostcut.net/search.php">
<div class="hidden">
	<input type="hidden" name="action" value="search">
</div>
<input id="qsearch" type="text" name="keywords" size="20" maxlength="100" required="">
<input type="submit" name="search" value="">
</form></div><div id="whfrmlogin" class="whtopform"><form method="post" accept-charset="utf-8" action="https://hms.lostcut.net/login.php">
<div class="hidden">
	<input type="hidden" name="form_sent" value="1" />
	<input type="hidden" name="redirect_url" value="/viewtopic.php?id=140" />
	<input type="hidden" name="csrf_token" value="a9909706761bd9ce2fa14fcbf0e1576f21efcbab" />
</div>
<label for="fld1">Логин:</label>
<input class="qlogin" type="text" id="fld1" name="req_username" value="" size="10" maxlength="25" required spellcheck="false" />
<label for="fld2">Пароль:</label>
<input class="qlogin" type="password" id="fld2" name="req_password" value="" size="10" required />
<input type="submit" class="fld-input2" name="login" value="Войти" />
</form></div></div>
	<div id="brd-visit" class="gen-content">
		<IDXSKIP><p id="welcome"><span>Вы тут как гость.</span> <span></span></p></IDXSKIP>
		<IDXSKIP><p id="visit-links" class="options"><span id="visit-recent" class="first-item"><a href="https://hms.lostcut.net/search.php?action=show_recent" title="Найти темы с недавними сообщениями.">Активные темы</a></span> <span id="visit-unanswered"><a href="https://hms.lostcut.net/search.php?action=show_unanswered" title="Найти темы, на которые не было ответов.">Темы без ответов</a></span></p></IDXSKIP>
	</div>
	
	<IDXSKIP><div class="hr"><hr /></div></IDXSKIP>
	<div id="brd-main">
		<h1 class="main-title"><a class="permalink" href="https://hms.lostcut.net/viewtopic.php?id=140" rel="bookmark" title="Постоянная ссылка на эту тему">Скрипт получения ссылок на ресурс</a></h1>

		<div id="brd-crumbs-top" class="crumbs">
	<p><IDXSKIP><span class="crumb crumbfirst"><a href="https://hms.lostcut.net/index.php">Неофициальный форум DLNA Home Media Server</a></span></IDXSKIP> <span class="crumb"><IDXSKIP><span> &rarr;&nbsp;</span></IDXSKIP><IDXSKIP><a href="https://hms.lostcut.net/viewforum.php?id=7">Coding</a></IDXSKIP></span> <span class="crumb crumblast"><IDXSKIP><span> &rarr;&nbsp;</span></IDXSKIP>Скрипт получения ссылок на ресурс</span> </p>
</div>
		
		<div id="brd-pagepost-top" class="main-pagepost gen-content">
	<IDXSKIP><p class="paging"><span class="pages">Страницы</span> <strong class="first-item">1</strong></p></IDXSKIP>
	<p class="posting"><IDXSKIP>Чтобы отправить ответ, вы должны </IDXSKIP><IDXSKIP><a href="https://hms.lostcut.net/login.php">войти</a></IDXSKIP> <IDXSKIP>или <a href="https://hms.lostcut.net/register.php">зарегистрироваться</a></IDXSKIP></p>
</div>
		<div class="main-head">
		<p class="options"><span class="feed first-item"><a class="feed" href="https://hms.lostcut.net/extern.php?action=feed&amp;tid=140&amp;type=rss">RSS</a></span></p>
		<h2 class="hn"><span><span class="item-info">Сообщений: 23</span></span></h2>
	</div>
	<div id="forum7" class="main-content main-topic">
		<div class="post odd firstpost topicpost">
			<div id="p2872" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">1</span> <span class="post-byline"><span>Тема от </span><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2872#p2872">2016.01.07 01:07:36</a></span> <span class="post-edit">(2016.01.07 01:49:11 отредактировано tim128)</span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2872" class="entry-title hn">Тема: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Изучая подкаст Торрент ТВ (без транскода)(зеркало).hdf по причине вечных с ним проблем обратил внимание на то, что там используется Скрипт получения ссылок на ресурс.&nbsp; Не смог до конца разобраться по какому событию он вызывается, какие входные данные, что требуется на выходе. Как его отлаживать? По логике он должен запускаться при начале воспроизведения медиа-ресурса. Но похоже он вызывается и при открытии папок. Что самое странное, при начале воспроизведения медиа-ресурса он запускается несколько раз.<br />Для пробы решил переписать свой подкаст vipsop с использованием Скрипта получения ссылок на ресурс. В этом случае не придется полсотни раз дергать 1ttv.org при каждом обновлении подкаста. Да и обновлять подкаст по нескольку раз надень надобность отпадет. Вставил попутно вывод сообщений, чтобы видеть что происходит. Результат тот же. Скрипт при запуске воспроизведения запустился четыре раза. Почему, зачем?</p>
						<div class="attachments"><strong id="attach2872">Прикреплённые файлы сообщения</strong><p><a href="https://hms.lostcut.net/misc.php?action=pun_attachment&amp;item=466&amp;preview">Снимок.PNG</a>&nbsp;34.77 kb, скачивалось 189 раз, начиная с 2016.01.07</p></div><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p2873" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">2</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2873#p2873">2016.01.07 21:42:23</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<IDXSKIP><ul class="author-ident">
						<li class="useravatar"><img src="https://hms.lostcut.net/img/avatars/2.png" width="45" height="60" alt="WendyH" /></li>
						<li class="username"><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></li>
						<li class="usertitle"><span>Просто участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul></IDXSKIP>
					<ul class="author-info">
						<IDXSKIP><li><span>Откуда: <strong>Планета Земля</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Зарегистрирован: <strong>2015.01.09</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Сообщений: <strong>888</strong></span></li></IDXSKIP>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2873" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Скрипт получения ссылки на медиа-ресурс вызывается в случаях:<br />1) При заходе в папку обновляемого подкаста<br />2) При запуске ссылки на медиа-ресурс на воспроизведение<br />3) При получении свойств медиа файла</p><p>Срабатывание скрипта при заходе в папку нужно, например, если при обновлении подкаста были созданы только папки. А при заходе в папку вызывается скрипт, который теоретически, создаёт ссылки в этой папке.<br />Т.к. он же вызывается и при воспроизведении, то в скрипте, обычно, идёт проверка текущего элемента - не папка ли он. Если папка - создаём ссылки, если ссылка - получаем реальную ссылку на файл или поток (или формируем параметры) и заносим это значение в переменную MediaResourseLink.</p><p>Т.к. для получения свойств потока или файла нужна реальная ссылка на него, то также этот скрипт запускается. Считывание свойств может происходить в профиле транс кодирования и запускается командой HmsRetreaveProperties в скрипте профиля. Так что всё зависит также и от используемого профиля. И нужно смотреть его код.</p><p>Т.к. нет сейчас род рукой компа, не уверен в точности написания встроенных переменных и команд, пишу с телефона и по памяти.</p><p>Отлаживать так. Если хотим отладить выполнение при срабатывании при заходе в папку, встаем на эту папку и нажимаем Alt+4. Если хотим отладить получение ссылки при воспроизведении, встаем на ссылку и нажимаем Alt+4.<br />Чтобы отладить профиль, встаем на ссылку и идём в настройки, находим интересующий профиль транскодирования, открываем его код и начинаем отладку.</p><p>Ну, как-то так.</p><p>P.S.:<br />Скрипт вызывается только для пустых папок, в которых пока нет дочерних элементов. Поэтому будет вызываться не всегда при заходе в папку подкаста, а только при первом заходе.</p>
						<IDXSKIP><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32CX523</div></IDXSKIP>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd replypost">
			<div id="p2875" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">3</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2875#p2875">2016.01.07 22:22:51</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2875" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p><strong>WendyH,</strong> <br />Если я правильно вас понял, несколько вызовов скрипта при запуске воспроизведения получается из-за того, что плеер делает несколько запросов к серверу, например, для получения свойств медиа-ресурса, кроме собственно самого воспроизведения. Хотелось бы игнорировать такие &quot;левые&quot; запуски скрипта, зачем дергать сервер с контентом бестолку, да еще каждый раз авторизоваться - еще забанят... Как узнать по какой причине причине вызван скрипт и дергаться только на запуск воспроизведения?</p>
						<div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p2877" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">4</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2877#p2877">2016.01.07 22:59:25</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<IDXSKIP><ul class="author-ident">
						<li class="useravatar"><img src="https://hms.lostcut.net/img/avatars/2.png" width="45" height="60" alt="WendyH" /></li>
						<li class="username"><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></li>
						<li class="usertitle"><span>Просто участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul></IDXSKIP>
					<ul class="author-info">
						<IDXSKIP><li><span>Откуда: <strong>Планета Земля</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Зарегистрирован: <strong>2015.01.09</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Сообщений: <strong>888</strong></span></li></IDXSKIP>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2877" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Т.к. что-то типа стека вызовов нет, то и узнать откуда или по какому событию вызван скрипт не представляется возможным. По крайней мере, я не знаю как.<br />Поэтому сам выходил из положения только расставляя информационные сообщения в скриптах получения ссылки и транскодирования в разных местах.</p><p>Для исключения повторного вызова нужно ставить проверки. В профиле не вызывать HmsRetreaveProperties если есть информация о количестве дорожек (значит свойства уже считаны).<br />В коде скрипта получения ссылки я выходил тем, что заносил в свойства ссылки (в какой-нибудь свободный идентификатор, например PodcastItem[1001]) значение как флаг, говорящий что скрипт выполняется или выполнялся. В общем, похоже, выкручиваться придётся самостоятельно, на сколько фантазии хватит.</p>
						<IDXSKIP><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32CX523</div></IDXSKIP>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd replypost">
			<div id="p2880" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">5</span> <span class="post-byline"><IDXSKIP><span>Ответ от </span></IDXSKIP><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2880#p2880">2016.01.09 00:58:57</a></span> <span class="post-edit">(2016.01.09 12:24:53 отредактировано tim128)</span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2880" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p><strong>WendyH,</strong><br />Трюк с флагом имеет смысл когда знаешь, что первый вызов тот что нужен, а остальные надо игнорировать. А так как нет информации о том какой вызов для чего выполнен, непонятно и какой из них надо выполнить, а какие пропустить. К примеру, у меня не работает сейчас Торрент ТВ (без транскода)(зеркало).hdf. После выбора на плеере канала, скрипт вызывается четыре раза, все четыре раза авторизуется&nbsp; <img src="https://hms.lostcut.net/extensions/k_smiles/img/ab.gif" alt=":)" />, четыре раза грузит страницу канала, четыре раза загружает .acelive и четыре раза возвращает в MediaResourceLink строку такого вида:<br /></p><div class="codebox"><pre><code>cmd://&quot;C:\Users\Tim\AppData\Roaming\ACESTR~1\player\ACE_PL~1.EXE&quot;   --no-crashdump --play-and-exit --language en -Idummy --demuxdump-file=&quot;&lt;OUTPUT FILE&gt;&quot; vlc://pause:2 --access=p2p_access &quot;C:\Users\Tim\AppData\Local\Home Media Server\HMS\Temp\НТВ.acelive&quot; :demux=dump</code></pre></div><p>Если обрезать &quot;cmd://&quot; , подставить в &lt;OUTPUT FILE&gt; корректное имя файла, то сохранится вполне нормальный поток. Но в реальности запускаются четыре ace_player.exe, начинается загрузка в ace_engine, но три ace_player.exe быстро сами закрываются и загрузка тут же прекращается. Один ace_player.exe остается висеть в памяти, но ничего не качает. Плеер говорит, что воспроизвести ничего не может. А что вообще можно вернуть в MediaResourceLink? При выполнении скрипта на папках, я просто возвращаю туда пустую строку &quot;&quot; - правильно?</p>
						<div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p2890" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">6</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2890#p2890">2016.01.09 16:27:55</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<IDXSKIP><ul class="author-ident">
						<li class="useravatar"><img src="https://hms.lostcut.net/img/avatars/2.png" width="45" height="60" alt="WendyH" /></li>
						<li class="username"><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></li>
						<li class="usertitle"><span>Просто участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul></IDXSKIP>
					<ul class="author-info">
						<IDXSKIP><li><span>Откуда: <strong>Планета Земля</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Зарегистрирован: <strong>2015.01.09</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Сообщений: <strong>888</strong></span></li></IDXSKIP>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2890" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p><strong>tim128</strong>, попробовал у себя. У меня 2 раза запускается скрипт.<br />Вы же про <a href="https://hms.lostcut.net/viewtopic.php?pid=2615#p2615" target="_blank">вот этот</a> подкаст?<br />Там изначально стоит настройка в подкасте &quot;Оригинальный поток&quot;, у меня так телек не показывает, поэтому выставляю эту настройку в &quot;Транскодирование&quot;. Тогда при запуске фильма также запускается и профиль транскодирования, который указан в этой настройке подкаста или в настройках устройства для видео (или &quot;Фильмы (Основной)&quot; по-умолчанию).<br />У вас какой-нибудь профиль транскодирования выставлен? Если да, то какой?<br />Из-за того, что 3 из 4-х запусков прекращаются быстро, то мне кажется, что это запросы именно на чтение свойств потока.</p><p>Однако да, скрипт запускается несколько раз и с этим ничего не поделать.<br />Я думаю, нужно авторизовываться только по надобности. Авторизация там делается для получения куков.<br />Значит, нужно куки запоминать где-то. Загружать страницу канала всегда при любом запуске с запомненными куками. Если куки не установлены или протухли, то по содержанию страницы это определять (например, в тексте html искать присутствие login.php или отсутствие какой-нибудь ссылки на личный cabinet.php).<br />Если загруженная страница выглядит как для не авторизованного пользователя - авторизуемся и запоминаем значение кук.</p><p>Так мы избежим постоянного запроса на авторизацию, по которой да, кстати, нас могут вычислить. А запросы на страницу - не так страшны (по крайней мере, если их не более 2...4 за 1 минуту).</p><p>По вашей картинке в первом сообщении, у меня складывается впечатление, что запускается какой-то профиль транскодирования именно, а не &quot;Оригинальный поток&quot;. Если профиль не стандартный, может там в коде есть избыточные вызовы считывания свойств?</p>
						<IDXSKIP><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32CX523</div></IDXSKIP>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd replypost">
			<div id="p2891" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">7</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2891#p2891">2016.01.09 16:31:06</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<IDXSKIP><ul class="author-ident">
						<li class="useravatar"><img src="https://hms.lostcut.net/img/avatars/2.png" width="45" height="60" alt="WendyH" /></li>
						<li class="username"><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></li>
						<li class="usertitle"><span>Просто участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul></IDXSKIP>
					<ul class="author-info">
						<IDXSKIP><li><span>Откуда: <strong>Планета Земля</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Зарегистрирован: <strong>2015.01.09</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Сообщений: <strong>888</strong></span></li></IDXSKIP>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2891" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Или вообще, вынести авторизацию в &quot;Скрипт чтения списка ресурсов (Alt+2)&quot;!<br />Т.е., если хотим посмотреть чё-нть - обновляем список каналов перед этим. Опять же куки там где-то нужно запомнить. И их использовать в скрипте получения ссылки.</p>
						<IDXSKIP><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32CX523</div></IDXSKIP>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p2893" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">8</span> <span class="post-byline"><IDXSKIP><span>Ответ от </span></IDXSKIP><a title="Перейти в профиль пользователя Voland" href="https://hms.lostcut.net/profile.php?id=126">Voland</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2893#p2893">2016.01.09 17:09:00</a></span> <span class="post-edit">(2016.01.09 17:32:28 отредактировано Voland)</span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя Voland" href="https://hms.lostcut.net/profile.php?id=126">Voland</a></li>
						<li class="usertitle"><span>Активный участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.06.07</strong></span></li>
						<li><span>Сообщений: <strong>102</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2893" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p><strong>tim128</strong>, у вас какая версия HMS? Аналогичная ситуация была у меня на версиях до 2.03. В версии же 2.03 стало всё строго, один запрос-один ответ. И, депо тут похоже не в авторизации, так как в подкасте Тучка.ТВ было тоже самое.</p>
						<div class="sig-content"><span class="sig-line"><!-- --></span>LG 27MT75S-PZQ</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd replypost">
			<div id="p2898" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">9</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2898#p2898">2016.01.09 21:06:11</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2898" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<div class="quotebox"><cite>Voland:</cite><blockquote><p><strong>tim128</strong>, у вас какая версия HMS? Аналогичная ситуация была у меня на версиях до 2.03. В версии же 2.03 стало всё строго, один запрос-один ответ. И, депо тут похоже не в авторизации, так как в подкасте Тучка.ТВ было тоже самое.</p></blockquote></div><p>2.05</p><div class="quotebox"><IDXSKIP><cite>WendyH:</cite></IDXSKIP><blockquote><p>Вы же про вот этот подкаст?</p></blockquote></div><p>Да. Настроено на оригинальный поток. Транскодирование не запускается. Но, видимо, поскольку скрипт возвращает в MediaResourceLink строку, начинающуюся с &quot;cmd://&quot;,&nbsp; hms запускает консоль cmd и там запускается ace_player.exe, формирует поток, который и гонится на ТВ. Но это мое понимание происходящего, могу и ошибаться. Я тоже подумал, что hms закрывает те консоли, которые порождены командами, отличными от воспроизведения, остается одна консоль, и похоже в моем случае не та, что надо.</p><p>По поводу авторизации я тоже думал привести в порядок, но пока важнее разобраться с воспроизведением. Количество вызовов похоже зависит от плеера/телевизора, их порядок, наверное, тоже. То, что я описывал, происходит при вызове с ноутбука плеером kodi. Если на андроид-смартфоне из проги TV SideView запускать воспроизведение через плеер VLC, то скрипт запускается один раз и все работает. Кстати TV SideView бродит по папкам без вызовов скрипта... Тут кто-то спрашивал про картинки на папках, так вот kodi показывает, а TV SideView нет, может загрузка изображения и вызывает один из вызовов скрипта получения ссылок на ресурс.</p>
						<div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p2899" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">10</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2899#p2899">2016.01.09 21:31:04</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<IDXSKIP><ul class="author-ident">
						<li class="useravatar"><img src="https://hms.lostcut.net/img/avatars/2.png" width="45" height="60" alt="WendyH" /></li>
						<li class="username"><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></li>
						<li class="usertitle"><span>Просто участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul></IDXSKIP>
					<ul class="author-info">
						<IDXSKIP><li><span>Откуда: <strong>Планета Земля</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Зарегистрирован: <strong>2015.01.09</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Сообщений: <strong>888</strong></span></li></IDXSKIP>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2899" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Если в MediaResourceLink параметры - да, это параметры для запуска транскодирования. Так что по сути транскодирование с помощью AcePlayer всегда есть, но оно как-бы промежуточное, для получения потока. И не используется профиль транскодирования (хотя могу ошибаться, это мои только догадки). Но из-за того, что мой телек не поддерживает формат получаемого потока, мне приходится так ещё и профиль транскодирования указывать дополнительно.</p><p>Раз с одного устройства один запуск, а с другого их несколько, то конечно, дело в устройствах. Но я бы проверил на всякий случай, чем отличаются настройки этих устройств (если они используют разный тип устройств). Это где &quot;Индивидуальные настройки клиентского устройства&quot; -&gt; &quot;Файлы, субтитры&quot;, выставлен ли там профиль транскодирования у одного и у второго устройства. У меня там пусто.</p><p>Что-то я немного потерялся. В каком случае у вас &quot;не закрывается консоль не та что надо&quot;? Ну, такого быть не может в принципе. Потому как вызовы скрипта делает отдельным потоком сама программа и закрыть не тот поток она никак не может, спутав.<br />Просто в каком-то случае у вас не запускается само транскодирование.<br />Ещё раз, а с какого устройства именно так происходит, в каких случаях? Какой тип устройства выставлен в настройках этого устройства?</p>
						<IDXSKIP><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32CX523</div></IDXSKIP>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd replypost">
			<div id="p2900" class="posthead">
				<h3 class="hn post-ident"><IDXSKIP><span class="post-num">11</span></IDXSKIP> <span class="post-byline"><IDXSKIP><span>Ответ от </span></IDXSKIP><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2900#p2900">2016.01.09 22:17:07</a></span> <span class="post-edit">(2016.01.09 23:31:03 отредактировано tim128)</span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2900" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<div class="quotebox"><cite>WendyH:</cite><blockquote><p>Раз с одного устройства один запуск, а с другого их несколько, то конечно, дело в устройствах. Но я бы проверил на всякий случай, чем отличаются настройки этих устройств (если они используют разный тип устройств). Это где &quot;Индивидуальные настройки клиентского устройства&quot; -&gt; &quot;Файлы, субтитры&quot;, выставлен ли там профиль транскодирования у одного и у второго устройства. У меня там пусто.</p><p>Что-то я немного потерялся. В каком случае у вас &quot;не закрывается консоль не та что надо&quot;? Ну, такого быть не может в принципе. Потому как вызовы скрипта делает отдельным потоком сама программа и закрыть не тот поток она никак не может, спутав.<br />Просто в каком-то случае у вас не запускается само транскодирование.<br />Ещё раз, а с какого устройства именно так происходит, в каких случаях? Какой тип устройства выставлен в настройках этого устройства?</p></blockquote></div><p>Профили транскодирования для обоих устройств не установлены.</p><p>&quot;не закрывается консоль не та что надо&quot; в случае с ноутбук+kodi. Запускается четыре консоли, как минимум одна из них инициирует в ace_engine загрузку, но три консоли быстро закрываюся и загрузка прекращается. Видимо та консоль, которая &quot;захватывает&quot; торрент оказывается среди трех закрытых. Но, конечно, это все гадание...</p><p>Тип устройства для ноутбука DLNA Device (версия 1.5, 16:9, 720x406)<br />Для смартфона VLC Media Player (Web, 16:9, 720x406)</p><p>Пы.Сы.<br />Решил проверить еще на другом устройстве для ровного счета - взял у сына iPad. На нем запускал VLC и 8player. Так вот VLC вызывает скрипт один раз и показывает, 8player четыре раза и тоже показывает <img src="https://hms.lostcut.net/extensions/k_smiles/img/ab.gif" alt=":)" />. Так что дело не в устройстве а в плеере...</p>
						<div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p2903" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">12</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2903#p2903">2016.01.09 23:39:09</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2903" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Нашел лог проигрывателя kodi, может что поймете...</p><div class="fancy_spoiler_switcher"><IDXSKIP><div class="fancy_spoiler_switcher_header" data-lang-open="открыть спойлер" data-lang-close="скрыть спойлер"><strong>+</strong>&nbsp;открыть спойлер</div></IDXSKIP><div class="fancy_spoiler"><div class="codebox"><pre><code>23:29:16 T:5040  NOTICE: DVDPlayer: Opening: http://192.168.192.100:8080/MediaServer/VideoItems/2aa5798a3cdc5b55f1398a69c1024881.mpg?infokey=aa9bf6011cb47f4bc415b4c3aec5b571&amp;fileext=.mpg
23:29:16 T:5040 WARNING: CDVDMessageQueue(player)::Put MSGQ_NOT_INITIALIZED
23:29:16 T:6388  NOTICE: Thread DVDPlayer start, auto delete: false
23:29:16 T:6388  NOTICE: Creating InputStream
23:29:17 T:6388  NOTICE: Creating Demuxer
23:29:17 T:6648  NOTICE: Thread FileCache start, auto delete: false
23:29:19 T:6648   ERROR: CCurlFile::FillBuffer - Failed: Requested range was not delivered by the server(33)
23:29:20 T:6388   ERROR: Previous line repeats 2 times.
23:29:20 T:6388 WARNING: XFILE::CFileCache::Seek - failed to get remaining data
23:29:20 T:6388 WARNING: Previous line repeats 1 times.
23:29:20 T:6388  NOTICE: Opening stream: 0 source: 256
23:29:20 T:6388  NOTICE: Creating video codec with codec id: 28
23:29:20 T:6388  NOTICE: CDVDVideoCodecFFmpeg::Open() Using codec: H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10
23:29:20 T:6388  NOTICE: Creating video thread
23:29:20 T:6388  NOTICE: Opening stream: 1 source: 256
23:29:20 T:6388  NOTICE: Finding audio codec for: 86017
23:29:20 T:6388  NOTICE: Creating audio thread
23:29:20 T:3488  NOTICE: Thread DVDPlayerVideo start, auto delete: false
23:29:20 T:3488  NOTICE: running thread: video_thread
23:29:20 T:6388  NOTICE: CDVDPlayer::OnExit()
23:29:20 T:6388  NOTICE: DVDPlayer: eof, waiting for queues to empty
23:29:20 T:6388  NOTICE: Closing stream player 1
23:29:20 T:6388  NOTICE: CDVDMessageQueue(audio)::WaitUntilEmpty
23:29:20 T:6732  NOTICE: Thread DVDPlayerAudio start, auto delete: false
23:29:20 T:6732  NOTICE: running thread: CDVDPlayerAudio::Process()
23:29:20 T:6388  NOTICE: Waiting for audio thread to exit
23:29:20 T:6732  NOTICE: thread end: CDVDPlayerAudio::OnExit()
23:29:20 T:6388  NOTICE: Closing audio device
23:29:20 T:6388  NOTICE: Deleting audio codec
23:29:20 T:6388  NOTICE: Closing stream player 2
23:29:20 T:6388  NOTICE: CDVDMessageQueue(video)::WaitUntilEmpty
23:29:20 T:6388  NOTICE: waiting for video thread to exit
23:29:20 T:3488   ERROR: Got MSGQ_ABORT or MSGO_IS_ERROR return true
23:29:20 T:3488  NOTICE: thread end: video_thread
23:29:20 T:6388  NOTICE: deleting video codec
23:29:20 T:5040   ERROR: Playlist Player: skipping unplayable item: 0, path [upnp://1debbe9e-683a-4aeb-8e72-c411d19cd1f3/2aa5798a3cdc5b55f1398a69c1024881/]
23:29:20 T:5040  NOTICE: CDVDPlayer::CloseFile()
23:29:20 T:5040  NOTICE: DVDPlayer: waiting for threads to exit
23:29:20 T:5040  NOTICE: DVDPlayer: finished waiting
23:29:20 T:5040  NOTICE: CDVDPlayer::CloseFile()
23:29:20 T:5040  NOTICE: DVDPlayer: waiting for threads to exit
23:29:20 T:5040  NOTICE: DVDPlayer: finished waiting
23:29:20 T:844  NOTICE: Thread BackgroundLoader start, auto delete: false
23:29:30 T:2856  NOTICE: Thread FileCache start, auto delete: false
23:29:31 T:6860  NOTICE: Previous line repeats 1 times.
23:29:31 T:6860  NOTICE: Thread BackgroundLoader start, auto delete: false</code></pre></div></div></div><p>Все остальные подкасты, которые я пробовал и просто фильмы kodi показывает</p>
						<div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd replypost">
			<div id="p2909" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">13</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2909#p2909">2016.01.10 13:08:47</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2909" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Указал профиль транскодирования AceStream (ACEPLAYER - FFMPEG) и заработало. Причем скрипт вызывается один раз. Видимо изначальное предположение о том что скрипт дополнительно вызывается из-за получения свойств ресурса неверно. И в логе kodi ничего на это не указывает. Скорее hms по каким-то причинам вызывает скрипт по нескольку раз. Ночью много пробовал - так количество вызовов у меня варьировалось от двух до пяти и никакой закономерности я не уловил. Видимо пока придется остановиться на обязательности транскодирования. Тем более так надежнее, особенно в случае с телевизором.</p>
						<div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p2911" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">14</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2911#p2911">2016.01.10 14:32:48</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<IDXSKIP><ul class="author-ident">
						<li class="useravatar"><img src="https://hms.lostcut.net/img/avatars/2.png" width="45" height="60" alt="WendyH" /></li>
						<li class="username"><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></li>
						<li class="usertitle"><span>Просто участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul></IDXSKIP>
					<ul class="author-info">
						<IDXSKIP><li><span>Откуда: <strong>Планета Земля</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Зарегистрирован: <strong>2015.01.09</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Сообщений: <strong>888</strong></span></li></IDXSKIP>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2911" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>То, что нашлось решение проблемы, это хорошо. Но вот то, что так и не понятно - не очень.<br />Поставил Коди на телефон (Андроид, ноута под рукой нет).<br />Включил дебаг лог и тоже посмотрел. У меня выглядит лог немного по-другому:<br /></p><div class="fancy_spoiler_switcher"><IDXSKIP><div class="fancy_spoiler_switcher_header" data-lang-open="открыть спойлер" data-lang-close="скрыть спойлер"><strong>+</strong>&nbsp;открыть спойлер</div></IDXSKIP><div class="fancy_spoiler"><div class="codebox"><pre><code>14:35:52 T:18446744072517425576  NOTICE: Thread Timer start, auto delete: false
14:35:52 T:18446744072517425576   DEBUG: Thread Timer 18446744072517425576 terminating
14:35:52 T:18446744072503947928   DEBUG: virtual bool CGUIWindowVideoBase::OnPlayMedia(int) upnp://d090aa30-3d36-423f-a477-179d197c77ea/9d95305ebae474bcdf62357aef56ed75/
14:35:52 T:18446744072503947928   DEBUG: CAnnouncementManager - Announcement: OnClear from xbmc
14:35:52 T:18446744072503947928   DEBUG: GOT ANNOUNCEMENT, type: 2, from xbmc, message OnClear
14:35:52 T:18446744072503947928   DEBUG: int CVideoDatabase::GetMovieId(const string&amp;) (upnp://d090aa30-3d36-423f-a477-179d197c77ea/9d95305ebae474bcdf62357aef56ed75/), query = select idMovie from movie join files on files.idFile=movie.idFile where files.idPath=-1
14:35:52 T:18446744072503947928   DEBUG: CAnnouncementManager - Announcement: OnAdd from xbmc
14:35:52 T:18446744072503947928   DEBUG: GOT ANNOUNCEMENT, type: 2, from xbmc, message OnAdd
14:35:52 T:18446744072503947928   DEBUG: CUPnPDirectory::GetResource - resource protocol info &#039;http-get:*:video/mpeg:DLNA.ORG_PN=MPEG_TS_SD_EU_ISO;DLNA.ORG_OP=01;DLNA.ORG_CI=0;DLNA.ORG_FLAGS=61F00000000000000000000000000000&#039;
14:35:52 T:18446744072503947928   DEBUG: Loading settings for http://192.168.1.5:45397/MediaServer/VideoItems/9d95305ebae474bcdf62357aef56ed75.ts?transcoding=1&amp;infokey=f0559becbd0854cba4cfdf4a13ae47d6&amp;fileext=.ts
14:35:52 T:18446744072503947928   DEBUG: CPlayerCoreFactory::GetPlayers(http://192.168.1.5:45397/MediaServer/VideoItems/9d95305ebae474bcdf62357aef56ed75.ts?transcoding=1&amp;infokey=f0559becbd0854cba4cfdf4a13ae47d6&amp;fileext=.ts)
14:35:52 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: system rules
14:35:52 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: matches rule: system rules
14:35:52 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: hdhomerun/mms/udp
14:35:52 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: lastfm/shout
14:35:52 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: rtmp
14:35:52 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: rtsp
14:35:52 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: streams
14:35:52 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: matches rule: streams
14:35:53 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: aacp/sdp
14:35:53 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: mp2
14:35:53 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: dvd
14:35:53 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: dvdimage
14:35:53 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: sdp/asf
14:35:53 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: nsv
14:35:53 T:18446744072503947928   DEBUG: CPlayerSelectionRule::GetPlayers: considering rule: radio
14:35:53 T:18446744072503947928   DEBUG: CPlayerCoreFactory::GetPlayers: matched 0 rules with players
14:35:53 T:18446744072503947928   DEBUG: CPlayerCoreFactory::GetPlayers: adding videodefaultplayer (1)
14:35:53 T:18446744072503947928   DEBUG: CPlayerCoreFactory::GetPlayers: for video=1, audio=0
14:35:53 T:18446744072503947928   DEBUG: CPlayerCoreFactory::GetPlayers: for video=1, audio=1
14:35:53 T:18446744072503947928   DEBUG: CPlayerCoreFactory::GetPlayers: adding player: DVDPlayer (1)
14:35:53 T:18446744072503947928   DEBUG: CPlayerCoreFactory::GetPlayers: adding player: BRAVIA KDL-32CX523 (4)
14:35:53 T:18446744072503947928   DEBUG: CPlayerCoreFactory::GetPlayers: added 2 players
14:35:53 T:18446744072503947928  NOTICE: DVDPlayer: Opening: http://192.168.1.5:45397/MediaServer/VideoItems/9d95305ebae474bcdf62357aef56ed75.ts?transcoding=1&amp;infokey=f0559becbd0854cba4cfdf4a13ae47d6&amp;fileext=.ts
14:35:53 T:18446744072503947928 WARNING: CDVDMessageQueue(player)::Put MSGQ_NOT_INITIALIZED
14:35:53 T:18446744072503947928   DEBUG: CRenderManager::UpdateDisplayLatency - Latency set to 0 msec
14:35:53 T:18446744072503947928   DEBUG: LinuxRendererGL: Cleaning up GL resources
14:35:53 T:18446744072526797600  NOTICE: Thread DVDPlayer start, auto delete: false
14:35:53 T:18446744072526797600  NOTICE: Creating InputStream
14:35:53 T:18446744072503947928   DEBUG: ------ Window Init (DialogBusy.xml) ------
14:35:53 T:18446744072503947928   DEBUG: Unfocus WindowID: 10025, ControlID: 50
14:36:03 T:18446744072526797600   ERROR: CCurlFile::Stat - Failed: Timeout was reached(28) for http://192.168.1.5:45397/MediaServer/VideoItems/9d95305ebae474bcdf62357aef56ed75.ts?transcoding=1&amp;infokey=f0559becbd0854cba4cfdf4a13ae47d6&amp;fileext=.ts
14:36:03 T:18446744072526797600   DEBUG: CCurlFile::GetMimeType - http://192.168.1.5:45397/MediaServer/VideoItems/9d95305ebae474bcdf62357aef56ed75.ts?transcoding=1&amp;infokey=f0559becbd0854cba4cfdf4a13ae47d6&amp;fileext=.ts -&gt; failed
14:36:03 T:18446744072526797600   DEBUG: CFileCache::Open - opening &lt;MediaServer/VideoItems/9d95305ebae474bcdf62357aef56ed75.ts&gt; using cache
14:36:03 T:18446744072526797600   DEBUG: CurlFile::Open(0xb9539c10) http://192.168.1.5:45397/MediaServer/VideoItems/9d95305ebae474bcdf62357aef56ed75.ts?transcoding=1&amp;infokey=f0559becbd0854cba4cfdf4a13ae47d6&amp;fileext=.ts
14:36:14 T:18446744072526797600  NOTICE: Creating Demuxer
14:36:14 T:18446744072527019936  NOTICE: Thread FileCache start, auto delete: false
14:36:14 T:18446744072526797600   DEBUG: bool CDVDDemuxFFmpeg::Open(CDVDInputStream*, bool, bool) - probing detected format [mpegts]
14:36:14 T:18446744072526797600   DEBUG: bool CDVDDemuxFFmpeg::Open(CDVDInputStream*, bool, bool) - avformat_find_stream_info starting
14:36:14 T:18446744072526797600   DEBUG: ffmpeg[B9809B20]: [mpegts] max_analyze_duration 500000 reached at 510644 microseconds
14:36:14 T:18446744072526797600   DEBUG: ffmpeg[B9809B20]: [NULL] start time for stream 0 is not set in estimate_timings_from_pts
14:36:14 T:18446744072527019936    INFO: void XCURL::DllLibCurlGlobal::easy_aquire(const char*, const char*, XCURL::CURL_HANDLE**, XCURL::CURLM**) - Created session to http://192.168.1.5
14:36:14 T:18446744072527019936   DEBUG: CurlFile::CReadState::Connect - Resume from position 42949422950
14:36:14 T:18446744072527019936    INFO: CFileCache::Process - Hit eof.
14:36:14 T:18446744072527019936   DEBUG: CurlFile::CReadState::Connect - Resume from position 42949172950
14:36:14 T:18446744072526797600   DEBUG: ffmpeg[B9809B20]: [mpegts] Could not find codec parameters for stream 0 (Video: mpeg2video ([2][0][0][0] / 0x0002), none(tv)): unspecified size
14:36:14 T:18446744072526797600   DEBUG: ffmpeg[B9809B20]: [mpegts] Consider increasing the value for the &#039;analyzeduration&#039; and &#039;probesize&#039; options
14:36:14 T:18446744072526797600   DEBUG: bool CDVDDemuxFFmpeg::Open(CDVDInputStream*, bool, bool) - av_find_stream_info finished
14:36:14 T:18446744072526797600    INFO: ffmpeg[B9809B20]: Input #0, mpegts, from &#039;http://192.168.1.5:45397/MediaServer/VideoItems/9d95305ebae474bcdf62357aef56ed75.ts?transcoding=1&amp;infokey=f0559becbd0854cba4cfdf4a13ae47d6&amp;fileext=.ts&#039;:
14:36:14 T:18446744072526797600    INFO: ffmpeg[B9809B20]:   Duration: 11:39:59.18, start: 1.400000, bitrate: 8181 kb/s
14:36:14 T:18446744072526797600    INFO: ffmpeg[B9809B20]:   Program 1
14:36:14 T:18446744072526797600    INFO: ffmpeg[B9809B20]:     Metadata:
14:36:14 T:18446744072526797600    INFO: ffmpeg[B9809B20]:       service_name    : Service01
14:36:14 T:18446744072526797600    INFO: ffmpeg[B9809B20]:       service_provider: FFmpeg
14:36:14 T:18446744072526797600    INFO: ffmpeg[B9809B20]:     Stream #0:0[0x100]: Video: mpeg2video ([2][0][0][0] / 0x0002), none(tv), 90k tbr, 90k tbn, 90k tbc
14:36:14 T:18446744072526797600    INFO: ffmpeg[B9809B20]:     Stream #0:1[0x101]: Audio: aac (LC) ([15][0][0][0] / 0x000F), 44100 Hz, stereo, fltp, 141 kb/s
14:36:14 T:18446744072526797600   DEBUG: CDVDDemuxFFmpeg::AddStream(0, ...) -&gt; 0
14:36:14 T:18446744072526797600   DEBUG: CDVDDemuxFFmpeg::AddStream(1, ...) -&gt; 1
14:36:14 T:18446744072526797600   DEBUG: CDVDInputStreamFile::SetReadRate - set cache throttle rate to 1153703 bytes per second
14:36:14 T:18446744072526797600  NOTICE: Opening stream: 0 source: 256
14:36:14 T:18446744072526797600  NOTICE: Creating video codec with codec id: 2
14:36:14 T:18446744072526797600   DEBUG: CDVDFactoryCodec: compiled in hardware support: AMCodec:yes MediaCodec:yes OpenMax:no libstagefright:yes VDPAU:no VAAPI:no iMXVPU:no MMAL:no
14:36:14 T:18446744072526797600    INFO: MediaCodec Video Decoder...
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Video: mediacodec - Opening
14:36:14 T:18446744072526797600   ERROR: CDVDVideoCodecAndroidMediaCodec::Open - null size, cannot handle
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Video: mediacodec - Failed
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Video: stf-xxxx - Opening
14:36:14 T:18446744072526797600   DEBUG: CDVDVideoCodecStageFright::virtual bool CDVDVideoCodecStageFright::Open(CDVDStreamInfo&amp;, CDVDCodecOptions&amp;) - trying to open, codec(2), profile(-99), level(-99)
14:36:14 T:18446744072526797600   ERROR: CStageFrightVideo::bool CStageFrightVideo::Open(CDVDStreamInfo&amp;) - null size, cannot handle
14:36:14 T:18446744072526797600   ERROR: CDVDVideoCodecStageFright::virtual bool CDVDVideoCodecStageFright::Open(CDVDStreamInfo&amp;, CDVDCodecOptions&amp;) - failed to open, codec(2), profile(-99), level(-99)
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Video: stf-mpeg2 - Failed
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Video:  - Opening
14:36:14 T:18446744072526797600  NOTICE: CDVDVideoCodecFFmpeg::Open() Using codec: MPEG-2 video
14:36:14 T:18446744072526797600   DEBUG: CDVDVideoCodecFFmpeg - open frame threaded with 2 threads
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Video: ff-mpeg2video - Opened
14:36:14 T:18446744072526797600   ERROR: CDVDPlayerVideo::OpenStream - Invalid framerate 90000, using forced 25fps and just trust timestamps
14:36:14 T:18446744072526797600  NOTICE: Creating video thread
14:36:14 T:18446744072526797600  NOTICE: Opening stream: 1 source: 256
14:36:14 T:18446744072526797600  NOTICE: Finding audio codec for: 86018
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Audio: passthrough - Opening
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Audio: passthrough - Failed
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Audio: FFmpeg - Opening
14:36:14 T:18446744072519659504  NOTICE: Thread DVDPlayerVideo start, auto delete: false
14:36:14 T:18446744072519659504  NOTICE: running thread: video_thread
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Audio: FFmpeg - Opened
14:36:14 T:18446744072526797600  NOTICE: Creating audio thread
14:36:14 T:18446744072519659504   DEBUG: CDVDPlayerVideo - CDVDMsg::GENERAL_SYNCHRONIZE
14:36:14 T:18446744072526797600   DEBUG: virtual void CApplication::OnPlayBackStarted(): play state was 1, starting 1
14:36:14 T:18446744072526797600   DEBUG: CDVDPlayer::SetCaching - caching state 1
14:36:14 T:18446744072526797600   DEBUG: CDVDDemuxFFmpeg::Read() fetching extradata, extradata_size(22)
14:36:14 T:18446744072525076144  NOTICE: Thread DVDPlayerAudio start, auto delete: false
14:36:14 T:18446744072525076144  NOTICE: running thread: CDVDPlayerAudio::Process()
14:36:14 T:18446744072525076144   DEBUG: CDVDPlayerAudio - CDVDMsg::GENERAL_SYNCHRONIZE
14:36:14 T:18446744072526797600   DEBUG: CDVDDemuxFFmpeg::AddStream(0, ...) -&gt; 0
14:36:14 T:18446744072526797600  NOTICE: Opening stream: 0 source: 256
14:36:14 T:18446744072526797600  NOTICE: Creating video codec with codec id: 2
14:36:14 T:18446744072526797600   DEBUG: CDVDFactoryCodec: compiled in hardware support: AMCodec:yes MediaCodec:yes OpenMax:no libstagefright:yes VDPAU:no VAAPI:no iMXVPU:no MMAL:no
14:36:14 T:18446744072526797600    INFO: MediaCodec Video Decoder...
14:36:14 T:18446744072526797600   DEBUG: FactoryCodec - Video: mediacodec - Opening</code></pre></div></div></div><p>Но у меня и ситуация другая, у меня Коди на андроиде норм показывает этот подкаст. Точнее было в первый раз, что он не дождался, пока там плеер AceStream запускался и проч. А потом включал каналы норм.</p><p>Единственное, что меня смутило&nbsp; в вашем логе, это как будто Коди у вас пытался позиционировать медиа-файл, типа как &quot;Продолжить воспроизведение с прерванного места&quot;. Вот эти строки:<br /></p><div class="codebox"><pre><code>23:29:19 T:6648   ERROR: CCurlFile::FillBuffer - Failed: Requested range was not delivered by the server(33)
23:29:20 T:6388   ERROR: Previous line repeats 2 times.
23:29:20 T:6388 WARNING: XFILE::CFileCache::Seek - failed to get remaining data</code></pre></div><p>Хотя, это всего-лишь предположение и до конца не понятно.</p><p>У меня к вам другой вопрос. Немного не по теме.<br />Коди - хороший медиа-центр и всё такое. Мне тоже там всё нравится. Для него <a href="http://xbmc.ru/forum/forumdisplay.php?s=c3440d41d0454d20f1a570b5b4d78d1c&amp;f=9" target="_blank">куча аддонов</a>, заменяющих подкасты в HMS, не FastScript, а язык Python для плагинов (что несравнимо лучше), да и выступать он уже может как DLNA медиа-сервер, вроде как. Т.е. может быть практически полной заменой HMS. Но заточен он именно как медиа-центр, всё таки.<br />Так вот, при навигации в нём по серверу HMS и обновлении какой-нибудь ветки, пункта &quot;Обновить подкасты&quot; и при выходе из этой папки - ничего не меняется. Т.е. HMS всё обновил, содержимое папки изменилось, но Коди не обновляет информацию о содержимом папки. и ничего не показывает. По крайней мере у меня так.<br />У вас с этим проблем нет?<br />Например, в BubbleUPnP там хоть можно было Refresh текущей папки сделать, чтобы он заново запросил её содержимое. А тут ничего такого не нашёл.</p>
						<IDXSKIP><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32CX523</div></IDXSKIP>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd replypost">
			<div id="p2914" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">15</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2914#p2914">2016.01.10 17:02:10</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2914" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p><strong>WendyH,</strong></p><p>Да, действительно, содержимое папок не обновляется до выхода из kodi. Не обращал внимания, сейчас проверил - так и есть. Проблема. Но пока kodi - единственный продукт, который я нашел под windows. Хотелось бы иметь единый медиа-сервер для квартиры, а все устройства его бы использовали. Может ли kodi заменить в этом hms - может быть но надо разбираться.</p><p>Насчет ошибки CCurlFile::FillBuffer - Failed: Requested range was not delivered by the server(33) мне показалось, что это означает что библиотека ccurl не смогла выполнить пребуферизацию, так как не получила от сервера. Хотя тоже просто догадка.</p>
						<div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p2929" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">16</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2929#p2929">2016.01.11 13:22:48</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2929" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<div class="quotebox"><IDXSKIP><cite>WendyH:</cite></IDXSKIP><blockquote><p>Так вот, при навигации в нём по серверу HMS и обновлении какой-нибудь ветки, пункта &quot;Обновить подкасты&quot; и при выходе из этой папки - ничего не меняется. Т.е. HMS всё обновил, содержимое папки изменилось, но Коди не обновляет информацию о содержимом папки. и ничего не показывает. По крайней мере у меня так.<br />У вас с этим проблем нет?</p></blockquote></div><p>Вот, кстати <a href="http://forum.kodi.tv/showthread.php?tid=221579&amp;highlight=refresh+upnp" target="_blank">http://forum.kodi.tv/showthread.php?tid … fresh+upnp</a></p>
						<div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd replypost">
			<div id="p2936" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">17</span> <span class="post-byline"><IDXSKIP><span>Ответ от </span></IDXSKIP><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2936#p2936">2016.01.11 22:06:51</a></span> <span class="post-edit">(2016.01.11 22:09:01 отредактировано tim128)</span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2936" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Продолжаю переделывать скрипт получения ссылок на ресурс для Торрент-ТВ. Привел в порядок авторизацию, теперь вообще не авторизуюсь если не требуется. Страницу с 1ttv.org тоже гружу только по необходимости. Стал обрабатывать &quot;пропавшие&quot; ссылки. И тут опять проблема.<br /></p><div class="fancy_spoiler_switcher"><IDXSKIP><div class="fancy_spoiler_switcher_header" data-lang-open="открыть спойлер" data-lang-close="скрыть спойлер"><strong>+</strong>&nbsp;открыть спойлер</div></IDXSKIP><div class="fancy_spoiler"><p><span class="postimg"><img src="https://hms.lostcut.net/misc.php?action=pun_attachment&amp;item=472&amp;download=0" alt="https://hms.lostcut.net/misc.php?action=pun_attachment&amp;amp;item=472&amp;amp;download=0" /></span></p></div></div><p>На скрине видно, &quot;Запуск скрипта получения ссылок на ресурс&quot; - это запуск скрипта. Потом ошибка - &quot;Медиа-ресурс не найден&quot;. Я очищаю переменную MediaResourceLink и выхожу. Надеюсь, что hms остановит обработку, так как ссылка не ресурс не получена. Но не тут то было... hms зачем-то запускает скрипт еще раз. Все тоже самое, медиа-ресурс не найден, MediaResourceLink = &quot;&quot; и тут hms запускает транскодер... который конечно ничего не воспроизводит... Как мне дать знать hms, что произошла ошибка и ссылки на медиа-ресурс нет и рыпаться не стоит?</p>
						<div class="attachments"><strong id="attach2936">Прикреплённые файлы сообщения</strong><p><a href="https://hms.lostcut.net/misc.php?action=pun_attachment&amp;item=472&amp;preview">Скрипт.PNG</a>&nbsp;28.48 kb, скачивалось 22 раза, начиная с 2016.01.12</p></div><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p2937" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">18</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2937#p2937">2016.01.11 22:26:45</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<IDXSKIP><ul class="author-ident">
						<li class="useravatar"><img src="https://hms.lostcut.net/img/avatars/2.png" width="45" height="60" alt="WendyH" /></li>
						<li class="username"><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></li>
						<li class="usertitle"><span>Просто участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul></IDXSKIP>
					<ul class="author-info">
						<IDXSKIP><li><span>Откуда: <strong>Планета Земля</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Зарегистрирован: <strong>2015.01.09</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Сообщений: <strong>888</strong></span></li></IDXSKIP>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2937" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Дело в том, что мы запустили воспроизведение на устройстве (телеке) и как раз оно ждёт, что поток получит. Даже если HMS будет знать о том, что рыпаться не стоит, то что должно &quot;думать&quot; устройство или что должен HMS этому устройству &quot;сказать&quot;?<br />Помнится, мне было нечего делать и я сделал несколько видо-заглушек для подобных ошибок и выложил себе на сервер. И в случае ошибки в MediaResourceLink подставляю их адреса.<br /></p><div class="fancy_spoiler_switcher"><IDXSKIP><div class="fancy_spoiler_switcher_header" data-lang-open="открыть спойлер" data-lang-close="скрыть спойлер"><strong>+</strong>&nbsp;открыть спойлер</div></IDXSKIP><div class="fancy_spoiler"><p><a href="http://wonky.lostcut.net/vids/enotallow.avi" target="_blank">http://wonky.lostcut.net/vids/enotallow.avi</a><br /><a href="http://wonky.lostcut.net/vids/error.avi" target="_blank">http://wonky.lostcut.net/vids/error.avi</a><br /><a href="http://wonky.lostcut.net/vids/error_3d2.avi" target="_blank">http://wonky.lostcut.net/vids/error_3d2.avi</a><br /><a href="http://wonky.lostcut.net/vids/error_getlink.avi" target="_blank">http://wonky.lostcut.net/vids/error_getlink.avi</a><br /><a href="http://wonky.lostcut.net/vids/error3d_3.avi" target="_blank">http://wonky.lostcut.net/vids/error3d_3.avi</a><br /><a href="http://wonky.lostcut.net/vids/isoff.avi" target="_blank">http://wonky.lostcut.net/vids/isoff.avi</a><br /><a href="http://wonky.lostcut.net/vids/isoff_hd.avi" target="_blank">http://wonky.lostcut.net/vids/isoff_hd.avi</a><br /><a href="http://wonky.lostcut.net/vids/isoff_light.avi" target="_blank">http://wonky.lostcut.net/vids/isoff_light.avi</a><br /><a href="http://wonky.lostcut.net/vids/isset.avi" target="_blank">http://wonky.lostcut.net/vids/isset.avi</a><br /><a href="http://wonky.lostcut.net/vids/isset_hd.avi" target="_blank">http://wonky.lostcut.net/vids/isset_hd.avi</a><br /><a href="http://wonky.lostcut.net/vids/isset_light.avi" target="_blank">http://wonky.lostcut.net/vids/isset_light.avi</a><br /><a href="http://wonky.lostcut.net/vids/podcasterror_hd.mp4" target="_blank">http://wonky.lostcut.net/vids/podcasterror_hd.mp4</a></p></div></div><p>Для разных случаев. Видосы отстойные конечно. И лучше с ними не позориться. Вот бы кто сделал нормальные видео-заглушки, было бы здорово!</p><p>Кстати как вариант, могу научить как сформировать видео из вообще текстового сообщения. Это типа как у меня информационные ссылки. У меня на серваке есть скрипт, который из текста и параметров создаёт картинку, кеширует и возвращает ссылку на такую картинку, а мы в MediaResourceLink можем занести параметры для ffmpeg для показа видео из такой картинки.</p>
						<IDXSKIP><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32CX523</div></IDXSKIP>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd replypost">
			<div id="p2941" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">19</span> <span class="post-byline"><IDXSKIP><span>Ответ от </span></IDXSKIP><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2941#p2941">2016.01.12 00:30:13</a></span> <span class="post-edit">(2016.01.12 00:33:33 отредактировано tim128)</span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя tim128" href="https://hms.lostcut.net/profile.php?id=290">tim128</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.12.15</strong></span></li>
						<li><span>Сообщений: <strong>60</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2941" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<div class="quotebox"><IDXSKIP><cite>WendyH:</cite></IDXSKIP><blockquote><p>Дело в том, что мы запустили воспроизведение на устройстве (телеке) и как раз оно ждёт, что поток получит. Даже если HMS будет знать о том, что рыпаться не стоит, то что должно &quot;думать&quot; устройство или что должен HMS этому устройству &quot;сказать&quot;?</p></blockquote></div><p>Логично. Но есть еще один момент. Запостив скриншот на форум, я увидел его свежим взглядом и обратил внимание на то, что сообщения скрипта затесались между сообщений подкаста. То есть скрипт получения ссылок на ресурс вызывался скриптом профиля транскодирования. Стал смотреть его - в скрипте профиля дважды вызывалась функция HmsGetItemProperty(mpiMediaResourceLink) и транскодирование запускалось независимо от того, что эта функция вернет. Исправил этот косяк так чтобы если HmsGetItemProperty(mpiMediaResourceLink) возвращает пустую строку выйти из скрипта транскодирования. Теперь все предсказуемо, только уже сам профиль транскодирования стал вызываться дважды - видимо как вы и написали уже плеер не дождавшись потока от hms пробует повторить вызов. Чтобы совсем уж все в ажуре было, согласен, стоит воспроизвести мини-ролик с сообщением об ошибке. Буду признателен, если поможете такой сделать.</p><div class="fancy_spoiler_switcher"><IDXSKIP><div class="fancy_spoiler_switcher_header" data-lang-open="открыть спойлер" data-lang-close="скрыть спойлер"><strong>+</strong>&nbsp;открыть спойлер</div></IDXSKIP><div class="fancy_spoiler"><p><span class="postimg"><img src="https://hms.lostcut.net/misc.php?action=pun_attachment&amp;item=475&amp;download=0" alt="https://hms.lostcut.net/misc.php?action=pun_attachment&amp;amp;item=475&amp;amp;download=0" /></span></p></div></div>
						<div class="attachments"><strong id="attach2941">Прикреплённые файлы сообщения</strong><p><a href="https://hms.lostcut.net/misc.php?action=pun_attachment&amp;item=475&amp;preview">Скрипт.PNG</a>&nbsp;25.65 kb, скачивалось 28 раз, начиная с 2016.01.12</p></div><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32W705C</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p2996" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">20</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2996#p2996">2016.01.14 00:13:45</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<IDXSKIP><ul class="author-ident">
						<li class="useravatar"><img src="https://hms.lostcut.net/img/avatars/2.png" width="45" height="60" alt="WendyH" /></li>
						<li class="username"><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></li>
						<li class="usertitle"><span>Просто участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul></IDXSKIP>
					<ul class="author-info">
						<IDXSKIP><li><span>Откуда: <strong>Планета Земля</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Зарегистрирован: <strong>2015.01.09</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Сообщений: <strong>888</strong></span></li></IDXSKIP>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2996" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<div class="quotebox"><cite>tim128:</cite><blockquote><p>Чтобы совсем уж все в ажуре было, согласен, стоит воспроизвести мини-ролик с сообщением об ошибке. Буду признателен, если поможете такой сделать.</p></blockquote></div><p>Есть у меня два волшебных скрипта на сервере для формирования картинки из текста. Как они работают и какие параметры принимают, можно поизучав из содержимое.<br />Один <a href="https://github.com/WendyH/PHP-Scripts/blob/master/videopreview.php" target="_blank">videopreview.php</a>, другой <a href="https://github.com/WendyH/PHP-Scripts/blob/master/videomessage.php" target="_blank">videomessage.php</a>.<br />(Код там ужасен, но свою функцию делают)</p><p>videomessage.php - для простых сообщений, где выводится заголовок и текст сообщения.<br />Второй - videopreview.php - для более сложных картинок и большого текста. Он используется для формирования описаний фильма.</p><p>Объясню пока как можно использовать videomessage.php для видео сообщения.</p><p>Например, при возникновении внештатной ситуации нам нужно вместо запрошенного видео вывести своё другое видео с сообщением об ошибке.<br />Тогда можно вызвать скрипт с параметрами caption и msg и сохранить полученную картинку как файл.<br />Например: <a href="http://wonky.lostcut.net/videomessage.php?caption=Мой%20мегаподкаст&amp;msg=Видео,%20которое%20вы%20запросили%20отсутствует%21" target="_blank">http://wonky.lostcut.net/videomessage.p … тствует%21</a></p><div class="fancy_spoiler_switcher"><div class="fancy_spoiler_switcher_header"><strong>+</strong>&nbsp;На самом деле там можно указывать ещё некоторые параметры</div><div class="fancy_spoiler"><p>Такие как captfont, captcolor, captsize, font, color, fontsize, bckgrnd.</p><p>Значение цвета в captcolor и color задаётся как RGB цвет в HEX представлении (#F00 - красный, #0F0 - зелёный, 00F - синий, 0FD911, #D55...). Знак решетки необязателен.</p><p>Имя шрифта captfont и font только то, файл которого загружен на сервер: Adam, PentaBold, DejaVuSansMono-Bold, UKIJMe, LiberationMono-Regular, DejaVuSansMono, AGFriquer_Bold.</p><p>bckgrnd - имя загруженной картинки для фона (background, Dark_1920x1080, payload114.cargocollective.com-1-7-225471-4588633-BG_DarkWood_o, abstract_background_49-2560x1600, Austere_gray_desktop_background).</p><p><a href="http://wonky.lostcut.net/videomessage.php?caption=%D0%9C%D0%BE%D0%B9%20%D0%BC%D0%B5%D0%B3%D0%B0%D0%BF%D0%BE%D0%B4%D0%BA%D0%B0%D1%81%D1%82&amp;msg=%D0%92%D0%B8%D0%B4%D0%B5%D0%BE,%20%D0%BA%D0%BE%D1%82%D0%BE%D1%80%D0%BE%D0%B5%20%D0%B2%D1%8B%20%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B8%D0%BB%D0%B8%20%D0%BE%D1%82%D1%81%D1%83%D1%82%D1%81%D1%82%D0%B2%D1%83%D0%B5%D1%82%21&amp;captcolor=D55&amp;captfont=PentaBold&amp;bckgrnd=Austere_gray_desktop_background" target="_blank">Пример</a>.</p></div></div><p>Теперь мы можем сформировать картинку, скачать её и задать параметры для создания видео слайд шоу из этой картинки.<br />Например для ffmpeg можно задать такие параметры для формирования видео из картинки:<br />ffmpeg -loop 1 -i image.jpg caption=ds -c:v libx264 -t 7 -pix_fmt yuv420p out.mp4</p><br /><p>Можно сделать специальную функцию для этого:<br /></p><div class="fancy_spoiler_switcher"><IDXSKIP><div class="fancy_spoiler_switcher_header" data-lang-open="открыть спойлер" data-lang-close="скрыть спойлер"><strong>+</strong>&nbsp;открыть спойлер</div></IDXSKIP><div class="fancy_spoiler"><div class="codebox"><pre><code>///////////////////////////////////////////////////////////////////////////////
// Формирование видео сообщение с заданным заголовком и сообщением
Procedure ShowVideoMessage(sCaption, sMessage: String);
Var
  sFile, sLink: String;
Begin
  sFile := HmsTempDirectory+&#039;\image.jpg&#039;;
  sLink := &#039;http://wonky.lostcut.net/videomessage.php?caption=&#039;+HmsHttpEncode(sCaption)+&#039;&amp;msg=&#039;+HmsHttpEncode(sMessage);
  HmsDownloadURLToFile(sLink, sFile);
  MediaResourceLink := &#039;-loop 1 -i &quot;&#039;+sFile+&#039;&quot; -c:v libx264 -t 7 -pix_fmt yuv420p&#039;;
End;</code></pre></div></div></div><p>И вызывать эту функцию примерно можно так (где-нибудь в конце скрипта, будем считать, что пустая MediaResourceLink это ошибка):<br /></p><div class="codebox"><pre><code>If MediaResourceLink = &#039;&#039; Then ShowVideoMessage(&#039;1TTV&#039;, &#039;Запрашиваемый канал в данный момент не доступен&#039;);</code></pre></div><p>Но я тут вспомнил про одну засаду. Мне пользователи потом говорили, что некоторые телевизоры отказываются воспроизводить такое видео, ругаясь на аудио дорожку, которого, естественно, в этом видео нет.<br />Поэтому мне пришлось выдумывать звуковую заглушку и указывать в параметрах.</p><p>Например, можно скачивать небольшой аудио файл и добавлять его. И функция формирования видео сообщения будет уже такая:<br /></p><div class="codebox"><pre><code>///////////////////////////////////////////////////////////////////////////////
// Формирование видео сообщение с заданным заголовком и сообщением
Procedure ShowVideoMessage(sCaption, sMessage: String);
Var
  sLink, sFileImg, sFileMP3: String;
Begin
  sFileImg := HmsTempDirectory+&#039;\image.jpg&#039;;
  sFileMP3 := HmsTempDirectory+&#039;\audio.mp3&#039;;

  sLink := &#039;http://wonky.lostcut.net/videomessage.php?caption=&#039;+HmsHttpEncode(sCaption)+&#039;&amp;msg=&#039;+HmsHttpEncode(sMessage);
  HmsDownloadURLToFile(sLink, sFileImg);

  sLink := &#039;http://wonky.lostcut.net/mp3/sa.mp3&#039;;
  If Not FileExists(sFileMP3) Then HmsDownloadURLToFile(sLink, sFileMP3);

  MediaResourceLink := Format(&#039;-loop 1 -i &quot;%s&quot; -i &quot;%s&quot; -shortest -c:v libx264 -pix_fmt yuv420p -c:a copy&#039;, [sFileImg, sFileMP3]);
End;</code></pre></div><p>Но тут масса вариантов и есть место для фантазии, как это можно всё сделать.</p>
						<IDXSKIP><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32CX523</div></IDXSKIP>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd replypost">
			<div id="p2997" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">21</span> <span class="post-byline"><IDXSKIP><span>Ответ от </span></IDXSKIP><a title="Перейти в профиль пользователя Рома35" href="https://hms.lostcut.net/profile.php?id=4">Рома35</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=2997#p2997">2016.01.14 12:31:13</a></span> <span class="post-edit">(2016.01.14 19:30:26 отредактировано Рома35)</span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя Рома35" href="https://hms.lostcut.net/profile.php?id=4">Рома35</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.01.10</strong></span></li>
						<li><span>Сообщений: <strong>70</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc2997" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Я правильно понял скрипт формирования видео из картинки, как здесь указать длительность, например, 5 секунд?<br /></p><div class="codebox"><pre><code>ffmpeg.exe&quot; -loop 1 -i &quot;1.JPG&quot; -i &quot;1.mp3&quot; -shortest -c:v libx264 -pix_fmt yuv420p -c:a copy 1.mp4</code></pre></div><p>Вот мой свой скрипт&nbsp; формирования видео 1 секунды из картинки:<br /></p><div class="codebox"><pre><code>mencoder.exe  &quot;mf://@1.txt&quot; -vf scale=378:-11  -audiofile  &quot;1.mp3&quot; -oac copy -ovc lavc  -o &quot;1.mp4&quot;</code></pre></div><div class="fancy_spoiler_switcher"><div class="fancy_spoiler_switcher_header"><strong>+</strong>&nbsp;Где 1.txt для одной секунды.</div><div class="fancy_spoiler"><p>1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG<br />1.JPG</p></div></div><p>Какой у вас скрипт формирования txt в jpg батником?<br />У меня такой:<br /></p><div class="codebox"><pre><code>&quot;ImageMagick\convert.exe&quot;    -crop 378x212+40+40  &quot;1.txt&quot;   &quot;1.jpg&quot;</code></pre></div><p>где 1.txt текст в юникоде.</p>
						<div class="sig-content"><span class="sig-line"><!-- --></span>Samsung UE32EH4000 WI-FI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Samsung UE22C4000 WI-FI<br />Транскод невозможен!</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post even replypost">
			<div id="p3005" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">22</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=3005#p3005">2016.01.14 22:36:53</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<IDXSKIP><ul class="author-ident">
						<li class="useravatar"><img src="https://hms.lostcut.net/img/avatars/2.png" width="45" height="60" alt="WendyH" /></li>
						<li class="username"><a title="Перейти в профиль пользователя WendyH" href="https://hms.lostcut.net/profile.php?id=2">WendyH</a></li>
						<li class="usertitle"><span>Просто участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul></IDXSKIP>
					<ul class="author-info">
						<IDXSKIP><li><span>Откуда: <strong>Планета Земля</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Зарегистрирован: <strong>2015.01.09</strong></span></li></IDXSKIP>
						<IDXSKIP><li><span>Сообщений: <strong>888</strong></span></li></IDXSKIP>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc3005" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<div class="quotebox"><cite>Рома35:</cite><blockquote><p>Я правильно понял скрипт формирования видео из картинки, как здесь указать длительность, например, 5 секунд?<br /></p><div class="codebox"><pre><code>ffmpeg.exe&quot; -loop 1 -i &quot;1.JPG&quot; -i &quot;1.mp3&quot; -shortest -c:v libx264 -pix_fmt yuv420p -c:a copy 1.mp4</code></pre></div></blockquote></div><p>В данном случае, длительность ограничивается длительностью звуковой дорожки параметром -shortest. А у меня в примере скачивается mp3 длиной в 7 сек.<br />Есть несколько вариантов задания длительности. Например можно и так:<br /></p><div class="codebox"><pre><code>ffmpeg -loop 1 -i &quot;image.jpg&quot; -i &quot;audio.mp3&quot; -t 00:00:30 -c:v libx264 -pix_fmt yuv420p -c:a copy -y out.mp4</code></pre></div><p>Длительность в параметре -t = 30 секунд.<br />Но это долгий вариант. Самый быстрый, это у меня получилось в скрипте сделать так. Растиражировать картинку с нумерацией и указать такие параметры:<br /></p><div class="codebox"><pre><code>ffmpeg.exe&quot;-i &quot;audio.mp3&quot; -f image2 -r 1 -i &quot;image%03d.jpg&quot; -r 30 -c:v libx264 -pix_fmt yuv420p -c:a copy 1.mp4</code></pre></div><p>Где -r 30 это 30 секунд. А картинок должно быть с image001.jpg по image030.jpg.<br />Это самый быстрый вариант получился для ffmpeg. И было принципиальна скорость, потому как HMS не отдавал такой файл телеку, пока его не сформирует до конца. А это дополнительная пауза перед воспроизведением.</p><p>Спасибо за пример с mencoder, будем знать.</p><p>Насчёт того, что convert от ImageMagick может создавать из текста картинку, я знаю. Даже ffmpeg может выводить текст поверх видео, через параметр drawtext. Но убого как-то.<br /></p><div class="quotebox"><cite>Рома35:</cite><blockquote><p>Какой у вас скрипт формирования txt в jpg батником?</p></blockquote></div><p>В том то и дело, что у меня батника нет. Я сделал специально для использования в подкастах для всех желающих, чтобы не нужно было установленных дополнительных программ или библиотек и в тоже время из скрипта подкаста можно было получить красивую картинку с текстом (под красивой я понимаю фон с эффектом размытия).<br />Для этого создал скрипт на PHP, который, кстати, использует imagemagick для формирования картинки и выложил на сервер. И создание картинки теперь делается вызовом этого скрипта, где в параметрах можно указать какой текст будет выведен и проч.</p>
						<IDXSKIP><div class="sig-content"><span class="sig-line"><!-- --></span>Sony Bravia KDL-32CX523</div></IDXSKIP>
						<div class="sig-content"><div class="thanks_sig"><span class="thanks_sig_head">Спасибо сказали: </span><span><a href="https://hms.lostcut.net/profile.php?id=4">Рома35</a></span><span class="thanks">1</span></div></div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
		<div class="post odd lastpost replypost">
			<div id="p3008" class="posthead">
				<h3 class="hn post-ident"><span class="post-num">23</span> <span class="post-byline"><span>Ответ от </span><a title="Перейти в профиль пользователя Рома35" href="https://hms.lostcut.net/profile.php?id=4">Рома35</a></span> <span class="post-link"><a class="permalink" rel="bookmark" title="Постоянная ссылка на это сообщение" href="https://hms.lostcut.net/viewtopic.php?pid=3008#p3008">2016.01.16 13:43:41</a></span></h3>
			</div>
			<div class="postbody">
				<div class="post-author">
					<ul class="author-ident">
						<li class="username"><a title="Перейти в профиль пользователя Рома35" href="https://hms.lostcut.net/profile.php?id=4">Рома35</a></li>
						<li class="usertitle"><span>Участник</span></li>
						<li class="userstatus"><span>Неактивен</span></li>
					</ul>
					<ul class="author-info">
						<li><span>Зарегистрирован: <strong>2015.01.10</strong></span></li>
						<li><span>Сообщений: <strong>70</strong></span></li>
					</ul>
				</div>
				<div class="post-entry">
					<h4 id="pc3008" class="entry-title hn">Re: Скрипт получения ссылок на ресурс</h4>
					<div class="entry-content">
						<p>Для своего скрипта картинку в видео</p><p>mencoder.exe&nbsp; &quot;mf://@1.txt&quot; -vf scale=378:-11&nbsp; -audiofile&nbsp; &quot;1.mp3&quot; -oac copy -ovc lavc&nbsp; -o &quot;1.mp4&quot;</p><p> использую следующий mp3 файл, а количество секунд зависит от количества строчек в 1.txt(кратно 25).</p>
						<div class="attachments"><strong id="attach3008">Прикреплённые файлы сообщения</strong><p><a href="https://hms.lostcut.net/misc.php?action=pun_attachment&amp;item=485&amp;download=1">для склейки1.mp3</a>&nbsp;144 b, скачивалось 63 раза, начиная с 2016.01.16</p></div><div class="sig-content"><span class="sig-line"><!-- --></span>Samsung UE32EH4000 WI-FI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Samsung UE22C4000 WI-FI<br />Транскод невозможен!</div>
					</div>
				</div>
			</div>
			<div class="postfoot">
				<div class="post-options">
					<p class="post-actions"></p>
				</div>
			</div>
		</div>
	</div>

	<div class="main-foot">
		<h2 class="hn"><span><span class="item-info">Сообщений: 23</span></span></h2>
	</div>
		<div id="brd-pagepost-end" class="main-pagepost gen-content">
	<IDXSKIP><p class="paging"><span class="pages">Страницы</span> <strong class="first-item">1</strong></p></IDXSKIP>
	<p class="posting"><IDXSKIP>Чтобы отправить ответ, вы должны </IDXSKIP><IDXSKIP><a href="https://hms.lostcut.net/login.php">войти</a></IDXSKIP> <IDXSKIP>или <a href="https://hms.lostcut.net/register.php">зарегистрироваться</a></IDXSKIP></p>
</div>
		<div id="brd-crumbs-end" class="crumbs">
	<p><IDXSKIP><span class="crumb crumbfirst"><a href="https://hms.lostcut.net/index.php">Неофициальный форум DLNA Home Media Server</a></span></IDXSKIP> <span class="crumb"><IDXSKIP><span> &rarr;&nbsp;</span></IDXSKIP><IDXSKIP><a href="https://hms.lostcut.net/viewforum.php?id=7">Coding</a></IDXSKIP></span> <span class="crumb crumblast"><IDXSKIP><span> &rarr;&nbsp;</span></IDXSKIP>Скрипт получения ссылок на ресурс</span> </p>
</div>
	</div>
		<!-- forum_qpost -->
		<!-- forum_info -->
	<IDXSKIP><div class="hr"><hr /></div></IDXSKIP>
	<div id="brd-about">
		
	</div>
	</div>
	</div>
	<script>if(typeof PUNBB==='undefined'||!PUNBB){var PUNBB={};}PUNBB.env={base_url:"https://hms.lostcut.net/",base_js_url:"https://hms.lostcut.net/include/js/",user_lang:"Russian",user_style:"Oxygen",user_is_guest:"1",page:"viewtopic"};</script>
<script src="https://hms.lostcut.net/include/js/min/punbb.common.min.js"></script>
<script src="https://hms.lostcut.net/extensions/wh_codehighlight/js/wh_codehighlight2.min.js"></script>
<script src="https://hms.lostcut.net/extensions/pun_jquery/js/jquery-1.11.2.min.js"></script>
<script src="https://hms.lostcut.net/extensions/fancy_jquery_addons/js/fancy_jquery_addons.min.js"></script>
<script>PUNBB.env.fancy_spellcheck={speller_url:"https://hms.lostcut.net/extensions/fancy_spellcheck/speller/Oxygen/",user_lang:"Russian",};</script>
<script async src="https://hms.lostcut.net/extensions/fancy_spellcheck/js/fancy_spellcheck.min.js"></script>
<script>PUNBB.pun_bbcode=(function(){return{init:function(){return true;},insert_text:function(d,h){var g,f,e=(document.all)?document.all.req_message:((document.getElementById("afocus")!==null)?(document.getElementById("afocus").req_message):(document.getElementsByName("req_message")[0]));if(!e){return false;}if(document.selection&&document.selection.createRange){e.focus();g=document.selection.createRange();g.text=d+g.text+h;e.focus();}else{if(e.selectionStart||e.selectionStart===0){var c=e.selectionStart,b=e.selectionEnd,a=e.scrollTop;e.value=e.value.substring(0,c)+d+e.value.substring(c,b)+h+e.value.substring(b,e.value.length);if(d.charAt(d.length-2)==="="){e.selectionStart=(c+d.length-1);}else{if(c===b){e.selectionStart=b+d.length;}else{e.selectionStart=b+d.length+h.length;}}e.selectionEnd=e.selectionStart;e.scrollTop=a;e.focus();}else{e.value+=d+h;e.focus();}}}};}());PUNBB.common.addDOMReadyEvent(PUNBB.pun_bbcode.init);</script>
<script src="https://hms.lostcut.net/extensions/k_smiles/js/pun_bbcode_smiles2.min.js"></script>
<script src="https://hms.lostcut.net/extensions/wh_monospacetextedit/js/wh_monospacetextedit.js"></script>
<script>PUNBB.fancy_spoiler=(function(){function b(c){return(c.offsetWidth!==0);}function a(c){return function(){var e=c,d=e.nextSibling;if(d&&PUNBB.common.hasClass(d,"fancy_spoiler")){if(!b(d)){d.style.display="block";if(e.getAttribute("data-lang-close")){e.innerHTML="<strong>-</strong>&nbsp;"+e.getAttribute("data-lang-close");}else{e.innerHTML="<strong>-</strong>&nbsp;"+e.innerHTML.substr(24);}}else{d.style.display="none";if(e.getAttribute("data-lang-open")){e.innerHTML="<strong>+</strong>&nbsp;"+e.getAttribute("data-lang-open");}else{e.innerHTML="<strong>+</strong>&nbsp;"+e.innerHTML.substr(24);}}return false;}return true;};}return{init:function(){var c=PUNBB.common.arrayOfMatched(function(d){return(PUNBB.common.hasClass(d,"fancy_spoiler_switcher_header"));},document.getElementsByTagName("div"));PUNBB.common.map(function(d){d.onclick=a(d);},c);}};}());PUNBB.common.addDOMReadyEvent(PUNBB.fancy_spoiler.init);</script>
<script>PUNBB.md_spoiler = (function (){'use strict';function visible(el) { return (el.offsetWidth !== 0)}function spoiler_switcher_onclick(switcher){return function () { var switcher_link = switcher, spoiler_block = switcher_link.nextSibling;if (spoiler_block && PUNBB.common.hasClass(spoiler_block, 'md_spoiler')) { var j = (typeof(jQuery) != 'undefined');if (!visible(spoiler_block)) { if (j) jQuery(spoiler_block).toggle();else spoiler_block.style.display = 'block';if (switcher.innerHTML.indexOf('</h')<0) { switcher_link.innerHTML = '<strong>-</strong>&nbsp;'+switcher_link.innerHTML.substr(24)}} else{if (j) jQuery(spoiler_block).toggle();else spoiler_block.style.display = 'none';if (switcher.innerHTML.indexOf('</h')<0) { switcher_link.innerHTML = '<strong>+</strong>&nbsp;'+switcher_link.innerHTML.substr(24)}}return false;}return true;};}return{init:function () { var spoiler_links = PUNBB.common.arrayOfMatched(function (el) { return (PUNBB.common.hasClass(el, 'md_spoiler_header'))}, document.getElementsByTagName('div'));PUNBB.common.map(function (el){el.onclick = spoiler_switcher_onclick(el)}, spoiler_links);var e = document.getElementsByName(window.location.hash.substring(1))[1];if (!!e){e.style.display='block';var p = e.parentElement;while (p=p.parentElement) { if (p.classList.contains('md_spoiler') && p.offsetWidth==0) { p.style.display = 'block'}}}}};}());PUNBB.common.addDOMReadyEvent(PUNBB.md_spoiler.init);</script>
<script src="https://hms.lostcut.net/extensions/nya_thanks/js/thanks.js"></script>
<script>PUNBB.env.sva_mediajs = {url_swf: "https://hms.lostcut.net/extensions/sva_mediajs"};</script>
<script async src="https://hms.lostcut.net/extensions/sva_mediajs/js/media8.min.js"></script>

<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-20072255-4','auto');ga('send','pageview');</script>
</body>
</html>

