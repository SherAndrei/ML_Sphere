ab-log.ru/smart-house/ethernet/megad-14-in
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
<link rel="shortcut icon" href="/f/favicon.ico" >
<title>MegaD-14-IN - расширяем перечень подключаемого оборудования / Умный Дом по Ethernet / Умный дом своими руками / ab-log.ru</title><scripT language=JavaScript src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type=text/javascript></script>
<link href="/f/main.css" rel="stylesheet" type="text/css" />
<scripT language=JavaScript src="/f/utils.js" type=text/javascript></script>
</head>

<body><div id="cnv"><a id="ablog" href="/"><img src="/f/ab-log.png" width="185" height="42" /></a><a id="goshop" href="/smart-house/shop"></a><a id="goforum" href="/forum"></a><form action="/page.php" method="post" id="sb"><input type="hidden" name="s" value="1"> <input name="q" type="text" class="in"><input type="submit" value="найти" class="but"></form><ul id="m1"><li><a href="/smart-house" class=current><img src="/f/mp1.png" width="248" height="24" /></a></li><li><a href="/build" ><img src="/f/mp2.png" width="227" height="24" /></a></li><li><a href="/garage" ><img src="/f/mp3.png" width="191" height="24" /></a></li></ul><div id="mid"><div id="lb"><ul id="m2"><li><a href=/smart-house/info>Умный дом своими руками. Общие принципы</a></li><li><a href=/smart-house/info-flow>Умный дом своими руками. Схема информационного обмена</a></li><li class="ethernet" ><a href=/smart-house/ethernet class="current">Умный Дом по Ethernet</a><ul><li><a href=/smart-house/ethernet/megad-328>MegaD-328 - Готовый многофункциональный контроллер Умного Дома</a></li><li><a href=/smart-house/ethernet/megad-2561>MegaD-2561 - новая ступень в развитии проекта MegaD</a></li><li><a href=/smart-house/ethernet/megad-14-in class="current">MegaD-14-IN - расширяем перечень подключаемого оборудования</a></li><li><a href=/smart-house/ethernet/megad-328-api>MegaD-328 API (версия прошивки 3.34 и выше)</a></li><li><a href=/smart-house/ethernet/megad-328-firmware-upgrade>Перепрошивка MegaD-328/2561 по сети</a></li><li><a href=/smart-house/ethernet/megad-panel>MegaD-Panel - простой Web-интерфейс для управления MegaD-328</a></li><li><a href=/smart-house/ethernet/megad-2561-ssd1306>OLED дисплей SSD1306 в интерьере</a></li><li><a href=/smart-house/ethernet/oled-megad-328>Использование OLED I2C дисплея с MegaD-328</a></li><li><a href=/smart-house/ethernet/temt6000-test>И снова про измерение освещенности. Тестирование TEMT6000</a></li><li><a href=/smart-house/ethernet/megad-2r>MegaD-2R - дело за малым</a></li><li><a href=/smart-house/ethernet/avr>Многофункциональный Ethernet-контроллер Умного Дома на AVR своими руками</a></li><li><a href=/smart-house/ethernet/gas-sensors>MegaD-328 и датчики газа. Определяем утечки и другие изменения в воздухе</a></li><li><a href=/smart-house/ethernet/megad-328-bmp180>MegaD-328 + I2C или подключение датчика давления BMP180</a></li><li><a href=/smart-house/ethernet/htu21d-megad>Датчик температуры и влажности HTU21D для MegaD-328</a></li><li><a href=/smart-house/ethernet/bh1750-megad>Про датчик освещенности BH1750. Что, опять? Да...</a></li><li><a href=/smart-house/ethernet/sensors-adapter-box>Снова про датчики температуры или как не испортить интерьер</a></li><li><a href=/smart-house/ethernet/megad-led-rgb>Управление светодиодной RGB-лентой с помощью MegaD-328</a></li><li><a href=/smart-house/ethernet/megad-co2-mh-z14>Измеряем уровень углекислого газа (СО2) с помощью MH-Z14</a></li><li><a href=/smart-house/ethernet/megad-tsl2591>Сбылась мечта идиота? Тестирование сенсоров TSL2591 и MAX44009</a></li><li><a href=/smart-house/ethernet/light-sensor>Подключение к MegaD-328 датчика освещенности</a></li><li><a href=/smart-house/ethernet/cubieboard-server>Cubieboard2 в роли сервера Умного Дома</a></li><li><a href=/smart-house/ethernet/megad-2561-ir>Управление техникой по ИК каналу с помощью MegaD-2561</a></li><li><a href=/smart-house/ethernet/megad-alarm>Подключение к MegaD-328 датчиков движения. Сигнализация по Ethernet</a></li><li><a href=/smart-house/ethernet/megad-fire-alarm>Подключение к MegaD-328/2561 пожарных датчиков</a></li><li><a href=/smart-house/ethernet/garage-gates-automation>До...автоматизация гаражных ворот или как не забыть про цепочку</a></li><li><a href=/smart-house/ethernet/cr2032-megad-test>Тестирование батареек CR2032 с помощью MegaD-328/2561</a></li><li><a href=/smart-house/ethernet/variants>Подборка вариантов совместимых с прошивкой MegaD-328 устройств от пользователей форума</a></li><li><a href=/smart-house/ethernet/light-sensor-outdoor>Как я делал уличный датчик освещенности</a></li><li><a href=/smart-house/ethernet/sound-lights-ethernet>Highway to Hell или цветомузыка по Ethernet</a></li><li><a href=/smart-house/ethernet/megad-2561-7pwm>Вести с полей. Применение в проекте MegaD чипа atmega2561</a></li><li><a href=/smart-house/ethernet/megad-sensor-current>Подключение аналоговых датчиков с выходом типа &quot;ток&quot; к модулям MegaD (инструкция)</a></li><li><a href=/smart-house/ethernet/megad-lcd>Подключение к MegaD-328 ЖК-дисплея</a></li><li><a href=/smart-house/ethernet/u-sensor>Датчик напряжения для MegaD-328/2561</a></li><li><a href=/smart-house/ethernet/ippower-9212>Применение IP Power 9212 Delux - универсальное Ethernet-устройство для управления домом</a></li></ul></li><li><a href=/smart-house/linux>Настройка ОС Linux и разработка домашнего Web-сайта</a></li><li><a href=/smart-house/video_camera_security>Видеонаблюдение дома своими руками. Настройка под Linux</a></li><li><a href=/smart-house/1-wire>Технология 1-wire</a></li><li><a href=/smart-house/heating-automation>Управление отоплением на 1-wire</a></li><li><a href=/smart-house/weather-station>Домашняя метеостанция</a></li><li><a href=/smart-house/shop>Готовые модули и компоненты 1-wire (купить)</a></li><li><a href=/smart-house/mce>Построение медиа/файл сервера на базе Linux</a></li><li><a href=/smart-house/asterisk>Asterisk дома</a></li><li><a href=/smart-house/garden_automation>Автоматизация сада</a></li><li><a href=/smart-house/mercury-230>Учет электроэнергии, считывание информации со счетчика Меркурий 230, протокол счетчика</a></li><li><a href=/smart-house/neural-network>Нейронные сети Умного Дома</a></li><li><a href=/smart-house/speech>Речевые технологии Умного Дома</a></li><li><a href=/smart-house/gadget-control>Дистанционное управление умным домом</a></li><li><a href=/smart-house/beckhoff>Умный Дом на Beckhoff</a></li><li><a href=/smart-house/x10>Технология X10</a></li><li><a href=/smart-house/gsm>GSM-сигнализация для охраны и не только...</a></li><li><a href=/smart-house/wireless>Умный Дом без проводов</a></li><li><a href=/smart-house/misc>Другие готовые решения для идеологии &quot;Умный Дом&quot;</a></li><li><a href=/smart-house/accessories>Электрика и установочные изделия для Умного Дома</a></li><li><a href=/smart-house/notes>Заметки на полях</a></li><li><a href=/forum>Форум</a></li></ul><br><br><font color="#666">Опрос</font><br><hr size="1"><br><h2>Что для Вас Умный Дом?</h2><br><form id="qst" action="/page.php" method="POST"><input type="hidden" name="ID" value="96"><label><input type="radio" name="question" value="1" /> Управление освещением и бытовыми приборами</label><label><input type="radio" name="question" value="2" /> Управление инженерными системами</label><label><input type="radio" name="question" value="3" /> Хранение и распределение медиа-контента</label><label><input type="radio" name="question" value="4" /> Видеонаблюдение, видеосвязь через Интернет</label><label><input type="radio" name="question" value="5" /> Системы безопасности и защиты</label><label><input type="radio" name="question" value="6" /> Другое</label><input type="submit" id="but" value="Ответить" /></form><a href="/smart-house/vote/what-is-smart-home">Результаты</a></div><div id="rb"><div id="cnt"><h1>MegaD-14-IN - расширяем перечень подключаемого оборудования</h1><p class="date">29/06/2015 10:44:32</p><p>
	Проект MegaD-328, принципы которого я описывал в статье &quot;<a href="/smart-house/ethernet/megad-328">Готовый многофункциональный контроллер для Умного Дома</a>&quot;, благодаря своим возможностям, уже получил в определенных кругах широкую известность и популярность. Относительно простое и недорогое устройство, которое даже можно собрать самостоятельно, с открытой прошивкой позволило решать достаточно обширный спектр различных задач. И многие это уже оценили. Но до недавнего времени контроллер MegaD-328 не мог раскрыть весь свой потенциал полностью, так как на сайте был доступен только один исполнительный модуль MegaD-7I7O (7 входов, 7 выходов). А ведь одна из ключевых особенностей контроллера заключается в том, что к нему можно подключать исполнительные модули с различными конфигурациями портов. И вот сегодня речь пойдет о новом исполнительном модуле, который открывает для проекта MegaD новые перспективы.</p>
<p style="text-align: center;">
	<img alt="MegaD-14-IN" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-env2.jpg" style="width: 630px; height: 511px; border-width: 1px; border-style: solid; margin: 10px;" /><br />
	<em>MegaD-14-IN (14 настраиваемых входов)</em></p>
<p>
	Итак, исполнительный модуль MegaD-14-IN, в котором все 14 портов являются входами, но не совсем простыми, а настраиваемыми...</p>
<p>
	И вот примерный перечень оборудования, которое поддерживается новым исполнительным модулем:</p>
<p>
	- Выключатели, кнопки и т.д.<br />
	- Извещатели (датчики протечки, датчики движения, пожарные датчики)<br />
	- Аналоговые датчики на портах P0-P5 (датчики освещенности, ультрафиолета, газа и т.д.)<br />
	- Цифровые температурные датчики DS18B20<br />
	- Цифровые датчики температуры и влажности DHT11/DHT22<br />
	- Считыватели ключей iButton (TM) DS1990A<br />
	- Считыватели ключей Proximity EM-Marine и VIZIT-RF (поддерживающих протокол Dallas)<br />
	- 1-wire Метки DS2401</p>
<p>
	Теперь обо всем более подробно.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-jumpers.jpg" style="width: 630px; height: 441px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Модуль MegaD-14-IN помимо клеммных колодок, необходимых для подключения оборудования, содержит блок из 14 джамперов. Джамперы позволяют для каждого порта задать <strong>аппаратный режим работы</strong> входа.</p>
<p>
	<strong>Верхнее положение</strong> - стандартный вход: выключатели, кнопки, датчики протечки, движения. Словом, все то, что имеет два состояния: включено/выключено, активно/не активно.<br />
	<strong>Нижнее положение</strong> - цифровые датчики DS18B20, DHT11/DHT22, считыватели iButton/EM-Marine, метки DS2401, аналоговые датчики. То есть все то, что работает по цифровым шинам или возвращает определенное значение.</p>
<p>
	Но начнем с простого. С подключения кнопки.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-button3.jpg" style="width: 400px; height: 512px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	С кнопкой все очень просто. Ее подключение такое же как в модуле MegaD-7I7O. Всего два провода, которые никак не связаны с напряжением 220В. Поэтому в качестве проводников для кнопок можно использовать очень тонкие провода. Многие даже используют &quot;витую пару&quot; (UTP). Длина провода также может быть достаточно большой: 100-200 метров. Никакого питания кнопке, разумеется, не требуется. Полярность подключения не важна. Положение джампера - верхнее.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-leak3.jpg" style="width: 400px; height: 554px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Подключение датчика протечки Астра-361 почти ничем не отличается от подключения кнопки. Необходимо только соблюсти полярность (коричневый провод на левую клемму, белый на правую). Стоит сказать, что в качестве датчика протечки можно использовать даже просто два оголенных провода. Чувствительность стандартного входа исполнительного модуля MegaD-14-IN достаточно высока. Положение джампера верхнее.<br />
	Аналогично подключается и датчики движения. Дабы не дублировать информацию, о подключении датчиков движения можно прочитать в статье &quot;<a href="/smart-house/ethernet/megad-alarm">Сигнализация по Ethernet</a>&quot;. С датчиками движения также имеет значение полярность подключения. В материале по ссылке об этом написано.</p>
<p>
	Ну а теперь самое интересное...</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/DS18B20-external.jpg" style="width: 400px; height: 301px; border-width: 1px; border-style: solid; margin: 10px;" /><br />
	<em>Всепогодный датчик температуры DS18B20</em></p>
<p>
	Проект MegaD-328 теперь поддерживает 1-wire датчики DS18B20. Наконец-то! - скажет читатель. Да, долгое время я сопротивлялся реализации поддержки DS18B20 контроллером MegaD-328. Но все меняется, и пользователям удалось убедить меня в необходимости внедрения этой функции. На фотографии выше вы можете видеть цифровой датчик DS18B20 во влагозащищенном корпусе от DFRobot. Такое исполнение значительно дороже, но позволяет использовать датчик на улице и во влажных помещениях.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-ds18b20-ext.jpg" style="width: 400px; height: 557px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Обратите внимание. Джампер для порта P10, к которому мы подключает датчик температуры мы перевели в <strong>нижнее</strong> положение.<br />
	<strong>Желтый</strong> провод - данные, подключаем к правой клемме порта.<br />
	<strong>Черный</strong> провод - землю и <strong>Красный</strong> провод - питание, подключаем к левой клемме порта.<br />
	Для тех, кто не знаком с технологией 1-wire, цифровые датчики DS18B20 могут работать без внешнего питания, используя так называемое &quot;паразитное&quot; от линии данных. В данном случае я подключил датчик именно так, с использованием паразитного питания. Производитель рекомендует в этой ситуации соединить вывод питания с землей, что мы и сделали (желательно это сделать как можно ближе к датчику). Не стоит беспокоится по поводу подключения датчиков температуры на паразитном питании. В этом режиме они работают ничуть не хуже, чем с питанием, а длина провода может быть весьма существенной и измеряться десятками метров. Зато подключение очень удобное - достаточно зажать пару проводов в клеммы порта MegaD-14-IN и вот уже датчик виден из браузера!<br />
	Обязательно подключать к датчку питание необходимо при измерении температур выше 100 градусов (например, в сауне). Для этого достаточно соединить красный провод к клемме питания +3.3В (расположена в левом нижнем углу, слева от блока джамперов) исполнительного модуля MegaD-14-IN.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-328-ds18b20-settings1.gif" style="width: 308px; height: 309px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Для P10, к которому мы подключили датчик, необходимо выбрать тип порта &quot;DSen&quot;, а тип сенсора &quot;1W&quot;.<br />
	К одному порту можно подключить один датчик. Это позволяет значительно упростить жизнь конечному пользователю, так как нет необходимости в поддержке адресации и в коммутации датчиков шиной. В реальных домашних условиях особенно для начинающих пользователей намного удобнее подключать датчики звездой. Один датчик - один порт. Да и программное обеспечение в этом случае и проще и более унифицированное. Ведь работа с датчиком температуры ничем принципиально не будет отличаться от работы с кнопкой или любым аналоговым датчиком.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-328-ds18b20-settings2.gif" style="width: 279px; height: 306px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Но самое интересное заключается в том, что MegaD-328 может не только прочитать значение датчика температуры и передать его на сервер, но и работать в режиме &quot;локального&quot; или &quot;удаленного&quot; термостата. Как и в случае с АЦП-портами, мы можем настроить порт таким образом, чтобы контроллер сам следил за значениями температурного датчика и при необходимости включал или выключал нагрузку.<br />
	Как это сделать?</p>
<p>
	Mode: &lt;&gt; (контроллер будет следить за проходом температуры в обе стороны)<br />
	Val: 36.60 (пороговое значение)<br />
	Act: сценарий, например 8:3</p>
<p>
	В такой конфигурации (если P8 у нас является выходом), контроллер при температуре выше 36.60 градусов включит порт P8, а при температуре ниже выключит.<br />
	Команда &quot;3&quot; означает, что выход синхронизирован со входом. А это гарантирует, что при превышении порога выход будет всегда включен, независимо от того, в каком состоянии он находился до того (тогда как команда &quot;2&quot;, например, инвертирует состояние порта). Подробнее о командах можно прочитать в <a href="/smart-house/ethernet/megad-328">базовой статье о MegaD-328</a>.</p>
<p>
	Но ведь в данном случае мы имеем дело с модулем MegaD-14-IN. А значит у него нет выходов. Правда. Но правда и то, что у нас есть команда сетевого сценария Net. Таким образом мы можем отправить команду другому устройству на переключение порта, даже если у нас нет сервера!</p>
<p>
	192.168.0.15/sec/?cmd=8:3 будет означать, что устройство свяжется с другим контроллером, у которого есть выходы и также в нужный момент переключит порт. Что важно, в данном случае также применимы команды &quot;3&quot; и &quot;4&quot;, синхронизирующие работу входа и выхода. Контроллер сам преобразует их в &quot;1&quot; или &quot;0&quot; при отправке другому устройству.</p>
<p>
	Но вернемся к подключению датчиков DS18B20. Влагозащищенные датчики требуются редко. А как подключать обычные датчики DS18B20 в корпусе ТО-92 ? Да точно также!</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-ds18b20.jpg" style="width: 400px; height: 573px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Берем обычный датчик DS18B20. У него три ножки:<br />
	<br />
	<strong>Левая</strong> - земля. Соединяем ее с <strong>левой</strong> клеммой входа (синий провод на фото)<br />
	<strong>Центральная</strong> - данные. Соединяем ее с <strong>правой</strong> клеммой входа (белый провод на фото)<br />
	<strong>Правая</strong> - питание. Согласно рекомендациям производителя соединяем ее с <strong>землей</strong>.</p>
<p>
	Для наглядности и простоты я воткнул датчик в клеммную колодку. Можно использовать обычные клеммники из магазинов электротоваров, можно припаять провода непосредственно к датчику. Главное - никакой дополнительной обвязки <em>не требуется</em>!</p>
<p>
	Дополнительная обвязка не нужна и для цифровых датчиков температуры и влажности DHT11 / DHT 22</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-dht22.jpg" style="width: 400px; height: 452px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	DHT11 / DHT22 также как DS18B20 подключаются непосредственно к любому порту исполнительного модуля MegaD-14-IN. Положение джампера нижнее. Но в отличие от DS18B20 этим датчикам требуется питание. Его можно взять тут же из специальной клеммы. Питание датчика 3,3 Вольта.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-328-dht-settings2.gif" style="width: 199px; height: 244px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Настройка порта аналогична DS18B20 с той лишь разницей, что тип сенсора нужно выбрать DHT11 или DHT22. В данный момент функция локального и удаленного термостата для датчиков DHT не реализована. В остальном датчики полностью работоспособны. Стоит только заметить, что в работе этих датчиков есть одна особенность. Для получения текущего значения необходимо отправить запрос дважды с небольшой задержкой. Дело в том, что в момент взаимодействия с датчиком, считываются значения на момент предыдущего опроса. Это не ошибка в коде контроллера, это специфика работы самих датчиков.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-ibutton.jpg" style="width: 400px; height: 556px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Датчиками температуры возможности MegaD-328 и исполнительного модуля MegaD-14-IN не ограничиваются. К любому порту этого исполнительного модуля можно подключить считыватель ключей iButton (DS1990A или попросту &quot;таблетки&quot;). Раньше для работы со считывателем я использовал отдельный адаптер DS9490R и специальный скрипт, который постоянно опрашивал шину. Свой опыт я описал в статье, где рассказывал об <a href="/smart-house/asterisk/sip-domofon-svoimi-rukami">автоматизацию калитки</a>. Такое решение мне не очень нравилось. Это же совсем не забота сервера - в бесконечном цикле слать десятки запросов в секунду. Ведь программа owfs согласно своей идеологии ничего сама не делает. Это лишь шлюз к шине 1-wire. Поэтому обязательно нужна программа, которая висит в памяти компьютера и периодически проверяет, не появился ли какой-нибудь элемент на шине. Все принципиально меняется с контроллером MegaD-328. Именно он берет на себя всю черновую работу. Достаточно подключить двумя проводами считыватель к исполнительному модулю (<strong>внешнее</strong> кольцо - <strong>левая</strong> клемма, <strong>центральный</strong> контакт - <strong>правая</strong>). И как только ключ будет в считывателе, MegaD-328 стандартным способом через HTTP сообщит серверу адрес ключа. При этом контроллер отправляет информацию на сервер только в том случае, если прошла проверка контрольной суммы (CRC8). Если адрес ключа считался неверно, MegaD-328 автоматически заново считает информацию.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-328-ibutton-server.gif" style="width: 643px; height: 100px;" /></p>
<p>
	Вот, что появилось в логах, когда я прислонил ключ к считывателю три раза. Важно, что сообщается номер порта! Это позволяет идентифицировать какой именно считыватель сработал, если их несколько. В случае с сервером пришлось бы для каждого считывателя использовать персональный адаптер DS9490R. На сервер передается адрес ключа, и вызываемому скрипту достаточно только проверить (в базе данных или прямо в коде) разрешен ли доступ этому ключу на территорию или в дом.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-328-ibutton-settings.gif" style="width: 194px; height: 198px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Настройка порта совсем уж простая. Необходимо только указать тип сенсора &quot;iB&quot;.</p>
<p>
	Однако ключи таблетки ныне используются все реже. Сейчас куда более популярны беспроводные ключи Proximity EM-Marine. А поскольку выходной интерфейс у считывателей ключей EM-Marine как правило Dallas (он же 1-wire), то эти считыватели можно совершенно спокойно использовать вместе с MegaD-328, интегрируя технологию EM-Marine в общую систему Умного Дома минуя всякие специализированные контроллеры.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-em-marine.jpg" style="width: 400px; height: 532px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Схема подключения зависит от считывателя. На фото изображен один из самых распространенных и дешевых (стоимость в районе 500 руб) считывателей CP-Z2L.<br />
	<strong>Красный провод</strong> - питание +12В<br />
	<strong>Черный провод</strong> - земля - левая клемма<br />
	<strong>Белый провод</strong> - данные - правая клемма<br />
	<strong>Синий провод</strong> - для однократной передачи адрес ключа соединяется с шиной данных.</p>
<p>
	Настройка порта такая же как и для &quot;таблеток&quot; DS1990A. Считыватель прекрасно работает как с ключами EM-Marine, так и с ключами, продаваемыми под брендом Vizit RF (что, по всей видимости, одно и то же).<br />
	Важно! Не все считыватели беспроводных ключей корректно поддерживают протокол Dallas Touch Memory. Например, считыватель RD-3 от VIZIT не полностью совместим с 1-wire, а потому работать не будет.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-ds2401.jpg" style="width: 550px; height: 418px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	И это еще не все. Поддержка протокола 1-wire, датчиков DS18B20 и ключей DS1990A теоретически означала возможность считывания адресов меток DS2401. Для пробы я подключил метку прямо к клеммной колодке порта. Левая ножка - земля (левая клемма). Центральная ножка - данные (правая клемма). Правая ножка не используется. Разумеется, контроллер без проблем считал адрес с этой микросхемы. Где это можно использовать? Ну, например, в охранных системах, сдублировав метки с концевиками окон или дверей, соединенных общей шиной. В этом случае по адресу метки можно определить какая &quot;зона&quot; сработала или какая дверь открылась. В данный момент прошивка поддерживает единовременное считывание только одной активной метки на шине. Но есть наработки по реализации 1-wire Search Algorithm, позволяющего считывать и отправлять на сервер адреса всех подключенных к шине &quot;активных&quot; элементов.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-14-in-analog-sensor.jpg" style="width: 500px; height: 529px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Наконец, к исполнительному модулю MegaD-14-IN можно также подключать и любые аналоговые датчики. Функция ADC (АЦП) доступна для портов P0-P5. Положение джампера - нижнее. Необходимо только убедиться (для датчиков с питанием выше 3,3В), что выходное напряжение не более опорного напряжения контроллера 3,3В. При необходимости напряжение можно ограничить резистором.<br />
	На фото Analog Grayscale Sensor. Питание +3,3В из исполнительного модуля. Земля - левая клемма порта P3, сигнал - правая клемма порта P3.</p>
<p style="text-align: center;">
	<img alt="" src="/files/Image/smart_house/ethernet/MegaD-14-IN/megad-328-adc-settings.gif" style="width: 270px; height: 257px; border-width: 1px; border-style: solid; margin: 10px;" /></p>
<p>
	Тип порта ADC. Для данного типа порта также доступна функция &quot;термостата&quot;, описанная выше для DS18B20, когда при превышении определенного значения можно переключать выходы.</p>
<p>
	Таким образом исполнительный модуль MegaD-14-IN позволяет на практике использовать идеи и решения, которые заложены в прошивку контроллера MegaD-328.<br />
	Описанные в тексте возможности актуальны для версии прошивки 3.34 beta 7 и выше.</p>
<p>
	&nbsp;</p>
<p><em>Автор: <strong><a href="/srv/sendmail">Andrey_B</a></strong><br>Любое использование материалов сайта возможно только с разрешения автора и с обязательным указанием источника.</em></p><br><hr size="1"><h2>Добавить комментарий:</h2><form action="/page.php" method="POST" id="so"><input type="hidden" name="ID" value="185"><input type="text" id="name" name="Name" style="display:none" /><label>Имя</label><input type="text" name="msg_name" class="in"><label>Е-mail (необязательно, не отображается на сайте)</label><input type="text" name="msg_email" class="in"><label>Комментарий</label><textarea name="msg_text" class="in"></textarea><p><label for="word"><span>[!] </span>Какое число изображено?</label> <input name="word" class="in" id="word" /><img src="/cadmin/smail/smail.php" /><p><input type="submit" value="отправить комментарий" class="but"></form><br><hr size="1"><a name="comm"></a>Сортировка комментариев: <b>Последние сверху</b> | <a href="/page.php?ID=185&cs=1#comm">Первые сверху</a><br><br><p>2017-03-04 11:21:50 | <strong>Andrey_B</strong><br><span class="comtxt autor">Василий, цифровые датчики можно подключать на один порт, если у датчиков действительно отличаются адреса.<br>Так, например, на один порт можно подключать несколько DS18B20.<br>На один порт можно подключать несколько DS2401. Это 1-wire метка, которую можно применять с герконами и прочими &quot;сухими контактами&quot;. DS2401 вешается последовательно с кнопкой и при замыкании контакта оказывается &quot;в сети&quot;. Настройка порта для такой функции DSen->iB. Данная функция работает только с цифровыми портами (портами в режиме цифрового входа, для MegaD-14-IN нижнее положение джампера).<br>На один порт можно подключить несколько I2C устройств разного типа, например, легко можно повесить HTU21D, TSL2591, BMP180 на одни и те же порты. Иногда есть возможность изменить существующий адрес по умолчанию, перепаяв резистор на плате датчика, но в прошивке поддерживаются только адреса по умолчанию для I2C-датчиков. Это, впрочем, можно решить с помощью I2C-PHP. Изменение аппаратного адреса имеет смысл, если очень хочется повесить на один порт I2C-датчики одного типа.</span></p><br><p>2017-03-03 17:35:26 | Василий<br><span class="comtxt">А можно подключить на один канал разные виды датчиков но из одного места тогда в принципе будет понятно откуда он сработал. Грубо говоря комната1 с блоком датчиков (дым, температура, геркон, присутствие). такой же блок в другой комнате. Или оно так не работает. <br>Просто я думал если датчики цифровые или 1-wire то у них как бы есть что-то наподобие id устройства на ветке за счет чего можно определить где именно он находится. <br>Тогда очень много выходов получается нужно будет задействовать, даже если герконы не считать.<br>Ну то что счетчики и приводы лучше на отдельный порт это в общем то понятно.</span></p><br><p>2017-03-03 15:27:06 | <strong>Andrey_B</strong><br><span class="comtxt autor">DHT22 несколько на один порт нельзя.<br>ИК-извещатели теоретически можно. Но нельзя будет понять какой именно сработал.<br>Пожарные извещатели можно. Не более 4. Но нельзя будет понять какой именно сработал.<br>Датчик протечки можно, но нельзя будет понять какой именно сработал.<br>Счетчики? На один порт? И что порт будет считать?<br>Геркон можно, но нельзя будет понять какой именно сработал.<br>Приводы кранов можно подключать к модулям, у которых есть выходы (MegaD-7I7O, MegaD-14-R), но в этом случае все краны, подключенные к одному будут включаться/выключаться одновременно.</span></p><br><p>2017-03-03 12:45:12 | Василий<br><span class="comtxt">Добрый день. Подскажите пожалуйста на чем можно реализовать данную вещь?<br>что из этого можно паралелить чтобы использовать один вход.<br>темп+влажность 7-8шт<br>присутсвие	5-7шт<br>датчик дыма 	5шт<br>датчик протечки 6шт<br>показания Электросчетчик 1шт<br>показание воодосчетчик 2шт<br>геркон 15-20шт<br>приводы кранов 5шт <br>освещение 6 групп я правильно понимаю что в теории если на одной группе несколько источников то необходимо выход под каждый источник так как иначе он будет управлять всей группой сразу.<br>Прокладываться будет UTP звездой на конце ее планировал либо группу датчиков либо если так нельзя то вешать на каждую пару по датчику.</span></p><br><p>2017-02-08 15:23:39 | <strong>Andrey_B</strong><br><span class="comtxt autor">Павел, конечно, можно.</span></p><br><p>2017-02-08 12:12:22 | Павел<br><span class="comtxt">Землю с датчиков DHT-22 и DS18B20 же не обязательно подключать непосредственно к каждому входу контроллера 14-IN? Можно просто на общую шину?</span></p><br><p>2017-02-08 06:58:55 | Sensei<br><span class="comtxt">Продублирую вопрос, народу может интересно.<br>Возможно ли подключить NFC reader, чтобы использовать nfc метки?<br>Очень удобный стандарт который уже присутствует в банковских картах, метро, телефонах, кольцах.</span></p><br><p>2016-12-05 09:56:41 | <strong>Andrey_B</strong><br><span class="comtxt autor">Михаил, я не эксперт по OpenHAB, но не вижу каких либо причин, мешающих работе со считывателями в OpenHAB.</span></p><br><p>2016-12-05 06:57:39 | Михаил<br><span class="comtxt">CP-Z2L (EM-Marine) будет отображаться в openhab или требуется только Ваша версия сервера?</span></p><br><p>2016-10-05 23:46:40 | <strong>Andrey_B</strong><br><span class="comtxt autor">Dark, теоретически подключить можно, но нужно тестировать. Без тестирования гарантировать совместимость не могу. Может быть, закажу подобную штуку ради проверки.</span></p><br><div id="ex"></div><p>2016-10-03 23:05:07 | Dark<br><span class="comtxt">Добрый вечер! Подскажите, как правильно подключить это устройство: https:/ru.aliexpress.com/item/5V-DC-4channel-RF-Receiver-Transmitter-Module-Output-DC5V-4CH-high-Level-TTL-Transceiver-Module-Relay/32233194256.html?spm=2114.10010208.1000013.9.72DqnT&scm=1007.13339.33317.0&pvid=c44535a3-2417-4624-8204-ea15a3953c02&tpp=1 к mega14in, спасибо!</span></p><br><p>2016-09-10 16:25:07 | <strong>Andrey_B</strong><br><span class="comtxt autor">Михаил, работа индикации в исполнительном модуле никак не зависит от прошивки. Она реализована аппаратно. Для MegaD-14-IN она работает ТОЛЬКО при замыкании контактов при верхнем положении конфигурационного джампера (режим &quot;сухого контакта&quot;).</span></p><br><p>2016-09-10 13:36:09 | Михаил<br><span class="comtxt">При работе порта в режиме OUT лампочка индикатор не загорается, когда как в режиме IN всегда загорается при поступающем сигнале. Может быть добавить в прошивку чтобы при включении порта в режиме работы OUT тоже светодиод-индикатор горел? Спасибо.</span></p><br><p>2016-08-04 10:46:52 | <strong>Andrey_B</strong><br><span class="comtxt autor">MegaD-14-IN может точно &quot;отдать&quot; 500мА. Поэтому на него можно повесить 25 датчиков, потребляющих по 20мА.</span></p><br><p>2016-08-03 17:18:51 | <strong>Andrey_B</strong><br><span class="comtxt autor">Андрей, то, что считыватель греется - это нормально.<br>По поводу длины провода. Эксперименты не проводил, поэтому точной информации дать не могу. Попробую запланировать такие испытания. На всякий случай проверьте напряжение на конце провода. Может быть, не хватает.</span></p><br><p>2016-07-30 17:26:01 | Руслан<br><span class="comtxt">Хочу запитать от MegaD-14-IN несколько датчиков движения (плюс на +12В, минус на GND). Ток потребения датчика =20 мА. Можно ли так сделать? Вообще, какую суммарную нагрузку можно подключать к этим клеммам питания на Меге?</span></p><br><p>2016-07-25 09:15:03 | Андрей<br><span class="comtxt">Присоединяюсь к вопросу Алексея про длину длину провода. Подключил вчера и не работает считыватель, длина около 8 метров(витая пара). И еще он немного нагревается, так и должно быть?</span></p><br><p>2016-07-24 14:45:04 | Алексей<br><span class="comtxt">Подскажите,на какой длине провода нормально работает считыватель CP-Z2L? Подключаю к модулю напрямую - работает. Подключаю через неэкранированную витую пару порядка 10-15 метров - не работает. Провод без обрывов, в режиме кнопки работает.</span></p><br><p>2016-06-09 11:27:03 | <strong>Andrey_B</strong><br><span class="comtxt autor">На входах исполнительных модулей MegaD присутствует, в зависимости от типа модуля, напряжение от 3,3 до 12 В. Поэтому и нужно соблюдать полярность при подключении датчиков - OUT датчика на IN модуля, GND на GND.</span></p><br><p>2016-06-08 22:42:17 | Виталий<br><span class="comtxt">С датчиками ясно. А вот на стороне контроллера, какая разница с какой стороны замкнутся контакты?</span></p><br><div id="ex"></div><p>2016-06-08 15:13:41 | <strong>Andrey_B</strong><br><span class="comtxt autor">Полярность для кнопок (&quot;сухих контактов&quot;) значения не имеет, так как у них нет полярности. По поводу датчиков. Выход датчиков представляет собой транзисторный ключ на транзисторе проводимости n-p-n, то есть элемент, работа которого зависит от полярности приложенного напряжения. На коллекторе должен быть +, на эмиттере -</span></p><br><p>2016-06-08 03:13:15 | Виталий<br><span class="comtxt">Андрей, подскажите; почему нужно соблюдать полярность при подключении кнопок или датчиков протечки, наличия 220В? </span></p><br><p>2016-06-04 11:41:20 | <strong>Andrey_B</strong><br><span class="comtxt autor">Александр, подключать цифровые датчики к MegaD-7I7O можно, но для этого нужно немного переделать входы. Как это сделать я писал на форуме. Хочу заметить, что переделанные таким образом входы будут хорошо работать с любыми цифровыми датчиками, но максимальная дальность при подключении кнопок (&quot;сухих контактов&quot;) резко уменьшится. Также при заказе можно запросить переделку входов в &quot;заводских&quot; условиях.</span></p><br><p>2016-06-04 05:21:47 | Александр<br><span class="comtxt">Можно ли считывать DHT-11..22, BMP180, HTU21D через 7I7O модуль?</span></p><br><p>2016-04-25 10:27:13 | <strong>Andrey_B</strong><br><span class="comtxt autor">Фмут, в режиме &quot;кнопки&quot; входы защищены опторазвязкой. В режиме &quot;цифрового датчика&quot; защиты нет, так как в этом режиме ее трудно или невозможно предусмотреть из-за широкого спектра различных датчиков, которые могут быть использованы с этим модулем.</span></p><br><p>2016-04-25 08:33:14 | Фмут<br><span class="comtxt">А как порты защищены от внешнего воздействия? Перенапряжения или большого тока? Есть схема модуля? </span></p><br><p>2016-03-29 11:24:33 | <strong>Andrey_B</strong><br><span class="comtxt autor">Андрей, вы можете сделать предзаказ и тогда вы точно сможете получить устройство. Так получалось, что количество предзаказов превышало объем производства, поэтому в свободную продажу эти комплекты не поступали. Но сейчас объем производства увеличен, поэтому, думаю, скоро устройство появится в наличии. Но, повторюсь, вы всегда можете оформить предзаказ. Это не только не потребует предоплату, но вы сможете получить комплект с 3% скидкой.</span></p><br><p>2016-03-29 09:49:24 | Андрей<br><span class="comtxt">А устройство MegaD-328-IN Kit вообще когда-нибудь будет в продаже?. Сроки поставки на сайте ПОСТОЯННО переносятся! Зачем вставлять в прайс-лист устройство которое не возможно купить??? Сделал проводку в расчете на это устройство - теперь получается надо искать что-то другое и все переделывать!</span></p><br><p>2016-03-05 12:34:50 | <strong>Andrey_B</strong><br><span class="comtxt autor">Igor78, вы правильно поняли. Особенности в том, что порт будет подтянут к +3,3 через резистор 4,7 кОм. В некоторых случаях, в зависимости от того, что конкретно будет подключаться к порту, это нужно учитывать.</span></p><br><p>2016-03-03 09:37:27 | Igor78<br><span class="comtxt">Андрей, а правильно я понял, что при нижнем положении джемпера, и установки порта в режим   OUT (SW или PWM) мы получаем не вход, а выход аналогичный прямому выходу с контроллера (3.3 V)? Если это так, то есть ли какие-то особенности его использования в таком режиме по сравнению с прямым подключением в порту контроллера? И еще вопрос: в чем отличие версии 6.2 от версии 6.1?</span></p><br><div id="ex"></div><p>2016-02-25 16:34:48 | <strong>Andrey_B</strong><br><span class="comtxt autor">Никита, к одному MegaD-14-IN можно подключить 14 датчиков.<br>Чисто технически можно подключить и шиной, но для этого нужно модифицировать прошивку. Для реализации этой функции не хватает памяти в микроконтроллере, поэтому из модифицированной прошивки придется что-то убрать, например, работу с DHT11/22.<br>Еще можно воспользоваться штатными средствами типа DS9490R. Я правда не знаю поддерживает ли этот адаптер OpenHAB.<br></span></p><br><p>2016-02-25 14:59:41 | Никита<br><span class="comtxt">Andrey_B То есть для измерения температуры с Mega-D нужно витую пару (420,5) кинуть звездой к каждому датчику? Одного Mega-D-14in хватит для 7 или 14 датчиков? А без пайки можно с шины с 7-14 датчиков как-то считать показания в openhub? Есть какие-нибудь устройства? </span></p><br><p>2016-02-25 11:53:32 | <strong>Andrey_B</strong><br><span class="comtxt autor">Никита, в данный момент один датчик - один порт.<br>В дальнейшем, думаю, эту проблему можно будет решить. Возможно, уже на новом микроконтроллере.</span></p><br><p>2016-02-25 10:02:22 | Никита<br><span class="comtxt">Подскажите, к этому прибору датчики DS18B20 подключаются по 1 датчику на порт? Или шиной на один порт? Как можно с помощью Ваших разработок подешевле и попроще организовать измерение температуры воздуха в 10-12 точках и передать их на уровень OpenHUB? </span></p><br><p>2016-02-12 23:38:03 | <strong>Andrey_B</strong><br><span class="comtxt autor">Александр, это поле Script в общих настройках Config. Не в настройках порта.</span></p><br><p>2016-02-12 22:09:50 | Александр<br><span class="comtxt">Андрей, а где вы прописываете, что при поднесении ключа вызывать именно test-md.php? Ведь в настройках порта стоит только тип DSen / 1B и нет поля для имени скрипта?</span></p><br><p>2016-02-12 21:46:48 | <strong>Andrey_B</strong><br><span class="comtxt autor">Александр, скрипт вызывается только в момент передачи данных с информацией о ключе. Никакого бесконечно цикла нет. Скрипт получает данные напрямую и никакие логи не читает.</span></p><br><p>2016-02-12 20:45:52 | Александр<br><span class="comtxt">Андрей, подскажите, пожалуйста, по поводу считывателя Cpz-2l - как на сервере обработать момент, когда поднесен ключ? У вас на скриншоте вызывается скрипт test-md.php - где указывается имя скрипта? Правильно ли я понимаю, что на сервере все равно должен крутится скрипт в бесконечном цикле, читающий лог apache на предмет появления сообщений, как у вас на скриншоте?</span></p><br><p>2016-02-02 22:12:56 | Андрей<br><span class="comtxt">Эдуард, а в чем проблема добавить расширитель портов? Взять исходник и дописать.</span></p><br><p>2016-02-02 22:10:47 | Андрей<br><span class="comtxt">Не-не. Я пишу свой контроллер, с мультисетями 1-wire (до 8 сетей) с суммарным количеством устройств не менее 64. Прочий функционал - аналогичен, за исключением &quot;автономных команд&quot;. Места в eeprom маловато. А на каждое 1-wire устройство надо 8 байт адреса, 3 бита на номер сети, 5 бит &quot;конфига&quot; (например для 2406 как ключа).  Проще и лучше сервер резервировать ИМХО.</span></p><br><div id="ex"></div><p>2016-01-31 21:07:32 | Эдуард<br><span class="comtxt">Я про 20 выключателей спросил к тому, что не хватает входов даже у 2-х исполнительных модулей 7+14. Еще же нужно и  исполнительными уст-ми управлять. Получается нужно еще мегу 328 ставить? </span></p><br><p>2016-01-29 12:35:08 | <strong>Andrey_B</strong><br><span class="comtxt autor">Эдуард, во-первых, устройство само сообщает о факте нажатия кнопки. Во-вторых, есть режим get=all, когда устройство сообщает состояние всех своих портов. Контроллер на базе atmega2561 будет дороже, чем atmega328, поэтому по стоимости, возможно, выйдет примерно одинаково, что 2561 + 2 исполнительных модуля, что два равнозначных комплекта на базе 328.</span></p><br><p>2016-01-29 10:28:00 | Эдуард<br><span class="comtxt">Подожду версии с возможностью подключения 2-х исполнительных модулей: 7i7o и 14i. И как можно считывать состояние кнопок освещения, когда этих кнопок более 20, включая несколько проходных выключателей? </span></p><br><p>2016-01-22 18:53:23 | <strong>Andrey_B</strong><br><span class="comtxt autor">Igor2091, если вопрос заключается в том, можно ли сэкономить провода для земли и питания, то да, можно. Можно даже не использовать питание, тогда достаточно будет четырех проводов. Однако стоит сказать, что на длинных участках надежность такого подключения будет ниже. Надежность и стабильность на длинных участках можно достичь если использовать свитые провода витой пары (земля-данные). Отдельно подчеркну, что в текущей реализации прошивки, к одному порту можно подключить только один датчик. Подключение датчиков шиной будет обсуждаться в дальнейшем.</span></p><br><p>2016-01-22 16:10:32 | Igor2091<br><span class="comtxt">Правильно ли понимаю - для подключения трех  датчиков DS18B20 в одной локации достаточно шлейфа из 5 проводов до контроллера ?</span></p><br><p>2016-01-12 12:16:24 | <strong>Andrey_B</strong><br><span class="comtxt autor">Владимир, возможно, в следующей версии контроллера появится возможность подключения двух исполнительных модулей. Но реализовано это будет с помощью двух отдельных шлейфов. Тогда останется полная совместимость со всеми ранее выпущенными исполнительными модулями.</span></p><br><p>2016-01-12 05:47:32 | Владимир<br><span class="comtxt">Было бы очень замечательно подключать 2 модуля, прям вот очень хотелось бы. Шлейф сделать двойной как раньше на IDE порты и подключать, а то 2 полноценных устройства это отдельные кабели для ethernet отдельная мега, которая стоит отделных денег, поддерживаю Кирилла чтоб у меги была возможнось подключения 2-х модулей</span></p><br><p>2015-12-29 11:25:49 | <strong>Andrey_B</strong><br><span class="comtxt autor">Кирилл, к одному контроллеру можно подключить только один исполнительный модуль. В вашем случае нужно использовать 2 или более полноценных комплекта. DS18B20 на один канал параллельно пока вешать нельзя, но не исключаю, что такая возможность появится в будущем.</span></p><br><p>2015-12-28 22:56:56 | Кирилл<br><span class="comtxt">Скажите,  можно ли к одной меге подключить 2 исполнительных устройства? Скажем 7170 и 14IN? Или нужно в таком случае делать 2 паралельных меги? <br>Мой проект насчитывает 9 нагрузок (лампочки, вентилятор и сервопривод штор) и 17 передающих устройств (датчики и кнопки). Какая конфигурация оборудования сможет все это в себе уместить? Или может есть способ свести несколько датчиков в один канал? </span></p><br><p>2015-12-08 17:19:28 | <strong>Andrey_B</strong><br><span class="comtxt autor">Павел, если говорить языком формальностей, то минимальная температура определяется минимальной температурой компонентов, которые применяются в устройстве. Для некоторых компонентов производители заявили работу от 0 градусов, поэтому формально минимальная температура для устройства 0 градусов. С другой стороны пользователи успешно используют устройства при температурах до -20 градусов. Поэтому скажу так, с очень большой долей вероятности, устройство без проблем будет работать при температурах по крайней мере до -15 градусов, но все же дать 100% гарантию не могу.<br>По влажности вопрос специально не изучался. Устройство, разумеется, не герметично, а значит максимальная влажность примерно такая же, как у любого электронного устройства общего назначения.</span></p><br><div id="ex"></div><p>2015-12-08 15:42:47 | Павел<br><span class="comtxt">Добрый день! В каких условиях работают ваши контроллеры (диапазон температур, влажность)? <br>Будут ли они работа в неотапливаемых помещениях?  </span></p><br><p>2015-12-07 15:05:58 | USA<br><span class="comtxt">Andrey_B, Ok, не учел то что ресурсы у Меги ограничены.<br><br>А планируется обеспечить возможность подключения к 14IN сразу нескольких DS18B20/DS2401 на шине к одному входу?<br>Чтобы к нескольким датчикам, расположенным в одном месте, тянуть только один кабель.</span></p><br><p>2015-12-07 12:02:47 | <strong>Andrey_B</strong><br><span class="comtxt autor">USA, если мы говорим о чипе atmega328, то в текущий момент каждый байт памяти крайне дорогой ресурс. С другой же стороны, распарсить ответ на сервере - это сущий пустяк, это даже не строчка, а полстрочки кода. Я не вижу тут какой-либо проблемы вовсе. А использовать драгоценную память на то, чтобы отдать результат вот так, а не иначе просто жалко. Ведь эту память можно использовать на по-настоящему важные задачи.</span></p><br><p>2015-12-05 15:41:55 | USA<br><span class="comtxt">Андрей, вот у меня подключен датчик DS18B20 и я исполняю:<br>192.168.0.14/sec/?pt=1&cmd=get<br>Мне возвращается:<br>temp:40.68<br><br>А есть возможность получить просто значение 40.68 без префикса &quot;temp:&quot;?<br><br>P.S. В случае с DHT22 хотелось бы отправить запрос, в котором я говорю что мне нужна именно температура. А в другом запросе хочу получить именно влажность. Чтобы не парсить полученные простой командой get результаты, вытаскивая из них именно нужный мне параметр.</span></p><br><p>2015-11-04 21:37:06 | <strong>Andrey_B</strong><br><span class="comtxt autor">Александр, датчик DS18B20 нельзя подключить к исполнительному модулю MegaD-7I7O, так как аппаратная реализация входов адаптирована для подключения кнопок, но не цифровых датчиков.</span></p><br><p>2015-11-04 14:35:32 | Александр<br><span class="comtxt">Как подключить датчик DS18B20 к MegaD-7I7O ?</span></p><br><p>2015-10-19 15:18:21 | <strong>Andrey_B</strong><br><span class="comtxt autor">USA, чтение влажности доступно.</span></p><br><p>2015-10-19 13:25:16 | USA<br><span class="comtxt">Отлично! 14IN - то чего не хватало!<br><br>Да, экономически выгоднее 1wire сеть строить, но:<br>1. 14IN проще в освоении, внедрении и программировании.<br>2. Далеко не всегда топология шины удобна и позволяет дотянуться до нужных датчиков. Иногда проще кинуть до датчика отдельную ветку (звездой), чем подключать еще один 1wire контроллер и тянуть на нем отдельную шину.<br><br>P.S. Кстати, а чтение влажности с DHT22 сейчас в 14IN доступно?</span></p><br><p>2015-10-17 02:29:53 | Сергей<br><span class="comtxt">А аппаратную часть можно где-то увидеть?</span></p><br><p>2015-10-01 09:57:42 | Павел<br><span class="comtxt">Большое спасибо за модуль 14IN и поддержку DS18B20, это именно то, чего мне не хватало в проекте MegaD!</span></p><br><div id="ex"></div><p>2015-07-16 13:05:59 | Кирилл<br><span class="comtxt">Андрей, а где посмотреть аппаратную часть для DS18B20? Я нашел только схему сDS2482-100, но она не будет работать с Вашей прошивкой, насколько я понимаю.</span></p><br><p>2015-07-11 22:30:48 | <strong>Andrey_B</strong><br><span class="comtxt autor">Роман, спасибо, поправил.</span></p><br><p>2015-07-11 15:15:06 | Роман<br><span class="comtxt">Андрей,извините,что поправляю Вас,но это не классическая литература,а всё-таки техническое описание прибора.Исправьте,пожалуйста,описку в тексте(два раза присутствует &quot;правая ножка&quot; с землёй и питанием)&quot;Берем обычный датчик DS18B20. У него три ножки:<br><br>Правая - земля. Соединяем ее с левой клеммой входа (синий провод на фото)<br>Центральная ножка - данные. Соединяем ее с правой клеммой входа (белый провод на фото)<br>Правая ножка - питание. Согласно рекомендациям производителя соединяем ее с землей.&quot;</span></p><br><p>2015-07-05 11:14:43 | <strong>Andrey_B</strong><br><span class="comtxt autor">HC-SR501 работать будет. Питание датчика подключать к +12, выход - ко входу, переключенному в режим датчика (джампер внизу).<br>HC-SR04 не уверен. По документации питание +5В. В модуле на клемме такого напряжения нет. Будет ли работать от 3,3В - неизвестно. Нужно проверять.</span></p><br><p>2015-07-05 03:49:58 | Alexiy2<br><span class="comtxt">Андрей, подскажите пожалуйста, а с данной моделью будут работать инфракрасный датчик присутствия HC-SR501 и ультрозвуковой дальномер HC-SR04</span></p><br><p>2015-07-02 17:35:23 | Антон<br><span class="comtxt">Ура!<br>Отличный модуль! Теперь новичкам, как я, будет намного проще организовать систему!<br>Огромное спасибо за Ваш интересный развивающийся проект.</span></p><br><p>2015-07-02 12:22:01 | <strong>Andrey_B</strong><br><span class="comtxt autor">Андрей, в данный момент предлагается только два исполнительных модуля с выходами MegaD-7I7O-SD (симисторный) и MegaD-7I7O-R (релейный). Вариант 14 OUT обсуждается, но в корпус 6-DIN такая конфигурация не поместится - нужно брать 9-DIN.<br>Баланс входов/выходов - штука очень индивидуальная и зависит от конкретного объекта. Например, есть 5 групп освещения (5 ламп и 7 выключателей), 5-7 датчиков движения, протечки, дыма, 4-5 температурных датчиков, пара считывателей, 2 клапана безопасности на воду/газ. Баланс входов в этом случае как раз тот, что нужен. А ситуация вполне реальная и распространенная.</span></p><br><p>2015-07-02 10:22:12 | Андрей<br><span class="comtxt">Если использовать MegaD-14-IN, который прекрасно закрывает все проблемы входов, что тогда использовать для управления (OUT) ? MegaD-7I7O? Пропорция между входами и выходами становится 21:7, что сильно разбалансировано. Нужен простой возможно дешёвый MegaD-14-OUT, тогда комбинация MegaD-14-IN+MegaD-14-OUT будет выигрышной по сравнению c 2  MegaD-7I7O + 1 wire .</span></p><br><p>2015-06-30 21:45:06 | <strong>Andrey_B</strong><br><span class="comtxt autor">Андрей, аппаратная обвязка датчиков DS18B20 и кнопок принципиально отличается. Реализация в MegaD-7I7O настраиваемых входов как в MegaD-14-IN невозможна, так как для этого на плате и в корпусе нет места.<br>MegaD-7I7O специализируется на работе с выключателями, датчиками типа ON/OFF и любыми типами нагрузок. Это, скажем так, базовый исполнительный модуль. Их может быть на конкретном объекте достаточно много (так как подавляющее большинство задач решается именно с помощью этого модуля). MegaD-14-IN в доме нужен разве что один или два. Специально для температурного контроля (на дом достаточно 4-7 датчиков), аналоговых датчиков и всяких других спец. применений (считыватели ключей). Но оба эти модуля благодаря единому контроллеру вписываются в единую концепцию. Они работают с одним программным обеспечением. Такова идеология проекта. По-моему это удобно.<br>В ближайшем будущем планируется производство еще одно исполнительного модуля, в котором будет несколько стандартных входов (для кнопок), стандартных входов (для цифровых и аналоговых датчиков) и несколько релейных выходов. Этакий универсальный комбайн для каких-то небольших задач, требующих возможность подключения как можно более разнообразного оборудования. Но в нем входы не будут иметь опцию настройки, как в MegaD-14-IN. Опять же по причине того, что это не поместиться на плату и в корпус.</span></p><br><p>2015-06-30 20:20:45 | Андрей<br><span class="comtxt">Андрей, всё верно если сравнивать 14i c 1 wire,  я же сравниваю  7i7o+1 wire с 7i7o+14i. Поэтому мечтой бы был 7i7o с поддержкой 1wire.</span></p><br><div id="ex"></div><p>2015-06-30 18:09:28 | <strong>Andrey_B</strong><br><span class="comtxt autor">Александр, к одному модулю, конечно же, можно подключать несколько датчиков, требующих питание. К сожалению питающая клемма одна. Связано это, прежде всего, с размерами корпуса. Но нет никаких проблем, к примеру, взять что-нибудь вроде нулевой шины (можно в корпусе, 3-х фазную, чтобы подключить к ней сразу +3,3В, +12В и землю - такие выпускает ИЭК) и таким образом обеспечить возможность питания нужного количества датчиков.<br>Посмотрите по артикулу SQ0801-0009. Они бывают разной размерности. То есть с помощью такой штуки можно разветвить питание.</span></p><br><p>2015-06-30 16:49:59 | Александр<br><span class="comtxt">Andrey_B, возможно ли подключение к данному модулю нескольких датчиков, требующих внешнее питание? Их все, в таком случае, необходимо подключить к одной клемме? </span></p><br><p>2015-06-30 14:33:05 | <strong>Andrey_B</strong><br><span class="comtxt autor">Андрей, вот когда подключите к &quot;1wire контроллеру&quot; все то оборудование, которое описано в статье, да так, чтобы зажал в клеммах и все заработало, да так, чтобы можно было подключить на одну шину пяток-другой кнопок или охранных датчиков, да так, чтобы не опрашивать их десятки раз в секунду, боясь пропустить факт нажатия, когда идет процесс преобразования температуры одного из температурных датчиков, да так, чтобы можно было подключить пару считывателей и узнать какой из них сработал, да так, чтобы устройства могли управлять друг другом без сервера, да так, чтобы можно было получать состояние элементов и управлять ими даже без всякого ПО, даже без сервера, и так далее и тому подобное, вот тогда и поговорим об экономике, договорились?<br>Андрей, а вам не кажется странным сравнивать ужа с ежом? Ну да, у них обоих глаза есть и рот... Да только разные они... совсем.</span></p><br><p>2015-06-30 12:40:23 | Андрей<br><span class="comtxt">Чисто экономически 14 in проигрывает 1 wire контролеру , 5550 руб против 1500 руб (али), по крайней мере при ограничении 14 устройств.</span></p><br><p>2015-06-30 12:17:17 | <strong>Andrey_B</strong><br><span class="comtxt autor">Андрей, стандартный вход, рассчитанный только на работу с кнопками/выключателям/датчиками протечки, движения и т.д. не предназначен для подключения DS18B20. К входам исполнительного модуля MegaD-7I7O нельзя подключить цифровые датчики.</span></p><br><p>2015-06-30 11:44:01 | <strong>Andrey_B</strong><br><span class="comtxt autor">Ruslan, да, верно. Запитать DS18B20 можно от +3,3В, которые выведены на клемму исполнительного модуля. Действительно производитель рекомендует подключать питание к  датчикам для измерения температур выше 100 градусов.</span></p><br><p>2015-06-30 10:36:59 | Андрей<br><span class="comtxt">Можно включить поддержку 1 wire в исп. модуль 7i7R</span></p><br><p>2015-06-30 10:29:30 | Сергей<br><span class="comtxt">Отлично! Поддержка 1-wire как со стороны кода, так и со стороны аппаратуры - то, чего не хватало. </span></p><br><p>2015-06-30 09:36:22 | Ruslan<br><span class="comtxt">Andrey_B, а если к датчику DS18B20 все же есть желание подключить внешнее питание, правильно ли я понимаю, что можно просто подключить провод, подающий питание на датчик, к клемме исполнительного модуля (+3,3 V), по аналогии с датчиками DHT11/ DHT22? Я, например, планирую поставить такой датчик в баню (в парную), где температура может быть 110-120 градусов, и подводка внешнего питания, вроде бы, желательна.</span></p><br><p>2015-06-29 19:56:43 | terzo<br><span class="comtxt">Поддерживаю. Круто! Будем ждать продолжения статьи.</span></p><br><div id="ex"></div><p>2015-06-29 19:07:12 | Денис<br><span class="comtxt">Круто! Оказывается все же есть продвижение! Так держать!</span></p><br></div><br><div id="contact"><a href="/srv/sendmail">Связаться с автором сайта</a><br></div><div class="js-sticky-limit"></div></div></div></div><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4390891-44");
pageTracker._trackPageview();
} catch(err) {}</script>

<scripT type='text/javascript'>
var S ={


Sticky: {
        callbacks: { scroll: [], resize: [] }, 
        initialize: function() {
            var wrap = $(".js-sticky-wrap");
            if (wrap.size()) {
                this.wrap = wrap;
                wrap.css({"position": "relative", "top": 0});
                $(".js-sticky", wrap).css({"padding-top": 20});
                this.prevNod = wrap.prev();
                this.limitNode = $(".js-sticky-limit");
          

                if (!this.inited) {
                    $(window).scroll(function() {
                        S.Sticky.onScroll();
                    });
                    $(window).resize(function() {
                        S.Sticky.onResize();
                        S.Sticky.onScroll(1);
                    });
                    this.left = this.wrap.parent().offset().left;
                    this.inited = true;
                }
                
                this.parTop = this.wrap.parent().offset().top;
                this.fixed = false;
                this.onScroll();
                
                this.wrap.css("width",this.wrap.parent().width());
            }
        },
        callback: function(type,cbf){
            this.callbacks[type].push(cbf);
        }, 
        clone: function(stickies) {
            
            stickies.each(function() {
                stickies.css({"padding-top": 20});
                var clone = $(this).clone();
                clone.css({"visibility": "hidden", "display": "none"}).insertAfter($(this));
            });

            S.Sticky.onScroll(stickies);

            $(window).scroll(function() {
                S.Sticky.onScroll(stickies);
            });
            $(window).resize(function() {
                resize();
            });
            function resize() {
                S.Sticky.onScroll(stickies);
                S.Sticky.onResize();
            }
            if (isIOS) {
                window.addEventListener('onorientationchange' in window ? 'orientation change' : 'resize', resize, false);
            }
        },
        onScroll: function(isresize) {//stickies
            
            var scrollTop = $(window).scrollTop();
            var scrollLeft = $(window).scrollLeft();
            var top = this.prevNod, limit = this.limitNode.offset().top;
		//limit = 5000;
            var left = this.left;
            top = top.offset().top + top.outerHeight() + parseInt(top.css("margin-bottom"));
            
            if (scrollTop>top) {
                if (Math.min(limit - scrollTop - this.wrap.height(),0)) {
                    if (this.fixed) {
                        this.wrap.css({"position":"absolute","top":limit-this.wrap.height()-this.parTop ,"margin-left": "", "left": ""});
                        this.fixed = false;
                    }
                } else {
                    if (!this.fixed) {
                        this.wrap.css({"position":"fixed","top":0,"left": left});
                        this.fixed = true;
                    }

		var isiPad = navigator.userAgent.match(/iPad/i) != null;

                    if (isiPad) {
                        this.wrap.css({"position":"absolute"});
                        this.wrap.css({"top":scrollTop-this.parTop, "left": ""});
                    }

		/*
                    if (isIE6 || isIOS || isMobile) {
                        this.wrap.css({"position":"absolute"});
                        this.wrap.css({"top":scrollTop-this.parTop});
                    }
		*/
                    this.wrap.css("margin-left",-scrollLeft);
                }
            } else {
                this.wrap.css("position","");
                this.wrap.css("position","relative");
                if (this.fixed) {
                    this.wrap.css({"top": 0,"margin-left": "","left": ""});
                    this.fixed = false;
                }
            }
            
            for (var cb=this.callbacks[isresize? "resize" : "scroll"],i=0,l=cb.length;i<l;i++) cb[i](scrollTop,top,limit);
            
        },
        onResize: function() {
            this.wrap.css("width",this.wrap.parent().width());
            this.left = this.wrap.parent().offset().left;
            this.fixed && this.wrap.css("left",this.left);
        }
    }
    
    
}
S.Sticky.initialize();    
</script>

</body>
</html>

