studydoc.ru/doc/700552/lekcii-po-mc7




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">

			<title>лекции по MC7</title>

<meta name="description" content="">
<meta name="keywords" content="">
<meta property="og:title" content="лекции по MC7"/>
<meta property="og:description" content="">
<meta property="og:image" content="//s1.studydoc.ru/store/data/000700552_1-d068f4bce3772ff3b3290fe2b7378d2d.png">
	
	<script>var gaAuthorId='6',gaCategoryId='21>20>0',gaViewMode='regular';</script>
		        <link rel="canonical" href="http://studydoc.ru/doc/700552/lekcii-po-mc7" />
	
    <link rel="stylesheet" href="/theme/issuu/static/bootstrap.css">
    <link rel="stylesheet" href="/theme/issuu/static/fontawesome.css">
    <link rel="stylesheet" href="/theme/issuu/static/common.css">

            <link rel="shortcut icon" href="/theme/issuu/static/favicon-studydoc.ico">
	
    <script src="/theme/issuu/static/jquery.min.js"></script>
    <script src="/theme/issuu/static/tether.min.js"></script>
    <script src="/theme/issuu/static/bootstrap.js"></script>
    <script>
		var FileAPI =
		{
            debug: true,
			staticPath: '/theme/issuu/static/',
			storeUrl: '//s1.studydoc.ru/store/upload',
            currentUserId: 2,
			afterUploadRedirect: '//studydoc.ru/afterupload.html'
        };
    </script>
    <script src="/theme/issuu/static/fileapi.js"></script>
    <script src="/theme/issuu/static/common.js"></script>

	        <script src="/js/vendor/LAB.min.js"></script>
        <script type="text/javascript">
        	$LAB.setGlobalDefaults({Debug:true});
            $LAB_CHAIN = $LAB.script("/js/public.js").wait();
        </script>
	
    <script type="text/javascript">
        var gaUserId = 2;
        var gaUserType = 'empty';
    </script>
	<meta name='yandex-verification' content='53d796b0dfb12d63' />
<meta name="msvalidate.01" content="EB9216A8674C55E0D7BE2C958E9E9A6B" />
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69626134-3', 'auto');
  
  if(typeof gaAuthorId!= "undefined") {
   ga('set', 'dimension1', gaAuthorId);
  }
  if(typeof gaUserId!= "undefined") {
    ga('set', 'dimension2', gaUserId);
    if(gaUserId>0) ga('set', '&uid', gaUserId); 
  }
  if(typeof gaUserType!= "undefined") {
    ga('set', 'dimension3', gaUserType);      
  }
  if(typeof gaCategoryId!= "undefined") {
    ga('set', 'dimension4', gaCategoryId);      
  }
  if(typeof gaFullConfidenceBunchIds!= "undefined") {
    ga('set', 'dimension5', gaFullConfidenceBunchIds);      
  }
  if(typeof gaTotalBunchIds!= "undefined") {
    ga('set', 'dimension6', gaTotalBunchIds);      
  }
  if(typeof gaViewMode!= "undefined") {
    ga('set', 'dimension7', gaViewMode);      
  }
  
  ga('send', 'pageview');
</script>
</head>

<body>
	<nav class="navbar navbar-default ">
        <div class="container">
			<IDXSKIP><a class="navbar-brand" href="/">
                                    <img src="/theme/issuu/static/logo-studydoc.png"
                            alt="studydoc.ru" />
							</a></IDXSKIP>
            <IDXSKIP><button class="navbar-toggler hidden-md-up collapsed" type="button"
				data-toggle="collapse" data-target="#collapsing">&#9776;</button></IDXSKIP>
			<div class="navbar-toggleable-sm collapse" id="collapsing">
				<ul class="navbar-nav nav">
                    <IDXSKIP><li class="nav-item hidden-md-up">
                        <a class="nav-link" href="/search">Поиск...</a>
                    </li></IDXSKIP>
					<IDXSKIP><li class="nav-item active">
						<a class="nav-link" href="/catalog">Каталог</a>
					</li></IDXSKIP>
											<IDXSKIP><li class="nav-item">
							<a class="nav-link" href="/login">войти</a>
						</li></IDXSKIP>
						<IDXSKIP><li class="nav-item">
							<a class="nav-link" href="/registration">Регистрация</a>
						</li></IDXSKIP>
					                                            <IDXSKIP><li class="nav-item upload">
                            <input type="file" />
                            <a href="javascript:;" class="nav-link">Загрузить</a>
                        </li></IDXSKIP>
                    				</ul>
                <IDXSKIP><form class="navbar-form form-inline hidden-md-down" action="/search/">
                    <input class="form-control" type="text" name="q"
					   placeholder='Поиск...' required>
					<button class="btn btn-link">
						<i class="fa fa-search"></i>
					</button>
                </form></IDXSKIP>
			</div>
		</div>
	</nav>

    <div class="wrapper-default  no-fixed ">
        <IDXSKIP><section class="upload-info">
            <div class="container">
                <button type="button" class="close">
                    <span aria-hidden="true">&times;</span>
                </button>

                <progress class="progress" max="100">
                    <div class="progress">
                        <span class="progress-bar"></span>
                    </div>
                </progress>
            </div>
        </section></IDXSKIP>

		






<style>
    

    .above-content,
    .below-content {
        background: #404040 url(/viewer_next/web/images/texture.png);
        padding: 1rem 0;
    }

                .above-content,
        .below-content {
            background: inherit;
        }

        .above-content {
            padding-top: 6rem;
            padding-bottom: 2rem;
        }
        
    .below-content {
        display: none;
    }

    
    @media (min-width: 544px) {
        .below-content {
            display: block;
        }
    }

    .sidebar-top,
    .sidebar-bottom {
        display: none;
    }

    @media (min-width: 768px) {
        .viewer-next {
            width: calc(100% - 170px);
            min-height: 633px;
        }

        .sidebar-bottom {
            display: block;
            float: right;
            width: 160px;
            height: 600px;
        }
    }

    @media (min-width: 1200px) {
        .viewer-next {
            width: calc(100% - 310px);
        }

        .sidebar-bottom {
            width: 300px;
        }
    }
    
    @media (min-width: 1740px) {
        .viewer-next {
            width: 100%;
        }

        .sidebar-bottom {
            position: absolute;
            top: 0;
            left: calc((100vw + 1140px) / 2);
        }
    }

            
    .viewer-next {
        height: calc(100vh - 6.5rem - 90px);
    }

    @media (min-height: 600px) {
        .viewer-next {
            height: calc(100vh - 6.5rem - 90px * 2);
        }
    }
</style>

        


                    <div class="above-content">
            <div class="container"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- StudylibRU::above viewer -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6961070524526180"
     data-ad-slot="8561403356"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></div>
        </div>
            
    
        <section class="viewer-wrapper-1">
        <div class="container">
                            <pre class="viewer-text" itemprop="text">Конспект лекций
по курсу
Компьютерный анализ и синтез электронных устройств
(часть 1)
Содержание
Литература ............................................................................................................................. 4
1. Основные сведения о программе .............................................................................. 5
1.1. Введение .............................................................................................................................. 5
1.2. Установка системы............................................................................................................. 5
1.3. Состав программного пакета MC7 ................................................................................... 6
1.3.1. Корневой каталог МС7: .................................................................................................................. 6
1.3.2. Подкаталоги DATA и LIBRARY ..................................................................................................... 7
1.4. Работа с меню системы .................................................................................................... 8
1.4.1. Основные способы общения с программой ................................................................................. 8
1.4.2. Основные команды меню ............................................................................................................ 10
2.
Форматы задания компонентов ............................................................................... 27
2.1. Общие сведения ............................................................................................................... 27
2.1.1. Числа ............................................................................................................................................. 28
2.1.2. Переменные.................................................................................................................................. 28
2.1.3. Математические выражения и функции ..................................................................................... 30
2.1.4. Текстовые директивы .................................................................................................................. 36
3.
Модели аналоговых компонентов ........................................................................... 42
3.1. Общие сведения о моделях компонентов .................................................................... 42
3.2. Пассивные компоненты (Passive components) ............................................................ 42
3.2.1. Резистор (Resistor) ....................................................................................................................... 42
3.2.2. Конденсатор (Capacitor) ............................................................................................................... 44
3.2.3. Индуктивность (Inductor) .............................................................................................................. 46
3.2.4. Взаимная индуктивность и магнитный сердечник (К) ................................................................ 47
3.2.5. Трансформатор (Transformer) ..................................................................................................... 50
3.2.6. Линия передачи (Transmission line) ............................................................................................. 50
3.2.7. Диод (Diode) и стабилитрон (Zener) ............................................................................................ 51
3.3. Источники сигналов (Waveform sources) ...................................................................... 54
3.3.1. Независимые источники постоянного напряжения и тока......................................................... 54
3.3.2. Источники сигнала, зависящего от времени .............................................................................. 54
3.4. Линейные и нелинейные зависимые источники ......................................................... 61
3.4.1. Зависимые источники линейные и полиномиальные (Dependent Sources) ............................. 61
3.4.2. Линейные управляемые источники, задаваемые преобразованиями Лапласа (Laplace Sources) и Zпреобразованиями (Z Transform Sources) ............................................................................................ 62
3.4.3. Функциональные источники сигналов (Function Sources) ......................................................... 64
3.5. Смесь (Miscellaneous) ...................................................................................................... 65
3.5.1. Ключ (Switch)................................................................................................................................. 65
3.5.2. Ключ, управляемый напряжением (S) ........................................................................................ 66
3.5.3. Ключ, управляемый током (W) .................................................................................................... 66
3.5.4. Устройство выборки-хранения Sample and Hold........................................................................ 67
3.5.5. Стрелки (Arrow) и контакты (Bubble) ........................................................................................... 67
3.6. Активные компоненты (Active components) ................................................................. 67
3.6.1. Биполярный транзистор (Bipolar transistor — BJT) .................................................................... 68
3.6.2. Арсенид-галлиевый полевой транзистор (GaAsFET) ................................................................ 70
3.6.3. Полевой транзистор (JFET) ......................................................................................................... 72
3.6.4. МОП-транзистор (MOSFET) ......................................................................................................... 74
3.6.5. Операционный усилитель (ОРАМР) ........................................................................................... 77
4.
Выполнение моделирования .................................................................................... 80
4.1. Расчет передаточных функций по постоянному току (DC) ........................................ 80
4.1.1. Задание параметров моделирования DC Analysis Limits .......................................................... 80
2
4.1.2. Использование клавиши Р........................................................................................................... 83
4.1.3. Меню режимов расчета передаточных функций DC ................................................................. 83
4.2.
4.3.
4.4.
4.5.
Расчет режима по постоянному току (Dynamic DC) .................................................... 84
Расчет малосигнальных передаточных (Transfer Function) ...................................... 86
Расчет чувствительностей по постоянному току (Sensitivity) ................................... 86
Анализ по переменному току на малом сигнале (AC )................................................ 87
4.5.1. Задание параметров моделирования AC Analysis Limits ....................................................... 89
4.5.2. Использование клавиши Р........................................................................................................... 92
4.5.3. Меню режимов расчета частотных характеристик АС .............................................................. 92
4.5.4. Вывод численных данных............................................................................................................ 94
4.5.5. Расчет уровня внутреннего шума ............................................................................................... 95
4.6. Анализ переходных процессов (TRANSIENT) .............................................................. 95
4.6.1. Задание параметров моделирования Transient Analysis Limits .............................................. 95
4.6.2. Использование клавиши Р......................................................................................................... 101
4.6.3. Меню режимов расчета переходных процессов TRANSIENT ................................................. 101
4.6.4. Задание начальных значений и редактирование переменных состояния ............................ 102
4.6.5. Вывод численных данных.......................................................................................................... 104
4.7.
4.8.
4.9.
4.10.
Многовариантный анализ ............................................................................................. 105
Параметрическая оптимизация .................................................................................... 107
Статистический анализ по методу Монте-Карло ....................................................... 109
Просмотр и обработка результатов моделирования ............................................... 113
4.10.1.
4.10.2.
4.10.3.
4.10.4.
4.10.5.
4.10.6.
Окно отображения результатов моделирования ............................................................. 113
Панорамирование окна результатов моделирования ..................................................... 114
Масштабирование окна результатов моделирования ..................................................... 114
Режим электронной лупы Scope........................................................................................ 114
Функции раздела PERFORMANCE .................................................................................... 117
Вывод графиков характеристик в режиме Probe ............................................................. 119
4.11. Анимация и трехмерные графики................................................................................ 122
Методическое пособие содержит краткое описание пакета программ схемотехнического анализа MicroCAP-VII (VIII). Рассмотрена методика моделирования электронных устройств при помощи
программ схемотехнического анализа и особенности использования для этой цели пакетов
MicroCAP-VII (VIII). Пособие сопровождается большим количеством примеров, иллюстрирующих способы задания различных компонентов электронных схем. В нем приведены также примеры моделирования электронных устройств различного класса (включая и цифровые схемы). Дается описание
параметров встроенных моделей компонентов.
Пособие предназначено для студентов специальности &laquo;Промышленная электроника&raquo;, изучающих дисциплину &laquo;Компьютерный анализ и синтез электронных устройств&raquo;. Кроме того, оно может
быть полезно студентам этой и других специальностей в ходе выполнения выпускных и дипломных
работ, а также инженерам и научным работникам, занимающимся разработкой и эксплуатацией
электронных устройств.
3
Пакет программ схемотехнического анализа MicroCAP-7
Литература
1. Разевиг В.Д. Схемотехническое моделирование с помощью Micro-CAP 7. — Горячая линияТелеком, 368 с. 621.38 Р-17 /2003 – 9 аб, 2 чз
2. Разевиг В.Д. Система моделирования Micro-Cap 6. – М.: Горячая линия-Телеком, 2001. — 344 с.,
ил.
3. Разевиг В.Д. Система схемотехнического моделирования Micro-Cap V. – Москва, &laquo;Солон&raquo;, 1997. –
273 с. 621.3 Р17 /1997 – 1 аб, 3 чз
4. Разевиг В.Д. Система сквозного проектирования электронных устройств Design Lab 8.0. – Москва,
&laquo;Солон&raquo;, 1999. 004 Р-17 /2003 – 1 аб/ 2000 – 11 аб, 5 чз
5. Карлащук В.И. Электронная лаборатория на IBM PC. Программа Electronics Workbench и ее применение.— Москва: Солон-Р, 2001. – 726 с. 004 K23/ 10 аб, 5 чз.
6. Micro-Cap 7.0 Electronic Circuit Analysis Program Reference Manual Copyright 1982-2001 by Spectrum
Software 1021 South Wolfe Road Sunnyvale, CA 94086
4
1.
Основные сведения о программе
1.1.
Введение
MicroCAP-7 — это универсальный пакет программ схемотехнического анализа, предназначенный для решения широкого круга задач. Характерной особенностью этого пакета, впрочем, как и всех
программ семейства MicroCAP (MicroCAP-3… MicroCAP-8) [1, 2], является наличие удобного и дружественного графического интерфейса, что делает его особенно привлекательным для непрофессиональной студенческой аудитории. Несмотря на достаточно скромные требования к программноаппаратным средствам ПК (процессор не ниже Pentium II, ОС Windows 95/98/ME или Windows NT
4/2000/XP, память не менее 64 Мб, монитор не хуже SVGA), его возможности достаточно велики. С
его помощью можно анализировать не только аналоговые, но и цифровые устройства. Возможно
также и смешанное моделирования аналого-цифровых электронных устройств, реализуемое в полной мере опытным пользователем пакета, способным в нестандартной ситуации создавать собственные макромодели, облегчающие имитационное моделирование без потери существенной информации о поведении системы.
От младших представителей своего семейства MicroCAP-7 отличается более совершенными
моделями электронных компонентов разных уровней (LEVEL) сложности, а также наличием модели
магнитного сердечника. Это приближает его по возможностям схемотехнического моделирования к
интегрированным пакетам DESIGNLAB, ORCAD, PCAD2002 — профессиональным средствам анализа и проектирования электронных устройств, требующим больших компьютерных ресурсов и достаточно сложных в использовании.
Перечисленные достоинства делают пакет программ MicroCAP-7 весьма привлекательным для
моделирования электронных устройств средней степени сложности. Удобство в работе, нетребовательность к ресурсам компьютера и способность анализировать электронные устройства с достаточно большим количеством компонентов позволяют успешно использовать этот пакет в учебном процессе. Настоящее пособие не претендует на полное руководство по работе с MicroCAP-7. Здесь рассмотрены лишь основные сведения, необходимые для начала работы с пакетом и анализа большинства электронных схем, изучаемых в специальных дисциплинах и используемых при курсовом и дипломном проектировании. В случае необходимости дополнительные (и более подробные) сведения
могут быть получены из встроенной подсказки системы (вызывается клавишей &lt;F1&gt; или через меню
HELP/Contens) и из [1–3].
1.2.
Установка системы
Автором изменены изображения часто используемых компонентов электронных схем (например, резисторов, индуктивностей…) в соответствии с российскими стандартами. Поэтому для того,
чтобы создаваемая электронная схема имела привычный и близкий к отечественному стандарту вид,
необходимо придерживаться следующего порядка установки.
1.
Запустить Setup.exe из каталога SPECTRUM MICROCAP V7.08\Spectrum Micro-Cap V7.08\;
2.
В процессе установки указать необходимый путь для размещения пакета;
3.
В тот же каталог скопировать содержимое каталога &laquo;MC7libup&raquo; с заменой существующих файлов;
5
4.
Снять атрибут &laquo;только для чтения&raquo; со всего каталога (включая вложенные папки), в котором
установился исполняемый модуль MC7.exe;
5.
После установки запустить MC7crack.exe из каталога SPECTRUM MICROCAP V7.08\CRACK и
после запуска указать путь для распаковки — каталог, в котором установился исполняемый модуль MC7.exe;
6.
Запустить MC7.exe (MC72.exe — русифицированную версию), зайти в подменю File/Path (Файлы/Пути) и установить пути:
а) для цепей (Data) — пусто (В этом случае анализируемые схемы будут загружаться из последнего открытого командой FILE/Open каталога). Целесообразно каждому пользователю создать
свой подкаталог внутри подкаталога поставляемых схем …MC7\DATA во избежания долгого перелистывания большого списка файлов.
б) для библиотек (Model Library) — ...\LIBRARY
в) для данных (Picture) — ...\DATA
7. Каталог Примеры содержит примеры, рассмотренные далее в конспекте лекций.
После такой установки изображения основных электронных компонентов будут соответствовать российским стандартам.
1.3.
Состав программного пакета MC7
Система Micro-Cap 7 состоит из двух программ:
MC7.exe
— основная программа;
MODEL.exe
— программа расчета параметров математических моделей компонентов по
паспортным данным.
После установки дистрибутива Micro-Cap 7 (в дальнейшем МС7) программа располагаются в
трех каталогах, в которых размещаются следующие файлы.
1.3.1.
Корневой каталог МС7:
DEMO.MC7 — файл, в котором записаны демонстрационные примеры, помогающие начинающему пользователю освоить работу в среде программы. Они вызываются через меню HELP (3-я
нижняя группа подменю с именами демонстрационных файлов). Для правильной работы Demoпримеров в подменю FILE/Path для файлов схем DATA должен быть установлен путь …\MC7\DATA.
Остановить работу demo-примера (для чтения поясняющих сообщений на английском языке можно с
помощью нажатия клавиши &lt;PAUSE&gt;), возобновить воспроизведение — с помощью нажатия любой
клавиши (удобно использовать повторное нажатие &lt;PAUSE&gt;). Рассмотрев подробно работу demoпримеров в замедленном режиме (используя клавишу &lt;PAUSE&gt;), начинающий пользователь (предполагается лишь наличие у него знаний по основам электроники) может освоить все особенности работы с системой.
FILTER.BIN — бинарный файл, необходимый для синтеза фильтров.
IMPORT.CMP — расширенная библиотека компонентов, здесь хранится и информация о компонентах, созданных пользователем в процессе работы с пакетом.
6
IMPORT.SHP — расширенная библиотека условных графических обозначений (УГО) символов
компонентов, здесь хранится и информация об УГО компонентов, созданных пользователем в процессе работы с пакетом;
МС7.ЕХЕ — программа МС7, исполняемый модуль;
MC7.HLP — встроенная помощь для программы МС7;
MCAP.DAT —- файл конфигурации программы МС7. Создается автоматически после первого
запуска программы, в частности, в нем указываются полные имена подкаталогов, аналогичных подкаталогам \DATA и \LIBRARY, установленных с помощью подменю FILE/Path);
MODEL.DAT — файл конфигурации программы MODEL;
MODEL.EXE — программа MODEL, исполняемый модуль;
MODEL.HLP — встроенная помощь для программы MODEL;
STANDARD.CMP — простейшая библиотека компонентов;
STANDARD.PKG — простейшая библиотека упаковки компонентов (необходима для создания
списков соединений схем, передаваемых в программы разработки печатных плат);
STANDARD.SHP — простейшая библиотека условных графических обозначений (УГО) символов компонентов.
1.3.2.
Подкаталоги DATA и LIBRARY
В подкаталог МС7\DАТА заносятся файлы схем и результатов моделирования. По умолчанию принято следующее соглашение о расширениях имен файлов:
.АМС —- текстовые файлы статистической обработки расчетов частотных характеристик при
разбросе параметров по методу Монте-Карло;
.ANO — текстовый файл результатов расчета частотных характеристик, в который занесена
информация о параметрах компонентов, режиме по постоянному току и таблице выходных переменных, отмеченных в меню AC Analysis Limits;
.ASA — бинарный файл результатов расчетов частотных характеристик;
.CIR — файлы описания схем в формате Micro-Cap 7. Именно такие файлы создаются пользователем при помощи графического редактора, и загружаются из каталога …MC7\DATA для различных видов анализа;
.СКТ — файлы описания схем и заданий на моделирование на языке SPICE;
.DMC — текстовые файлы статистической обработки расчетов передаточных функций по постоянному току при разбросе параметров по методу Монте-Карло;
.DNO — текстовый файл результатов расчета передаточных характеристик, в который занесена информация о параметрах компонентов, режиме по постоянному току и таблице выходных переменных, отмеченных в меню DC Analysis Limits;
.DSA — бинарный файл результатов расчетов передаточных характеристик;
.ERR — перечень ошибок упаковки компонентов;
.JED — файл программирования логических матриц в формате JEDEC;
.NET — текстовые файлы списков соединений для переноса схем на печатные платы;
.RES — значения сопротивлений резисторов, назначенных при проведении расчетов по методу
Монте-Карло с учетом заданной величины разброса tolerance (формируется программой).
.S2P — текстовые файлы S-параметров линейных четырехполюсников;
.SEN — текстовый файл результатов расчета чувствительностей по постоянному току;
.STM — текстовые файлы цифровых сигналов;
7
.SVV — текстовые файлы значений переменных состояния, создаваемые редактором State Variables Editor;
.ТМС — текстовые файлы статистической обработки расчетов переходных процессов при разбросе параметров по методу Монте-Карло;
.TNO — текстовые файлы результатов расчета переходных процессов, в который занесена
информация о параметрах компонентов, режиме по постоянному току и таблице выходных переменных, отмеченных в меню Transient Analysis Limits;
.TSA — бинарные файлы результатов расчетов переходных процессов;
.USR — текстовые файлы дискретных отсчетов выборок сигналов.
В подкаталог MC7\LIBRARY заносятся файлы библиотек математических моделей компонентов. По умолчанию принято следующее соглашение о расширениях имен файлов:
.САР— значения емкостей конденсаторов, назначенных при проведении расчетов по методу
Монте-Карло с учетом заданной величины разброса tolerance (формируется программой);
.CIR — макромодели электронных компонентов, оформленные в виде подсхем;
.INC —содержание этого текстового файла включается в задание на моделирование;
.INX — индексный файл библиотек математических моделей компонентов;
.LBR — сокращенные бинарные файлы библиотек математических моделей компонентов, созданных программой MODEL, без сохранения экспериментальных данных; просматриваются и редактируются с помощью программы МС7;
.LIB — текстовые файлы библиотек математических моделей компонентов в формате SPICE;
просматриваются и редактируются программой МС7 и любым текстовым редактором;
.MAC — макромодели электронных компонентов, оформленные в виде подсхем (Аналогично
.CIR);
.MDL — полные бинарные файлы библиотек математических моделей компонентов, созданных
программой MODEL, с сохранением экспериментальных данных;
.MOD — текстовые файлы математических моделей отдельных компонентов в формате SPICE;
.USR — текстовые файлы дискретных отсчетов выборок сигналов.
NOM.LIB — перечень загружаемых библиотек математических моделей компонентов (текстовый файл, по умолчанию создается при инсталляции программы и редактируется пользователем);
NOM_LIB.INX — индексный файл библиотек математических моделей компонентов (создается
программой);
Запуск программы MC7.exe производится двойным щелчком мыши по пиктограмме (ярлыку)
, программы Model.exe — по ярлыку
1.4.
1.4.1.
.
Работа с меню системы
Основные способы общения с программой
MicroCAP-7 является программой с многооконным графическим интерфейсом, позволяющим
строить и редактировать схемы, модели и изображения компонентов, а также представлять результаты расчетов в удобном графическом виде. Для работы с этой программой необходимо использовать манипулятор &laquo;мышь&raquo;. При помощи мыши можно менять расположение и размер окон, а также
выбирать команды меню. Одновременно можно редактировать несколько схемных файлов, размещенных в разных окнах.
8
В интегрированном пакете MC7 используется стандартный многооконный интерфейс с ниспадающими и разворачивающимися меню.
После запуска программы MC7 экран монитора имеет вид, представленный на рис.1.
Рис. 1.1. Окно программы MC7
Верхняя строка окна (подсвеченная синим) — строка системного меню программы MC7. На
ней слева находится кнопка системного меню, дублирующая по начертанию ярлык программы. С ее
помощью изменяется и восстанавливается размер окон, они перемещаются, сворачиваются и закрываются. Аналогичные операции можно делать с помощью стандартных в OC WINDOWS кнопок, расположенных справа на строке системного меню. На этой же строке находится заголовок. Если открыто окно схем, то указывается имя файла схемы и каталога, в котором он расположен. Если же открыто окно анализа характеристик Analysis — указывается вид анализа.
Следующая строка (2-ая сверху) — строка меню команд программы. Слева на ней расположена кнопка меню схемы, управляющая размером окна схемы, а справа 3 стандартные в WINDOWS
кнопки, выполняющие аналогичное управление. Между этими кнопками располагается ниспадающее меню команд программы MC7.
Строка инструментов. На этой строке размещены пиктограммы наиболее употребительных
команд, все они будут описаны ниже при описании соответствующих пунктов меню. Пиктограммы
команд немедленного действия остаются нажатыми непродолжительное время и затем восстанавливают свое первоначальное положение. Пиктограммы команд, переключающие режимы, остаются в
положение &quot;включено&quot; до выполнения следующей команды.
Линейки прокрутки. Две линейки прокрутки позволяют панорамировать окно схем или текста
по горизонтали или вертикали.
Закладки переключения окна схем, окна текста. Нажатие на закладки Text, Page 1, Page 2,...
выводит в рабочее окно содержание текстового окна, в котором можно размещать описание математических моделей компонентов текущей схемы, директивы и другую текстовую информацию, или содержание окна схем. Переключение между текущим окном схемы и текстовым окном производится
также нажатием горячих клавиш Ctrl G.
9
Новая страница схемы создается по команде всплывающей панели Add+Page, открываемой
щелчком правой кнопки мыши, когда курсор находится на строке названий страниц, когда имеется не
менее двух страниц схем.
При нажатии правой кнопки мыши в окне схем курсор приобретает форму руки, и его перемещение при нажатой кнопке позволяет перемещать (панорамировать) схему.
При работе с МС7 используется понятие выбора объекта (компонента схемы, его позиционного обозначения, значения параметра, электрической цепи, блока схемы или строки текста). Выбор
отдельного объекта выполняется щелчком мыши, выбор блока — заключением его в прямоугольную
рамку (для этого нужно щелкнуть кнопкой мыши, поместив курсор в один из углов прямоугольной области и, не отпуская ее, растянуть рамку до необходимых размеров, после чего отпустить кнопку).
Выбранный объект изменяет цвет; его можно перетаскивать с помощью мыши и редактировать.
Для ускорения работы с программой используется не только мышь, но и клавиатура. Если команда меню имеет подчеркнутый символ, то эта команда вызывается одновременным нажатием
клавиш Alt+подчеркнутый символ. Например, меню Edit открывается нажатием клавиш Alt+E.
Команды ниспадающего подменю, например Select All, вызываются нажатием подчеркнутого
символа, в данном примере символа А. Другой способ — нажатием клавиш  выбрать нужную
строку и затем нажать Enter.
Многие команды помимо пиктограмм вызываются нажатием горячих клавиш и комбинаций клавиш. Например, команда удаления с копированием в буфер обмена Edit&gt;Cut вызывается нажатием
пиктограммы
или комбинации клавиш Ctrl+X.
Горячие клавиши будут перечисляться ниже при описании команд меню.
1.4.2.
Основные команды меню
Остановимся подробнее на ниспадающем меню команд программы MC7. Здесь и далее при
описании пунктов ниспадающего меню в скобках указывается сочетание &laquo;горячих клавиш&raquo; и пиктограмма кнопки панели инструментов (3 и 4 строка экрана см. рис.1.1), нажатие которых производит
аналогичные действия. Причем ниже дано описание не всех команд, а наиболее употребляемых. Если этого недостаточно см. встроенную подсказку и [1].
FILE :
New (ctrl N,
) — создать новый схемный файл (либо в формате MC7 — в виде схемы, либо
в виде текстового файла формата SPICE, либо библиотечный).
Open (ctrl O,
) — открыть для редактирования или анализа схемный файл.
Save (ctrl S,
) — cохранение схемы из активного с именем и путем, указанным в строке заголовка
Save as — сохранение схемы из активного окна в новом файле, имя которого указывается в последующем открывающемся окне
Paths — указание путей расположения данных (DATA), библиотек (Model Library) рисунков (picture)
Translate — преобразование форматов схемных файлов (текстового SPICE в графический Microcap и наоборот, схемного MC7 в схемный более ранних версий MICROCAP и др.)
Load MC File — загрузка файлов результатов расчета по методу Монте-Карло (*.ANO, *.DNO,
*.TNO)
10
Revert (
) — восстановление содержимого файла текущего окна с диска
Close (ctrl F4) — завершение работы со схемой, находящейся в активном окне
Print Preview (
)— предварительный просмотр изображения перед печатью
Print (ctrl P,
) — вывод на печать изображения в активном окне в соответствии с параметрами, заданными в окне Print Setup
Print Setup — выбор принтера и параметров бумаги
1…8 — полные имена (включая путь) 8 последних открытых схемных файлов
Exit (alt F4)— завершение работы с программой MC7
EDIT:
Undo (ctrl Z,
) — отмена последней команды редактирования (откат назад)
Redo (ctrl Y,
) — повтор последней отмененной команды (откат вперед)
Cut (ctrl X,
) — удаление выбранного (
Copy (ctrl С,
) объекта и размещение его в буфере обмена
) — копирование выбранного объекта в буфер обмена
Paste (ctrl V,
) — копирование содержимого буфера обмена в текущее окно в место на которое показывает курсор
Clear (Del,
) — удаление выбранного объекта без копирования в буфер
Select all (ctrl A,
) — выделение всех объектов в текущем окне
Copy to Clipboard — копирование текущего окна в виде различных графических файлов (открываются подменю) в буфер обмена
Add Page (
) — добавление к схеме новой страницы (большие схемы могут размещаться
на нескольких страницах)
Delete Page (
) — удаление одной (нескольких) страниц схемы
Refresh Models (
) — размещение в текстовом окне (Text или Ctrl+G) описаний моделей
компонентов, которые еще небыли помещены в него
Box — редактирование объектов, заключенных в прямоугольную рамку (устанавливается мышью в режиме
). Открывающееся подменю или кнопки пиктограмм на панели инструментов
— копирование указанного число раз, создание зеркально отраженного фрагмента,
вращение против часовой стрелки на 90, зеркальное отражение относительно осей, расположенных
посередине блока соответственно
Change — изменение ряда параметров отображения схемы (становится понятным из открывающихся подменю)
Bring to Front (
Send to Back (
) — перемещает нижний перекрывающийся объект наверх
) — перемещает верхний перекрывающийся объект вниз
11
Find (
) — поиск в текущем окне схем или текста разнообразных объектов, перечисленных
в открывающемся диалоге.
COMPONENT:
Меню COMPONENT содержит каталог библиотек аналоговых и цифровых компонентов. Он
имеет систему разворачивающихся иерархических меню, открывающихся при наведении на них курсора мышью. В основном названия компонентов понятны из наименования на английском языке, однако ниже приведен список основных компонентов на русском для лучшей ориентации в программном пакете:
Analog Primitives (рис. 1.2)
Passive Components — резисторы, конденсаторы, катушки индуктивности, диоды, длинные линии, диод повернутый на 45, трансформатор, магнитный сердечник, стабилитрон.
12
Рис. 1.2. Основные компоненты Analog Primitives
13
Active Devices — npn и pnp биполярные транзисторы, МДП-транзисторы с каналом n - и p типов
(NMOS, PMOS), МДП-транзисторы с индуцированным каналом n- и p типов (DNMOS, DPMOS), полевые транзисторы с управляющим p-n переходом с каналом n- и p типов (NJFET, PJFET), операционные усилители (OPAMP), арсенид-галлиевые полевые транзисторы.
Следует отметить, что основные пассивные и активные примитивы (земля, резистор, конденсатор, катушка индуктивности, диод, npn-транзистор, NMOS-транзистор, операционный усилитель, источник напряжения, источник импульсного сигнала, источник синусоидального сигнала) могут быть
выбраны с помощью группы кнопок на верхней панели инструментов:
Waveform Sources (Источники сигналов) — источник постоянного напряжения (battery), источник
импульсного сигнала (pulse), источник постоянного тока (isource), источник напряжения зависящий от
времени формы программируемой пользователем в виде таблицы (user source), источник синусоидального напряжения (sin source), независимые источники напряжения и тока сложной формы, зависящие от времени (V, I), точка фиксированного потенциала в аналоговой схеме (fixed analog). См.
схемный файлы WAVEFORM_SOURCES.CIR, WAVEFORM_V и их анализ.
Function Sources (Функциональные источники) — функциональный источник напряжения (NFV),
функциональный источник тока (NFI); таблично задаваемые зависимые источники напряжения от тока (NTVofI), тока от тока (NTIofI), тока от напряжения (NTIofV), напряжения от напряжения (NTVofV).
Источники NFV и NFI описываются произвольной функциональной зависимостью от напряжений и токов схемы.
Таблично задаваемые зависимые источники напряжения от тока (NTVofI), тока от тока (NTIofI),
тока от напряжения (NTIofV), напряжения от напряжения (NTVofV) задаются таблицей значений выходного сигнала (напряжения или тока) от входного сигнала (напряжения или тока). Для расчета выходного сигнала в промежутке между табличными точками используется линейная интерполяция.
Значения выходного сигнала за пределом заданного диапазона принимаются равным значениям в
крайних точках.
См. схемныe файлы FUNCTION_SOURCES.CIR, FUNCTION (TABLE).CIR и их анализ.
Laplace Sources — задаваемые в операторном виде по Лапласу в виде передаточных функций
в s-области зависимые источники: напряжения от тока (LFVofI), тока от тока (LFIofI), тока от напряжения (LFIofV), напряжения от напряжения (LFVofV); задаваемые в виде табличных комплексных передаточных функций от частоты зависимые источники: напряжения от тока (LТVofI), тока от тока
(LТIofI), тока от напряжения (LТIofV), напряжения от напряжения (LТVofV).
При расчете частотных характеристик для функциональных зависимых операторных источников переменная S заменяется на 2fj. При расчете режима по постоянному току для них полагается
S=0.
Для таблично задаваемых операторных зависимых источников задается таблица передаточной
функции. Частота задается в Герцах, модуль передаточной функции в децибелах или абсолютных
единицах, фаза — в градусах или радианах. Для расчета передаточной функции между опорными
точками применяется линейная интерполяция в логарифмическом масштабе. Значения передаточной функции вне заданного диапазона полагаются равными значениям в крайних точках. См. схемный файл LAPLACE_SOURCES.CIR и его анализ.
14
Z transform sources — задаваемые в виде передаточных функций в z-области зависимые источники: напряжения от тока (ZVofI), тока от тока (ZIofI), тока от напряжения (ZIofV), напряжения от
напряжения (ZVofV).
Установка подобного источника в схему соответствует установке цифрового фильтра с соответствующей характеристикой в Z-области. О том, что представляют собой цифровые фильтры, дискретные системы и математический аппарат для их описания, анализа и синтеза на основе дискретного преобразования Лапласа (z-преобразования) рассказывается в курсе &laquo;Математические основы
цифровой обработки сигналов&raquo; (Пеньков А.А.). Частота дискретизации для таких источников задается в открывающемся диалоге как Clock Frequency, выражение для передаточной функции — zexp.
См. схемные файлы Z-TRANSFORM_SOURCES.CIR, Z-TRANSFORM_SOURCES-ФВЧ.CIR, ZTRANSFORM_SOURCES-ФНЧ.CIR и их анализ.
Dependent sources — задаваемые коэффициентом передачи линейные зависимые источники:
напряжения от тока (VofI), тока от тока (IofI), тока от напряжения (IofV), напряжения от напряжения
(VofV); задаваемые математическим выражением в виде полинома нелинейные зависимые источники напряжения от нескольких напряжений (EVofV), тока от нескольких токов (FIofI), тока от нескольких
напряжений (GIofV), напряжения от нескольких токов (HVofI). См. схемные файлы DEPENDENT
SOURCES.CIR, DEPENDENT SOURCES_Poly.CIR и их анализ.
Macros — макроопределения (макромодели) в виде схем в формате MC7, поставляемые вместе с программным пакетом, а также некоторые макромодели, определенные автором. Смысл и
назначение их легко определяются при вызове в схему и снятию характеристик (есть примеры в каталоге DATA), упоминаются в дальнейшем изложении при приведении примеров моделирования.
Subckts — подсхемы (макромодели) в виде текстового описания в формате SPICE, поставляемые вместе с программным пакетом. Смысл и назначение их легко определяются при вызове в схему и снятию характеристик (есть примеры в каталоге DATA).
Connectors — аналоговая земля (Ground); точка, заданная на схеме буквенной меткой (Tie),
проводники без электрического соединения в точке пересечения (Jumper).
Следует отметить, что использование Tie позволяет не загромождать принципиальную схему
цепями питания микросхем.
SMPS — макромодели в виде схем и подсхемы в виде текстового описания для сложных
устройств (например ШИМ-модуляторов для управления ключевым источником электропитания и
пр.), используемые в примерах моделирования, поставляемых в каталоге DATA. Следует отметить,
что в этой же группе находятся макромодели диода Шоттки и оптопары.
Miscellaneous — устройство выборки-хранения (Sample and Hold); ключ, управляемый напряжением (S); универсальный ключ, могущий управляться напряжением, током, временем (SWITCH); ключ
управляемый током (W); стрелка для обозначения информации о сигнале (Arrow), точки для обозначения контактов (bubble 1, 2).
Analog Library (рис. 1.3)
BJT — модели биполярных транзисторов и транзисторных сборок различного типа проводимости, реализованные в виде модели MC7 или подсхемы на языке SPICE.
15
Рис. 1.3. Основные компоненты Analog Library
16
BJT PWR — модели мощных биполярных транзисторов (в том числе и составных) различного
типа проводимости, реализованные в виде модели MC7 или подсхемы на языке SPICE.
Comparator — модели компараторов, реализованных в виде подсхем на языке SPICE.
Crystal — модели кварцевых резонаторов, реализованные в виде макромодели (схемы) MC7.
Diode — модели диодов и диодных мостов и сборок, реализованные в виде модели МС7 или
подсхемы SPICE.
Ferrite — модели магнитных сердечников.
IGBT — модели транзисторов IGBT, реализованные в виде подсхем SPICE
JFET — модели полевых транзисторов с управляющим p-n-переходом.
MISC — модели буферных усилителей, преобразователей постоянного напряжения, оптоэлектронных микросхем.
MOSFET — модели МОП-транзисторов с индуцированным каналом.
OPAMP — модели операционных усилителей
Passive — модели пассивных компонентов: резисторов с различной точностью, катушек индуктивности, трансформаторов, термисторов.
Reference — модели источников опорного напряжения различного вида.
Regulator — модели регуляторов
RF — модели биполярных и МОП-транзисторов, реализованные в виде подсхем SPICE/
Sensor — модели датчиков
Switch/Mux — модели аналоговых коммутаторов сигналов
Thyristor — модели тиристоров, реализованные в виде макромодели (схемы) МС7 и подсхемы
на языке SPICE.
Trans Line — модели длинных линий.
Tube — модели электронных ламп (триодов и пентодов).
Varistor — модели варисторов
Vendor — модели изделий электронных компонентов, классифицированные по фирмеизготовителю.
Digital Primitives (рис. 1.4)
Standard Gates — модели стандартных логических вентилей (2, 3, 4, 5, 9 – входовых) И, И-НЕ,
ИЛИ, ИЛИ-НЕ, ИСКЛ-ИЛИ, НЕ-ИСКЛ-ИЛИ, инвертора (НЕ), и буфера (повторителя).
Tri state Gates — модели логических вентилей (2, 3, 4, 5, 9 – входовых) И, И-НЕ, ИЛИ, ИЛИ-НЕ,
ИСКЛ-ИЛИ, НЕ-ИСКЛ-ИЛИ, инвертора (НЕ), и буфера (повторителя) с 3-мя состояниями.3-е состояние — высокоимпедансное.
Edge-Triggered Flip-Flops — триггеры с динамическим управлением (срабатывающие по фронту
(срезу)) импульса на синхровходе CLKB.
Gated Flip-Flops/ Latches — триггеры с потенциальным управлением (статический RS) и триггер
защелка (D), устанавливается в соответствии с информационным сигналом на D-входе при наличии
на разрешающем входе активного (высокого) уровня.
Pullups/Pulldowns — источники постоянных логических сигналов.
17
Рис. 1.4. Digital Primitives и Animation
18
Delay line — цифровая линия задержки.
Programmable Logic Arrays — программируемые логические матрицы.
Logic Expressions — логические выражения от двух входных логических переменных с одной
или двумя выходными функциями.
Pin Delay — назначение задержки распространения сигналов устройствам, рассмотренным в
предыдущем пункте
Contstraints — контроль соблюдения временных соотношений.
AtoD converters — 1, 4, 8, 12, 16 – разрядные аналого-цифровые преобразователи.
DtoA converters — 1, 4, 8, 12, 16 – разрядные цифро-аналоговые преобразователи
Stimulus Generators — генераторы цифровых сигналов с 1, 2, 4, 8, 16 выходами.
Digital Library
Содержит библиотеки моделей цифровых компонентов разных фирм-изготовителей. Следует
отметить, что здесь значительно больше типов цифровых микросхем, чем в группе Digital primitives
(дешифраторы, мультиплексоры, счетчики, триггера различных типов). Просмотреть эти библиотеки
и найти нужный компонент по его достаточно наглядному условному графическому отображению
можно запустив редактор компонентов (Windows/Component Editor). После этого в правом открывшемся окне показывается иерархическая структура всей библиотеки. Можно, заходя в нужную группу
просматривать УГО библиотечных компонентов, по которым нетрудно составить представление о
типе и законах функционирования самого компонента.
Animation (рис. 1.4)
Здесь расположены элементы, осуществляющие индикацию логических состояний в точках
цифровой схемы.
Find Component (Ctrl Shift F)
Поиск во всех библиотеках компонента по имени и размещение его на схему.
После выбора компонента с помощью команд меню Component MC7 переходит в режим Component Mode. Размещение выбранного компонента в заданном месте на схемной странице производится щелчком мыши. Перемещение мыши с нажатой левой кнопкой приводит к перемещению компонента по окну, одновременное нажатие правой кнопки ведет поворачивает компонент на 90 против часовой стрелки. Отпускание левой кнопки приводит к фиксации элемента на схеме и открытию
окна задания параметров компонента (позиционного обозначения, численных значений или имени
модели и др.). При выборе в окне компонента одного из параметров в строке подсказки (Help Bar)
приводится формат его ввода.
WINDOWS :
Содержит команды работы с окнами.
Cascade (Shift F5,
The Vertical (Shift F4,
The Horizontal (
) — расположение открытых окон каскадом
) — последовательное расположение открытых окон по вертикали
) — последовательное расположение открытых окон по горизонтали.
19
Overlap (
) — наложение окна результатов анализа поверх окна схем (подсвечивается и
может быть активизирован только после запуска одного из видов анализа из меню Analysis)/
Maximize — развернуть активное окно на весь экран.
Zoom in (Ctrl &lt;+ДК&gt; ) — увеличить масштаб изображения.
Zoom out (Ctrl &lt;–ДК&gt;
) — уменьшить масштаб изображения.
Toggle Drawing/Text ( Ctrl G) — переключения между окном схем и соответствующим ему окном текста
Splite Horizontal — разделение рабочего окна на окно схем и окно текста, расположенных по
горизонтали
Splite Vertical — разделение рабочего окна на окно схем и окно текста, расположенных по вертикали
Remove Splits — распахивание окна схемы на весь экран с полным перекрытием окна текста.
Component Editor — запуск программы редактора компонентов (Навигация по всей библиотеке, создание новых компонентов на основе заранее подготовленной макромодели MC7 или подсхемы в формате SPICE).
Shape Editor — запуск редактора изображений (УГО) компонентов (редактирование существующих УГО и создание своих новых УГО).
Package Editor — вызов редактора упаковки выводов компонента (типа корпуса и расположения обозначенных сигнальных выводов компонента). Информация необходима для составления
списка соединений, передаваемых во внешние программы подготовки печатных плат.
Model Program — запуск программы подготовки моделей компонентов Model.
Calculator (
)— вызов встроенного калькулятора
Check Model Library Parameters — вывод перечня библиотек, перечисленных в файле
NOM.lib, с указанием синтаксических ошибок.
1...9 — активизация и размещение на переднем плане одного из открытых схемных файлов.
OPTIONS :
Содержит команды работы с окнами.
Main tool Bar (Ctrl 0) — включение/выключение нижней строки панели инструментов (см. рис.
1.1)
Default Main Tool Bar — размещение кнопок на панели инструментов как принято по умолчанию
Status Bar — включение/выключение строки описания текущей команды (см. рис.1.1)
Mode — выбор режима работы графического редактора схем или результатов анализа
Select (Ctrl E,
) – выбор объекта для последующего редактирования.
Component (Ctrl D,
Text (Ctrl T,
Wire ( Ctrl W,
WireD (
20
) – добавление компонента в схему
) – добавление текста в схему или на результаты анализа
) – добавление ортогональных проводников в схему
) — добавление проводников произвольной ориентации в схему
Line, Rectangle, Diamond, Ellipse, Arc, Pie, Polygon, Picture (
) – добавление линии,
прямоугольника, ромба, эллипса, дуги, сектора, полилинии, изображения из файла.
Flag (
) – ввод флагов для быстрой навигации по схеме
Следующие 5 режимов доступны только при выводе окна результатов анализа:
Scale ( F7
) – режим вывода на экран части графика, заключенного в рамку
Cursor ( F8
) – режим двух электронных курсоров, активизируемых левой и правой клавишей мыши.
Point Tag (
) – нанесение на график значений координат выбранной курсором точки.
Horizontal Tag (
) – нанесение расстояния вдоль оси абсцисс между двумя точками
графика (как правило измерение частотного диапазона в AC, времени в TRAN).
Vertical Tag (
графика.
) – нанесение расстояния вдоль оси ординат между двумя точками
Help (Ctrl H
) – вызов текстовой информации (помощи) о модели выбранного
щелчком курсора компонента.
Info (Ctrl I
) – вызов информации о параметрах модели выбранного щелчком курсора компонента.
Point to End Paths –расчет задержек сигналов во всех путях, подходящих к выбранному
цифровому компоненту.
Point to Point Paths – расчет задержек сигнала пути, соединяющего два выбранных цифровых компонента.
View — выбор дополнительной информации выводимой на схему.
Attribute Text (
) – позиционные обозначения компонентов.
Grid Text (
) – текстовые надписи в схемном окне.
Node numbers (
) – номера узлов схемы.
Следующие 4 команды подсвечиваются лишь после проведения одного из видов анализа:
Node voltage states (
) – узловые потенциалы аналоговых узлов и логические состояния цифровых узлов в режиме по постоянному току (подсвечивается после проведения одного из видов анализа).
Current (
) – токи ветвей.
Power (
) – рассеиваемая на компонентах мощность.
Condition (
) –состояния транзисторов и p-n-переходов (Lin – линейный активный
режим, Sat – режим насыщения, On – переход открыт, Off – переход закрыт (или
транзистор в режиме отсечки)).
Pin connections (
) — обозначить красной точкой концы выводов компонентов
21
Grid (
) — изображение разметочной сетки
Crosshair Cursor (
Border (
) – курсор в виде перекрестья во весь экран.
) – нанесение рамки на чертеж схемы.
Title (
) – нанесение углового штампа на чертеж.
Show All Paths — составление списка всех возможных путей распространения цифровых сигналов с указанием задержек. Выбранный в списке путь высвечивается на схеме.
Preferenсes (Ctrl Shift P
) — открытие диалогового окна для изменения назначения цвета разным объектам, типа и атрибутов шрифтов и других параметров, значения которых сохраняются
в файле текущей схемы. Отметим лишь, что закладка Main Tool Bar позволяет изменить кнопки, выводимые на панели инструментов для всех заголовков основного меню: File, Edit, Component, Windows, Options, Analysis. Также отметим, что установка режима резиновой линии Ruberbanding из закладки Common Options выведена на панель инструментов в виде кнопки
. Параметры закладки
Common Options, которые могут понадобиться при проведении моделирования приведены в ниже [1]
(Обычно их не требуется изменять).
Таблица 1.1. Параметры закладки Common Options
Параметр
Назначение
Значение по
умолчанию
General
Select Mode
Автоматическое включение режима выбора объектов схемы при завершении любого другого режима
No
Sound
Включение звукового сигнала предупреждения
Yes
Quit Warning
Вывод запроса подтверждения выхода из программы
Yes
Lock Tool Bar
Запрет перемещения строк инструментов
Yes
Print Background
Печать цветного фона схем и графиков
No
Time Stamp
Date Stamp
File Load Size
Warning Time
Размещение в верхнем левом углу графиков текущих результатов
моделирования с указанием даты
Размещение в верхнем левом углу графиков текущих результатов
моделирования с указанием времени
Количество файлов, включаемых в перечни последних загруженных
файлов (не более 1 6)
Длительность вывода предупреждений об ошибках
No
No
8
3c
Analysis
Floating Nodes Check
DC Path to Ground
Check
Convergence Assist
Add DC Path to Ground
Plot on Top
22
Вывод информации о наличии в схеме &quot;плавающих&quot; узлов (т.е. узлов,
к которым подсоединен только один компонент)
Проверка наличия пути по постоянному току на &quot;землю&quot; для всех узлов схемы перед началом моделирования
Включение утилиты Convergence Assist для попытки оптимизации параметров, влияющих на сходимость алгоритмов анализа (RELTOL,
ABSTOL, VNTOL, ITL2, ITL4, MNETHOD, GMIN)
Автоматическое добавление резисторов с сопротивлением, равным
1/GMIN, во все ветви, не имеющие путей по постоянному току на &quot;землю&quot;
Размещение графиков результатов моделирования поверх схем
No
Yes
Yes
No
Yes
Параметр
Значение по
умолчанию
Назначение
Select Curve Color
Окрашивание выбранных цепей
Yes
Inertial Cancellation
Сглаживание при выполнении логического моделирования коротких
импульсов, длительность которых меньше задержек цифровых
устройств
Yes
Analysis Progress Bar
Отображение индикатора процесса выполнения моделирования
No
Gmin Stepping
Auto Scale Grids
Включение метода вариации проводимости Gmin, если нормальный
режим расчета режима по постоянному току и метод вариации источников питания не обеспечивают сходимости
Задание количества сеток, используемых при автоматическом масштабировании графиков
Yes
5
Circuit
Text Increment
Node Snap
Auto Show Model
Component Cursor
Rubber-banding
Snow Slider
Nodes Recalculation
Threshold
Block Select Display
Mode
Automatically Add
Opamp lower Supplies
Автоматическое добавление &quot;1&quot; к именам Grid text при выполнении
операций вставки из буфера обмена, копирования путем &quot;перетаскивания&quot; курсором или зеркального отображения
Автоматическое обеспечение электрического соединения с выводом
компонента или концом проводника, если начальная точка проводимой линии не совмещена с ними, но попала в соседний узел сетки
Помещение модели каждого размещенного на схеме компонента в
окно текста
Автоматическая замена формы курсора изображением компонента,
выбранного для размещения на схеме
&quot;Растягивание&quot; проводников схемы, не отрывая их от узлов и выводов
компонентов при выполнении операций перемещения
Размещение движкового переключателя у изображений батарей и
резисторов при выполнении анализа Dynamic DC для изменения их
номиналов перемещением движков (минимальные и максимальные
значения номиналов определяются с помощью атрибутов SLIDER
MINI, SLIDER_MAX)
Максимальное количество узлов схемы, при превышении которого не
будут переопределяться номера узлов схемы при добавлении или
удалении компонентов или целей. При включении режима View Node
Numbers этот параметр игнорируется
Включение режима блочного выбора объектов, при котором окрашиваются фоновые объекты
Автоматическое добавление на схему и подключение источников питания ОУ VCC и VEE
Yes
Yes
Yes
Yes
Yes
No
1 000 000
Yes
Yes
Default properties for New Circuits — задание перечня параметров новой схемы, принимаемого по умолчанию. Смысл параметров в основном ясен из открывающейся закладки на английском
языке. Если возникает необходимость изменить цветовые параметры загруженной схемы, то используется команда Properties (F10
)
Global Settings — установка параметров моделирования, перевод которых приводится в табл.
1.2. Иногда, особенно при выполнении моделирования цифровых схем или смешанного моделирование может потребоваться изменение этих параметров.
Таблица 1.2. Глобальные параметры (Global Settings)
Имя опции
ABSTOL
CHGTOL
DEFAD
Наименование
Допустимая ошибка расчета токов в режиме Transient
Допустимая ошибка расчета заряда в режиме Transient
Диффузионная площадь стока МОП-транзистора
Размерность
Значение по
умолчанию
A
10-12
Кл
10-14
м2
0
23
Наименование
Размерность
Значение по
умолчанию
DEFAS
Диффузионная площадь истока МОП-nранзистора
м2
0
DEFL
Длина канала МОП-транзистора
м
10-4
DEFW
Ширина канала МОП-транзистора
м
10-4
Ом
2
кОм
20
Имя опции
DIGDRVF
DIGDRVZ
DIGERRDEFAULT
DIGERRLIMIT
DIGFREQ
DIGINITSTATE
DIGIOLVL
DIGMNTYMX
DIGMNTYSCALE
DIGOVRDRV
DIGTYMXSCALE
GMIN
ITL1
ITL2
JITL4
PERFORM M
PIVREL
PIVTOL
RELTOL
RMIN
SD
TNOM
24
Минимальное выходное сопротивление цифровых
устройств (для моделей UIO)
Максимальное выходное сопротивление цифровых
устройств (для моделей UIO)
Максимальное количество контролируемых ошибок
цифровых устройств
Максимальное количество сообщений об ошибках
в цифровых устройствах
Максимальная частота дискретизации при анализе
цифровых устройств (минимальный временной шаг
равен 1/ DIGFREQ)
Установка начального состояния триггеров: 0 сброс; 1 - установка; 2-Х
20
10000
ГГц
2
Уровень интерфейса А/Ц, Ц/А по умолчанию
Селектор выбора задержки цифрового устройства
по умолчанию: 1 - минимум; 2 - типичное значение;
3 - максимум; 4 - мин/макс (наихудший случай для
цифровых устройств)
Масштабный коэффициент для расчета минимальной задержки
Отношение выходных сопротивлений цифровых
устройств, при котором изменяется состояние общего выходного узла
Масштабный коэффициент для расчета максимальной задержки
Минимальная проводимость ветви цепи (проводимость ветви, меньшая GMIN, считается равной
нулю)
1
2
0,4
3
I
1,6
См
10-12
Максимальное количество итераций в режиме DC
Максимальное количество итераций при расчете
передаточных функций по постоянному току при
переходе к последующей точке
Максимальное количество итераций при переходе
к следующему моменту времени в режиме
Transient
Количество значащих цифр до и после десятичной
точки в таблицах выходных данных плюс единица
Относительная величина элемента строки матрицы, необходимая для его выделения в качестве
ведущего элемента (режим АС)
Абсолютная величина элемента строки матрицы,
необходимая для его выделения в качестве ведущего элемента (режим АС)
Допустимая относительная ошибка расчета напряжений и токов в режиме Transient
Минимальное значение сопротивления нагрузки
полупроводниковых приборов
Отношение диапазона разброса случайных параметров к cреднеквадратичному отклонению
Номинальная температура
10
100
50
10
2
10-3
10-13
10-3
Ом
10-6
2,58
С
27
Имя опции
TRTOL
VNTOL
WIDTH
NOOUTMSG
PRIVATEANALOG
PRIVATEDIGITAL
TRYTOCOMPACT
METHOD: GEAR, TRAPEZOIDAL
Наименование
Коэффициент, определяющий допустимую ошибку
усечения в режиме Transient
Допустимая ошибка расчета напряжений в режиме
Transient
Длина строки выходного файла (80 или 132)
Подавление передачи в выходной файл сообщений об ошибках моделирования
Создание копий моделей всех аналоговых компонентов. При наличии таких копий вариация параметров модели относится только к одному выбранному компоненту, в противном случае ко всем компонентам, имеющим такую модель. При наличии в
модели параметра DEV такие копии создаются
автоматически независимо от значения параметра
PRIVATEANALOG
Создание копий моделей всех цифровых компонентов. При наличии таких копий вариация параметров модели относится только к одному выбранному компоненту, в противном случае ко всем компонентам, имеющим такую модель. При наличии в
модели параметра DEV такие копии создаются
автоматически независимо от значения параметра
PRIVATEDIGITAL
Представление в компактной форме информации о
распределении токов и напряжений в длинных
линиях с потерями
Выбор метода численного интегрирования дифференциальных уравнений
Размерность
Значение по
умолчанию
7
В
10-6
80
No
Yes
No
No
No/Yes
User Definitions — открытие и просмотр глобальных определений пользователя, сделанных с
помощью директивы .Define/
Model Parameters Limits Editor — открытие окна редактирования ограничений на параметры
моделей.
Components Palettes — включение различных наборов компонентов. Удобно для рисования
схем различного назначения. Самые употребительные наборы — Analog и Digital.
ANALYSIS :
Содержит команды запуска различных режимов моделирования:
Transient... (Alt+1) — анализ переходных процессов
AC... (Alt+2) — анализ частотных характеристик
DC ... (Alt+3) — анализ передаточных функций по постоянному току
Dynamic DC (Alt+4) — расчет режима по постоянному току и его динамическое отображение на
схеме
Transfer Function... (Alt+5) — расчет передаточных функций по постоянному току, а также
входного и выходного сопротивления
Sensitivity... (Alt+6) — расчет чувствительностей по постоянному току одного или нескольких
выражений по отношению к одному или нескольким параметрам
Probe Transient... (Ctrl+Alt+1) — анализ переходных процессов и отображение их результатов в
режиме Probe.
25
Probe AC... (Ctrl+Alt+2) — анализ частотных характеристик и отображение их результатов в режиме Probe.
Probe DC... (Ctrl+Alt+3) — анализ передаточных функций по постоянному току и отображение
их результатов в режиме Probe.
Следует отметить, что при запуске любого режима Probe (Transient, AC, DC) в верхней части
экрана появляются новые пункты меню: Probe, Vertical, Horizontal, которые содержат команды управления этим режимом (они будут рассмотрены ниже).
26
2.
Форматы задания компонентов
2.1.
Общие сведения
Параметры всех электронных компонентов задаются при помещении компонента в принципиальную схему — щелчком левой клавиши мыши открывается окно задания параметров соответствующего пассивного (активного) компонента.
Все компоненты в MicroСAP-7 могут быть заданы двумя способами:

непосредственным заданием в открывшемся окне параметров номинального значения компонента (позиция VALUE) или (и) имени используемой модели (позиция MODEL);

заданием в окне параметров компонента в строке VALUE имени переменной, обозначающей
номинал компонента (например Rload, Cout, Cin, Lpins и т.д.) и последующим текстовым вводом
информации, ставящим в соответствие этой переменной его номинал или модель. Текстовый
ввод информации выполняется директивой &laquo;.Define&raquo; и может быть осуществлен как в схемном
окне (что более наглядно), так и в текстовом.
Задание вторым способом является более универсальным. Оно предоставляет пользователю
ряд дополнительных возможностей при выполнении анализа, с которыми читатель познакомится в
последующих примерах.
Ввод номинальных значений компонентов осуществляется в системе СИ, за исключением катушки с магнитным (нелинейным) сердечником. Значения компонентов задаются либо непосредственно (2600), либо в показательной форме (2.3E3), либо условными буквенными обозначениями
(5K). Используются следующие буквенные обозначения для множителей (см. табл. 2.1):
Таблица 2.1. Буквенные обозначения множителей для численных значений
10-15
10-12
10-9
10-6
10-3
103
106
109
1012
фемто
пико
нано
микро
милли
кило
гига
тера
N (n)
U (u)
M (m)
K (k)
мега
MEG
(meg)
G (g)
T (t)
F (f)
P (p)
На рис. 2.1. приведен пример задания одного из пассивных компонентов — резистора. В рассмотренном примере на экране отображается позиционное обозначение компонента (PART), величина (VALUE) и имя модели, что определяется установкой соответствующих флажков отображения в
окне задания компонента (в данном случае Resistor). Отметим, что величина любого пассивного компонента (сопротивление резистора, емкость конденсатора, индуктивность катушки) может определяться как любая функция узловых напряжений схемы, токов ветвей, времени и температуры, что
выгодно отличает программу MicroCap-7 от PSPICE.
27
Рис. 2.1 Способы задания компонента
При создании принципиальных схем используются числа, переменные и математические выражения следующего вида.
2.1.1.
Числа
Числовые значения параметров компонентов представляются в виде:

действительных чисел с фиксированным десятичным знаком (обратим внимание, что в качестве десятичного знака в программе МС7 используется точка). Например, сопротивление 2,5
кОм, записывается как 2500 или 2.5k, а емкость 1 мкФ как 0.000001;

действительных чисел с плавающей точкой, например, емкость 1.5 мкФ может быть записана
как 1.5Е-6;

действительных чисел с плавающей точкой в инженерной интерпретации, согласно которой
различные степени десяти обозначаются буквами (см. табл. 2.1).
Для экономии места на осях X, Y графиков результатов моделирования малая буква &quot;m&quot; обозначает 103, большая буква &quot;М&quot; — 106 (вместо MEGA). Во всех остальных случаях большие и малые
буквы не различаются.
Например, сопротивление 1,5 МОм может быть записано как 1.5MEG, 1.5meg или 1500К, емкость 1 мкФ как 1U или 1uF. В последнем примере показано, что для большей наглядности после
стандартных буквенных обозначений допускается помещать любые символы, которые при интерпретации чисел не будут приниматься во внимание. Пробелы между числом и буквенным суффиксом не
допускаются!
2.1.2.
Переменные
В программе МС7 ряд констант и переменных имеют стандартные значения:
Т — время в секундах;
F — частота в герцах;
Е — ЕХР(1)=2,718281828;
S — комплексная переменная, используемая при анализе аналоговых устройств (в курсе ОТЦ и
Мат. Анализа она обозначалась p);
GMIN — минимальная проводимость ветви, задаваемая в диалоговом окне Options&gt;Global settings;
PI — число =3.14159265389795;
28
TEMP — температура компонентов в градусах Цельсия;
VT
—
температурный
потенциал
р-п—перехода,
равный
1,380622610–23х
(273,15+ТЕМР)/(1,60219181019); при ТЕМР=27&deg;С VT=25,86419mB;
J — корень квадратный из –1;
Tmin — начальный момент времени расчета переходных процессов;
Тmах — конечный момент времени расчета переходных процессов;
Fmin — начальная частота расчета частотных характеристик;
Fmax — конечная частота расчета частотных характеристик;
PGT — общая мощность, генерируемая в схеме;
PST — общая мощность, запасаемая в схеме;
РОТ — общая рассеиваемая в схеме мощность;
Z — комплексная переменная, используемая при анализе дискретных устройств (цифровых
фильтров).
Номера узлов, присваиваемые программой МС7 автоматически, представляют собой целые
числа, например 0, 2, 25. Кроме того, пользователь по команде Options&gt;Mode/Text может присвоить
любому узлу имя в виде текстовой алфавитно-цифровой переменной, начинающейся с буквы или
символа &quot;_&quot; и содержащей не более 50 символов, например А1, Out, Reset.
В математических выражениях могут использоваться следующие переменные (см. табл. 2.2):
Таблица 2.2. Переменные, используемые в программе Microcap-7
D(A)
V(A,B)
Логическое состояние цифрового узла А
Напряжения на узле А (напряжения измеряются относительно узла &quot;земли&quot;, которой
программа присваивает номер 0)
Разность потенциалов между узлами А и В
V(D1)
Напряжение между выводами двухвыводного компонента D1
I(D1)
IR(Q1)
Ток через двухвыводной компонент D1
Ток через ветвь между узлами А и В (между этими узлами должна быть включена единственная ветвь)
Ток, втекающий в вывод R компонента Q1 с количеством выводов больше 2
VRS(Q1)
Напряжение между выводами R и S компонента Q1 с количеством выводов больше 2
CRS(Q1)
Емкость между выводами R и S компонента Q1 с количеством выводов больше 2
QRS(Q1)
Заряд емкости между выводами R и S компонента Q1 с количеством выводов больше 2
R(R1)
Сопротивление резистора R1
C(X1)
Емкость конденсатора или диода Х1
Q(X1)
Заряд конденсатора или диода Х1
L(X1)
Индуктивность катушки индуктивности или сердечника Х1
X(L1)
Магнитный поток в катушке индуктивности или сердечнике L1
B(L1)
Магнитная индукция сердечника L1
H(L1)
Напряженность магнитного поля в сердечнике L1
RND
Случайное число с равномерным законом распределения на отрезке [0, 1]_
ONOISE
Корень квадратный из спектральной плотности напряжения шума, отнесенного к выходу
V(A)
I(A,B)
29
PG(V1)
Корень квадратный из спектральной плотности напряжения шума, отнесенного ко входу, равный ОNOISЕ/коэффициент передачи по мощности
Мощность, генерируемая источником V1
PS(X1)
Реактивная мощность, накапливаемая в устройстве Х1
PD(D1)
Мощность, рассеиваемая в устройстве D1
INOISE
В этом перечне символы А и В обозначают номера узлов схемы, D1 — имя компонента с двумя
выводами или управляемого источника, Q1 — имя любого активного устройства или линии передачи.
Символы R и S заменяются аббревиатурами выводов устройств согласно таблице 2.3:
Таблица 2.3. Аббревиатуры выводов электронных компонентов
Аббревиатуры выводов
Устройство
Названия выводов
МОП-транзистор (MOSFET)
D, G, S, В
Сток, затвор, исток, подложка
Полевой транзистор (JFET)
D, G, S
Сток, затвор, исток
Арсенид-галлиевый полевой
транзистор (GaAsFET)
D, G, S
Сток, затвор, исток
Биполярный транзистор (BJT)
В, Е, С, S
База, эмиттер, коллектор, подложка
Биполярный транзистор с изолированным затвором (IGBT)
С, G, E
Коллектор, затвор, эмиттер
Линия передачи (Tran. Line)
АР, AM, ВР, ВМ
Вход+, вход–, выход+, выход–
Например, следующие выражения означают: I(R1) — ток через резистор R1; R(Rload) — сопротивление резистора Rload; IC(Q1) — ток коллектора биполярного транзистора Q1; VBE(Q1) — напряжение между базой и эмиттером биполярного транзистора Q1, VGS(M1) — напряжение затвор-исток
МДП-транзистора M1.
2.1.3.
Математические выражения и функции
В сложных текстовых переменных директивы .DEFINE и при указании переменных, выводимых
на графиках при проведении моделирования, возможно использование следующих математических
операций.
Арифметические операции
+ — Сложение;
– — Вычитание;
* — Умножение;
/ — Деление;
DIV — Целочисленное деление;
MOD — Остаток целочисленного деления.
Тригонометрические, показательные, логарифмические функции от действительных и комплексных величин (х — действительная, z — комплексная величина)
Ехр(х) — экспонента;
Ln(x) — натуральный логарифм |х|;
30
Log(x) или Log10(x) — десятичный логарифм |х|;
Sin(x) — синус, х в радианах;
Cos(x) — косинус, х в радианах;
Таn(х) — тангенс, х в радианах;
Asin(x) — арксинус;
Acos(x) — арккосинус;
Atn(x) или Arctan(x) — арктангенс;
Atan2(y,x) = Atn(y/x) ;
Sinh(z) — гиперболический синус;
Cosh(z) — гиперболический косинус;
Tanh(z) — гиперболический тангенс;
Coth(z) — гиперболический котангенс.
Функции от комплексных величин (z)
DB(z) — величина в децибелах, равная 20*LOG(|z|);
RE(z) — действительная часть z,
IM(z) — мнимая часть z;
MAG(z) — модуль z. При построении графиков допустимо просто указать z;
PH(z) — фаза z в град.;
GD(z) — групповое время запаздывания.
Прочие функции от действительных и комплексных величин
(x,y — действительная, z — комплексная величина, n,m — целые положительные)
ABS(y) — абсолютное значение у,
SQRT(y) — корень квадратный из модуля у,
SGN(y) — знак числа у,
POW(y,x) — степенная функция комплексных величин y x  e xln  y  , обозначаемая как y^x;
PWR(y,x) — действительная часть степенной функции y^x;
** — степенная функция, например 5**2=25;
PWRS(y,x) — действительная часть степенной функции y^x;
FACT(n) — факториал целого числа n;
RND — случайные числа на отрезке [0, 1] с равномерным законом распределения;
STP(x) — функция единичного скачка, равная 1 при T&gt;x и равная 0 при T&lt;=x. См. пример
STP_SOURCE.CIR;
IMPULSE(y) — импульсная функция от аргумента у. Представляет собой импульс с нулевой
длительностью фронтов, начинающий действовать в момент времени T=0, амплитудой y, и длительностью 1/y (т.е. площадь импульса всегда равна 1). См. пример IMPULSE_SOURCE.cir;
ТАВLЕ(х,х1,у1,х2,у2,...,хn,уn) — табличная зависимость функции у от х. Переменная х должна
быть определена как параметр с помощью директивы .define Задаются координаты точек (хi, уi), в
промежуточных точках используется линейная интерполяция. Если x&lt;x1 то у=у1, если х&gt;хn, то у=уn;
Waveform(&lt;имя_файла&gt;,у) — импорт функции у из файла &lt;имя файла&gt;, имеющего стандартный формат МС7; в этот файл пользователя (User source) могут быть записаны дискретизированные
31
результаты моделирования, если на закладке Save Curves команды Properties (F10) выбрать из списка имя переменной и вести имя файла *.USR;
IМРОRТ(&lt;имя_файла&gt;,у) — импорт функции у из файла. Текстовый файл должен иметь формат выходного файла SPICE или МС7; в него помещается таблица значений переменных, в качестве
которых может быть время (Т), частота (F), напряжение источника напряжений (V(имя источника)),
ток источника тока (I(имя источника)), и выражение для у;
JN(n,z[,m]) — функция Бесселя л-го порядка первого рода комплексного аргумента z, полученная суммированием первых m членов ряда; по умолчанию m=10;
J0(Z) — функция Бесселя нулевого порядка первого рода комплексного аргумента z, аналогичная JN(0,z,10);
J1(z) — функция Бесселя первого порядка первого рода комплексного аргумента z, аналогичная
JN(1,z,10);
YN(n,z[,m]) — функция Бесселя n-го порядка второго рода комплексного аргумента z, полученная суммированием первых m членов ряда; по умолчанию m=10;
Y0(z) — функция Бесселя нулевого порядка второго рода комплексного аргумента z, аналогичная YN(0,z,10);
Y1(z) — функция Бесселя нулевого порядка второго рода комплексного аргумента z, аналогичная YN(1,z,10);
Series(n,n1,n2,z) – расчет текущей суммы ряда комплексной функции z=z(n) при изменении n от
n1 до n2;
DIFA(u, v[,d]) — сравнение значений двух функций u и v во всех дискретных точках при расчете
переходных процессов. DIFA присваивается значение 1, если во всех точках абсолютное значение
разности функций меньше величины d, в противном случае присваивается 0. Параметр d необязательный, по умолчанию полагается d=0;
DIFD(u,v[,d]) — сравнение значений двух логических сигналов u и v во всех дискретных точках
при расчете переходных процессов. DIFD присваивается значение 1, если во всех точках значения
функций отличаются друг от друга, в противном случае присваивается 0. В течение первых d секунд
после начала расчета переходных процессов сравнение не проводится. Параметр d необязательный,
по умолчанию полагается d= 0.
Интегрально-дифференциальные операторы (x,y,u — действительные переменные)
DER(u,x) — производная переменной u по переменной x;
SUM(y,x[,sfart]) — текущий интеграл от переменной у по переменной х; начальное значение х
равно start,
SD(y[,sfarf]) — текущий интеграл от переменной у по времени Т при анализе переходных процессов, по частоте F при АС-анализе или по переменной DCINPUT1 при DC-анализе; начальное значение независимой переменной равно start,
DD(y) — производная у по времени Т при анализе переходных процессов, по частоте F при АСанализе частотных характеристик и по переменной DCINPUT1 при DC-анализе по постоянному току;
RMS(y[,sfarf]) — текущее среднеквадратичное значение величины y при интегрировании по
t
времени Т при анализе переходных процессов (эквивалентно
32
1
  y 2 t   dt ), по частоте F при АСt t start
анализе частотных характеристик и по переменной DCINPUT1 при DC-анализе по постоянному току;
начальное значение независимой переменной равно значению start,
AVG(y[,start]) — текущее среднее значение переменной у при интегрировании по времени Т
t
1
при анализе переходных процессов (эквивалентно   y t   dt ), по частоте F при АС-анализе чаt t start
стотных характеристик; начальное значение независимой переменной равно значению start,
SDT(y) — текущий интеграл процесса y(t) относительно времени Т, начиная от T=Tmin;
DDT(y) — производная процесса y(t) относительно времени Т;
DEL(y) — приращение процесса y(t) относительно предыдущей точки при расчете переходных
процессов. Производная рассчитывается как отношение двух таких операторов, например производная dy/dt равна DEL(y)/DEL(t);
Операции отношения и логические операции (x,y — действительные величины, b — логическое выражение)
= — равно;
&gt; — больше;
&lt; — меньше;
&gt;= — больше или равно;
&lt;= — меньше или равно;
&lt;&gt; или != — не равно;
== — равно;
MIN(x,y) — минимальное значение величин х, у,
МАХ(х,у) — максимальное значение величин х, у,
LIMIT (u,х,у) — равно u, если х&lt;u&lt;у, равно х, если u&lt;х; равно у, если u&gt;у,
IF(b,x,y) — функция равна х, если b истинно, в противном случае равна у.
AND — логическое И;
NAND — отрицание логического И (И-HE);
NOT — отрицание;
OR — логическое ИЛИ;
NOR — отрицание логического ИЛИ (ИЛИ-НЕ);
XOR — исключающее ИЛИ;
Примечание: логическим выражениям присваиваются значения 1, если они истинны, и 0, если
они ложны.
Операции с логическими переменными (состояниями цифровых узлов схемы)
HEX(A,B,C,D) — значение состояний цифровых узлов А, В, С, D в шестнадцатеричной системе;
BIN(A,B,C,D) — значение состояний цифровых узлов А, В, С, D в двоичной системе;
DEC(A,B,C,D) — значение состояний цифровых узлов А, В, С, D в десятичной системе;
OCT(A,B,C,D) — значение состояний цифровых узлов А, В, С, D в восьмеричной системе;
+ — сумма двух двоичных, восьмеричных, шестнадцатеричных или десятичных чисел;
– — разность двух двоичных, восьмеричных, шестнадцатеричных или десятичных чисел;
DIV — целочисленное деление двух двоичных, восьмеричных, шестнадцатеричных или десятичных чисел;
33
MOD — остаток после целочисленного деления двух двоичных, восьмеричных, шестнадцатеричных или десятичных чисел;
&amp; — операция поразрядного логического И состояний двух цифровых узлов;
| — операция поразрядного логического ИЛИ состояний двух цифровых узлов;
^ — операция поразрядного логического исключающего ИЛИ состояний двух цифровых узлов.
~ — Операция поразрядного логического отрицания состояния цифрового узла
Операторы обработки сигналов (u, v — действительные сигналы при анализе переходных
процессов, S — спектры сигналов)
HARM(u) — расчет гармоник сигнала u;
THD(S[,F]) — коэффициент нелинейных искажений спектра S, в процентах относительно уровня составляющей на частоте F; если частота F не указана, то относительно составляющей на частоте первой гармоники, равной 1/Тmax;
IHD(S[,F]) — коэффициент нелинейных искажений отдельных составляющих спектра S, в процентах относительно уровня составляющей на частоте F; если частота F не указана, то относительно
составляющей на частоте первой гармоники, равной 1/Тmax;
FFT(u) — прямое преобразование Фурье дискретных отсчетов сигнала u(t). Отличается от
функции HARM множителем N/2 для гармоник с первой до N-й и множителем N для нулевой гармоники, где N — количество дискретных отсчетов входного сигнала u(t);
IFT(S) — обратное преобразование Фурье спектра S;
CONJ(S) — сопряженный комплексный спектр S;
CS(u, v) взаимный спектр сигналов u и v, равный CONJ(FFT(v))*FFT(u)*dt*dt;
AS(u) — собственный спектр сигнала u(t), равный CS(u, u);
CC(u,v) — взаимная корреляционная функция сигналов u и v, равная
IFT(CONJ(FFT(v))*FFT(u))*dt;
АС(u) — автокорреляционная функция сигнала и, равная IFT(CONJ(FFT(u))*FFT(u))*dt;
COH(u,v) — нормированная корреляционная функция сигналов u и v, равная
CC(u,v)/sqrt(AC(u(0))*AC(v(0)));
REAL(S) — действительная часть спектра S, рассчитанного с помощью FFT;
IMAG(S) — мнимая часть спектра S, рассчитанного с помощью FFT;
MAG(S) — модуль спектра S, рассчитанного с помощью FFT;
PHASE(S) — фаза спектра S, рассчитанного с помощью FFT.
Параметры моделей
Параметры моделей компонентов можно вывести в текстовой форме или на графики, используя ссылки на них в виде: позиционное_обозначение_компонента.имя_параметра
Приведем несколько примеров:
Q1.bf — коэффициент усиления тока BF биполярного транзистора Q1;
М1.GAMMA — параметр GAMMA МОП-транзистора М1;
J1.VT0 — пороговое напряжение VT0 полевого транзистора J1.
В связи с тем, что в процессе моделирования параметры моделей компонентов не изменяются,
их графики представляют собой прямые линии. Тем не менее, строить их имеет смысл при выполнении вариации параметров или статистических испытаниях по методу Монте-Карло, чтобы убедиться,
что изменения параметров производятся в правильном диапазоне.
34
Правила использования выражений и переменных
1. Все параметры компонентов могут быть функцией времени Т (при анализе переходных
процессов), произвольных напряжений и токов, температуры TEMP, комплексных переменной s и z
(при анализе частотных характеристик).
Приведем примеры:
1.0/(1.0+.001*s) — передаточная функция фильтра низких частот, заданная с помощью преобразования Лапласа;
exp(-T/.5)*sin(2*PI*10*T) — функциональный источник затухающего гармонического сигнала с
частотой 10 Гц;
5.0pF*(1+2e-6*T) — емкость конденсатора, зависящая от времени;
4.7K*(1+.3*V(P,M)) — сопротивление резистора, зависящее от напряжения;
2.6 uH*(1+2*(TEMP-273)^2) — индуктивность, зависящая от температуры;
V(VCC)*I(VCC) — мгновенная мощность источника напряжения VCC;
SUM(V(VCC)*I(VCC),T) — энергия источника VCC на интервале времени от 0 до Т;
FFT(V(A)+V(B)) — преобразование Фурье от V(A)+V(B));
RMS(V(Out)) — текущее среднеквадратическое значение напряжения V(Out));
IM(V(7)) — мнимая часть комплексного напряжения в узле 7;
MAG(VCE(Q1)*IC(Q1)) — модуль комплексной мощности, выделяемой на биполярном транзисторе Q1 при анализе частотных характеристик;
5*(Т&gt;10 ns AND T&lt;20 ns) — одиночный импульс с амплитудой 5В на интервале времени 10...20
нс;
5*((Т mod 50)&gt;10 AND (T mod 50)&lt;20) — импульс с амплитудой 5 В на интервале времени от 10
с до 20 с, период 50 с.
2. Значения операторов отношения и булевых операторов равно1.0, если они истинны, и 0.0,
если они ложны.
3. Интегро-дифференциальные операторы (AVG, DEL, RMS и SUM…) могут использоваться
только при выводе данных и не могут использоваться в выражениях для параметров.
4. ONOISE и INOISE могут использоваться только при АС анализе и их нельзя использовать
в выражениях в совокупности с другими величинами, например с напряжениями.
5. При вычислении преобразования Фурье FFT в режиме АС (при этом рассчитываются импульсные характеристики как функции времени Т) графики других переменных (напряжений, токов
и т. п.) строятся неправильно.
Поэтому их следует выводить на экран по отдельности в разных сеансах моделирования.
6. В АС анализе все промежуточные вычисления выполняются с комплексными величинами.
Однако при построении графиков указание имени переменной означает построение графика ее
модуля.
Например, указание имени переменной V(1) эквивалентно использованию функции вычисления модуля комплексной величины MAG(V(1)). И более того, спецификация выражения V(1)*V(2)
приведет к построению модуля произведения двух комплексных напряжений. Для вывода мнимой
части произведения используется запись IM(V(1)*V(2)), действительной части — RE(V(1)*V(2)).
7. При моделировании в режимах АС и DC значение переменной Т (время) полагается равной
нулю. При расчете переходных процессов и в режиме DC равной нулю полагается переменная
F(частота).
35
8. В выражениях для преобразования Лапласа передаточных функций может использоваться
только символ S для обозначения комплексной переменной.
При отсутствии в выражении для такой передаточной функции символа S выдается сообщение
об ошибке. Поэтому преобразования Лапласа нельзя использовать для задания линейных блоков с
постоянным коэффициентом передачи — в этих целях используйте другие типы управляемых источников сигналов.
9. Комплексные величины можно использовать только в следующих функциях: +, –, *, /, sqrt,
pow, In, log, exp, cosh, sinh, tanh, coth.
В функциях другого типа комплексные величины заменяются их действительными частями,
например, функция действительного переменного SIN при наличии комплексного аргумента С1 равна
sin(C1)=sin(RE(C1)).
10. Перед выполнением моделирования или составлением списка электрических соединений
программа МС7 вычисляет значения всех операторов .DEFINE.
В связи с этим применение этих операторов внутри оператора .MODEL могут привести к ошибке. Пусть, например, имеются два оператора
.define BF 111
.model Q1 NPN (BF=50 ...)
В результате подстановки в оператор .MODEL определения
define BF 111 он приобретет неожиданный совершенно ошибочный вид:
.model Q1 NPN (111=50 ...)
Поэтому применение определений .DEFINE в директиве .MODEL недопустимо! В этих целях
можно использовать идентификатор промежуточной переменной. В рассматриваемом примере это
может быть:
.define VALUE 111
.model Q1 NPN (BF= VALUE ...)
Тогда после подстановки оператор .MODEL приобретет правильный вид:
.model Q1 NPN(BF=111 ...)
11. Помните, что выражения в операторах определения переменных .DEFINE понимаются
буквально. Пусть, например, имеются два определения
.define A 4+C
.define В А*Х
Следует иметь в виду, что выражение 4+С не подразумевается заключенным в скобки (4+С).
Поэтому величина В равна 4+С*Х. Если же величина В должна быть равной (4+С)*Х, скобки нужно
проставить в определении величины А:
.define А (4+С)
2.1.4.
Текстовые директивы
Директивы программы МС7 представляют собой текстовые выражения, начинающиеся с точки
&quot;.&quot;. При графическом вводе схем они помещаются в окне текста или непосредственно в окне схем,
при текстовом вводе в формате SPICE — в текстовом файле [1]. В связи с этим МС7 имеет два
набора директив: один для графического ввода схем, второй для текстовых файлов в формате
SPICE. Поскольку предлагаемый курс в основном предполагает графический ввод схем и их последующий анализ, то приведем ниже только перечень директив МС7 для схемного ввода.
36
Все директивы SPICE и большинство директив, помещаемых на схемах, совпадают с директивами известной программы PSpice [4], исключение составляют лишь директивы .DEFINE, .MACRO и
.PARAMETERS. Приведем описания наиболее употребительных директив в алфавитном порядке с
указанием областей их применения.
.DEFINE — присвоение значений идентификаторам переменных
Формат (только для ввода схем): .DEFINE &lt;текст1&gt; &lt;текст2&gt;
Выполняется замена простой текстовой переменной &lt;текст1&gt; сложной текстовой переменной
&lt;текст2&gt;. Приведем примеры:
.DEFINE R1 TEMP*.1*EXP(-T/tau) — текстовая переменная R1 (обозначающая сопротивление
резистора) заменяется выражением для ее вычисления TEMP*.1*EXP(-T/tau); обратим внимание, что
таким образом можно задать зависимость любого параметра схемы от времени, частоты и т. п., что
реализуется в программе PSpice гораздо сложнее;
.DEFINE Q1 КТ312А — позиционное обозначение транзистора Q1 при моделировании заменяется типом транзистора КТ312А.
.DEFINE SQUAREWAVE
+ Ons 0
+ LABEL=START
+ +10ns 1
+ +10ns 0
+ +10ns GOTO START 10 TIMES — если при описании атрибутов цифрового сигнала STIM использовать переменную SQUAREWAVE, в дальнейшем при моделировании она будет заменена текстовым описанием периодического сигнала.
.INCLUDE — включение текстового файла
Формат (для файлов SPICE или ввода схем): .INCLUDE] &lt;&quot;имя_файла&quot;&gt;
Копирование директив, помещенных в текстовом файле, в текущую схему перед выполнением
моделирования. Имя файла может включать имя диска и полный путь к нему. Заключать имя файла
в кавычки не обязательно. В основном используется для подключения файлов библиотек математических моделей небольшого размера. В связи с тем, что текстовые файлы включаются в описание
схемы целиком, для подключения больших библиотек целесообразнее использовать директиву .LIB,
подключающую только описания тех моделей, на которые в схеме есть ссылки.
Пример: .INCLUDE D:\MC7\exdef.txt
.LIB — подключение файлов библиотек компонентов
Формат (для файлов SPICE или ввода схем): .LIB [&quot;имя файла библиотеки&quot;]
В текстовом файле библиотеки с указанным именем содержится описание встроенных моделей
одного или нескольких компонентов (параметры каждого компонента вводятся по директивам
.MACRO, .MODEL или .SUBCKT/.ENDS — для подсхемы на языке SPICE). В этом же файле могут
быть помещены комментарии и обращения к другим директивам .LIB. Применение директивы .LIB
служит альтернативой и одновременно дополнением размещению описаний моделей непосредственно в окне текста схемы или в файле SPICE. Имя файла может включать имя диска и полный
путь к нему. Заключать имя файла в кавычки не обязательно. Расширение имени файлам библиотек
по умолчанию не назначаются. Поэтому расширение имени, например .LIB, должно быть указано в
37
явном виде. В этом файле могут быть использованы только директивы .MACRO, .MODEL, .SUBCKT,
.ENDS или .LIB. Другие директивы не допускаются. Строки, начинающиеся с символа &laquo;*&raquo;, игнорируются целиком. Игнорируются также фрагменты строк после символа &laquo;;&raquo;.
При указании в задании на моделирование имени какого-либо конкретного компонента, модель
которого содержится в библиотечном файле, в ОЗУ загружается не весь файл, а только его часть,
относящаяся к данному компоненту.
Если имя файла не указано, то по умолчанию загружается файл NOM.LIB. Но в связи с тем, что
этот файл просматривается всегда, то ввод директивы .LIB без указания имени файла имеет смысл
применять для изменения порядка просмотра файлов библиотек (см. ниже). Наиболее часто ее применяют для указания имен файлов библиотек, отсутствующих в NOM.LIB или имеющих другой вариант модели какого-нибудь компонента.
Приведем примеры:
.LIB &quot;KT315A.mod&quot; - подключение файла описания модели транзистора КТ315А, находящегося
в подкаталоге \MC7\DATA;
.LIB &quot;D:\MC7\DATA\RUS\d.lib&quot; — подключение библиотеки диодов, находящейся на диске D в
подкаталоге \MC7\DATA\RUS.
В каталоге MC7\DATA\ должен находиться файл NOM.LIB, в котором перечислены директивы
подключения всех используемых библиотек. Приведем пример этого файла, поставляемого вместе с
МС7 и дополняемого пользователем:
.lib &quot;utility.lbr&quot; .lib &quot;diode.lbr&quot;
.lib &quot;linear.lib&quot;
.lib &quot;nation.lib&quot;
.lib &quot;analog.lib&quot;
.lib &quot;digio.lib&quot;
.lib &quot;digOOO.lib&quot;
.LIB &quot;D:\MC7\DATA\RUS\qrus.lib&quot;
.LIB &quot;D:\MC7\DATA\ RUS\d.lib&quot;
.LIB &quot;D:\MC7\DATA\ RUS\digit.lib&quot;
В случае, когда одна и та же модель имеет различные описания, находящихся в разных файлах, необходимо учитывать, в каком порядке программа МС7 выполняет поиск моделей:

в окне текста;

в файле, имя которого указано в атрибуте FILE (если таковой имеется);

в файлах, перечисленных в директиве .LIB;

в файлах, перечисленных в файле NOM.LIB, просматриваемом по умолчанию.
.MACRO — задание определений макросов
Формат (только для ввода схем):
.MACRO &lt;имя макроса&gt; &lt;имя параметра схемы (список значений параметров) &gt;
Подобно директиве .DEFINE определяет имя макроса и набор значений параметров, подставляемых в схему. Используется для более компактной записи параметров моделей на схеме, где вместо длинного определения набора параметров записывается имя макроса.
.MACRO MY_SCR SCR(50m,40m,1u,1,50,50Meg,30u,105,1)
Здесь дано определение макроса MY_SCR, который в описании модели тиристора будет заменен списком параметров SCR(50m,40m,1u,1,50,50l\/Ieg,30u,105,1).
38
.MODEL — описание модели компонента
Формат (для файлов SPICE или ввода схем):
.MODEL &lt;имя модели&gt; [АКО: имя модели прототипа&gt;] &lt;имя типа модели&gt;
+ ([[&lt;имя параметра&gt;=&lt;значение&gt;] [LОТ=&lt;разброс 1&gt;[%]] [DEV=&lt;разброс 2&gt;[%]]]*
+ [Т_АВ5&gt;=&lt;значение&gt;] или [T_REL__GLOBAL=&lt;значение&gt;] или + [T_REL_LOCAL=&lt; значение&gt;])
Здесь &lt;имя модели&gt; — имя модели компонента схемы, назначаемое пользователем произвольно, например RLOAD, KT315V, D104. После ключевого слова АКО (A Kind Of) помещается ссылка на имя модели прототипа, что позволяет указывать только значения различающихся параметров.
Тип компонента определяется &lt;именем типа модели&gt;, как указано в табл. 2.4.
Таблица 2.4. Тип компонентов
Имя типа
модели
Тип компонента
Аналоговые компоненты
RES
САР
CORE
IND
D
GASFET
IGBT
NPN
PNP
LPNP
NJF
PJF
NMOS
PMOS
TRN
VSWITCH
ISWITCH
ОРА*
PUL*
SIN*
DINPUT
DOUTPUT
UADC
UDAC
UIO
UGATE
UTGATE
UBTG
UEFF
UGFF
UDLY
UPLD
Резистор
Конденсатор
Магнитный сердечник трансформатора
Индуктивность
Диод
Арсенид-галлиевый полевой транзистор с каналом n-типа
Биполярный транзистор с изолированным затвором
Биполярный n–р–n-транзистор
Биполярный р–n–p-транзистор
Боковой биполярный р–n–p-транзистор
Полевой транзистор с каналом n-типа
Полевой транзистор с каналом р-типа
МОП-транзистор с каналом n-типа
МОП-транзистор с каналом р-типа
Линия передачи
Ключ, управляемый напряжением
Ключ, управляемый током
Операционный усилитель
Источник импульсного сигнала
Источник синусоидального сигнала
Устройства интерфейса
Аналого-цифровой интерфейс
Цифроаналоговый интерфейс
Цифровые устройства
Аналого-цифровой преобразователь
Цифроаналоговый преобразователь
Модель входа/выхода цифрового устройства
Стандартный вентиль
Вентиль с тремя состояниями
Двунаправленный переключающий вентиль
Триггер с динамическим управлением
Триггер с потенциальным управлением
Цифровая линия задержки
Программируемые логические матрицы
39
Имя типа
модели
Тип компонента
* Используются только при графическом вводе схем
В директиве .MODEL в круглых скобках указывается список значений параметров модели компонента (если этот список отсутствует или не полный, то недостающие значения параметров модели
назначаются по умолчанию). Приведем примеры этой директивы:
.MODEL RLOAD RES (R=1.5 TC1=0.2 TC2=.005)
.MODEL D104D(IS=1E-10)
.MODEL KT315V NPN (IS=1E-11 BF=50 DEV=5% LOT=20%)
.MODEL CK CAP (C=1 DEV=0.1)
.MODEL KT315G AKO:KT315A NPN (BF=130)
.MODEL M1 NMOS (Level=3 VTO=2.5 LOT=30% DEV=1%)
Каждый параметр может принимать случайные значения относительно своего номинального
значения, задаваемых с помощью ключевых слов:
DEV — ключевое слово параметров, принимающих независимые случайные значения;
LOT — ключевое слово параметров, принимающих коррелированные случайные значения.
После этих ключевых слов указывается значение разброса случайного параметра в абсолютных единицах или в процентах. Тип закона распределения случайных параметров — равномерный
или нормальный — указывается при проведении моделирования.
Температура, при которой измерены параметры компонентов, указывается по директиве
.OPTIONS TNOM. В ее отсутствие она принимается равной значению параметра TNOM, устанавливаемому в окне Global Settings (по умолчанию 27&deg; С). Анализ выполняется при температуре, называемой глобальной и устанавливаемой по директиве TEMP (в ее отсутствие она равна значению параметра TNOM.
.NODESET — задание начального приближения режима по постоянному току
Формат (для файлов SPICE или ввода схем):
.NODESET &lt;V(аналоговый узел)=значение_ЭДС&gt;*
+ &lt;D(цифровой узел)=логическое_значение&gt;*
По директиве .NODESET установка приближенных начальных значений узловых потенциалов
аналоговых узлов и логических состояний цифровых узлов для расчета режима схемы по постоянному току. В отличие от директивы .IC состояния этих узлов фиксируются только во время вычислений одной итерации расчета режима по постоянному току. Это необходимо при расчете устройств с
несколькими устойчивыми состояниями (например, триггеров) и полезно для улучшения сходимости
при анализе режима по постоянному току сложных схем. Если имеются обе директивы .NODESET и
.IC, то директива .NODESET игнорируется.
Примеры:
.NODESET V(12)=3.1 V(34)=1.7V
.NODESET V(7)=5 D(H1)=1
.PARAMETERS — задание параметров схем
Формат (для ввода схем):
.PARAMETERS(&lt;имя параметра 1&gt;[,&lt;имя параметра&gt;]*)
Задание параметров и констант, передаваемых в макромодель. Эта директива помещается на
схеме макромодели в виде текста и определяет значения параметров, которые должны передавать40
ся из основной схемы. В основной схеме все упоминаемые в этой директиве параметры должны
быть определены с помощью директивы .DEFINE.
Примеры:
.parameters(GBW,Slew,ISC)
.PARAMETERS(Gain)
41
3.
3.1.
Модели аналоговых компонентов
Общие сведения о моделях компонентов
Все компоненты (аналоговые и цифровые), из которых составляется электрическая принципиальная схема, имеют математические модели двух типов:
1. Встроенные математические модели стандартных компонентов, таких как резисторы, конденсаторы, диоды, транзисторы, независимые и зависимые источники сигналов, вентили и др., которые не
могут быть изменены пользователями; можно только изменять значения их параметров;
2. Макромодели произвольных компонентов, составляемые пользователями по своему усмотрению
из стандартных компонентов.
В свою очередь встроенные модели подразделяются на две категории:

простые модели, характеризуемые малым количеством параметров, которые можно указать
непосредственно на схеме в виде атрибутов (например, модель резистора описывается одним
– тремя параметрами, причем часть из них можно сделать на схеме невидимыми, чтобы не загромождать чертеж);

сложные модели, характеризуемые большим количеством параметров, которые заносятся в
библиотеки моделей (например, модель биполярного транзистора характеризуется 52 параметрами).
В программе МС7 используется двоякое описание моделируемого устройства: в виде чертежа
его принципиальной электрической или функциональной схемы или в виде текстового описания в
формате SPICE. Кроме того, при составлении принципиальной схемы часть параметров моделей
компонентов задаются в виде их атрибутов и указываются непосредственно на схеме — такие модели будем называть моделями в формате схем. Остальные модели задаются в текстовом окне с помощью директив .MODEL и .SUBCKT по правилам SPICE — их так и будем называть моделями в
формате SPICE. В программе МС7 модели всех полупроводниковых приборов, операционных усилителей, магнитных сердечников, линий передачи и компонентов цифровых устройств имеют формат
SPICE. Ниже приведем их краткое описание (при необходимости см. [4]), а модели компонентов в
формате схем МС7 опишем более подробно.
3.2.
Пассивные компоненты (Passive components)
В меню компонентов в раздел пассивные компоненты (Passive components) включены резисторы, конденсаторы, индуктивности, линии передачи, высокочастотные трансформаторы, взаимные
индуктивности, диоды и стабилитроны.
Обратим внимание, что значения сопротивлений, емкостей и индуктивностей могут быть числом или выражением, зависящим от времени, узловых потенциалов, разности узловых потенциалов
или токов ветвей, температуры и других параметров (причем непосредственная зависимость параметров от времени в программе PSpice не предусмотрена, здесь Micro-Cap явно лидирует).
3.2.1.
Резистор (Resistor)
Формат схем МIСROCAP-7:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: &lt;значение&gt; [ТС=&lt;ТС1&gt;[,&lt;ТС2&gt;]]
Атрибут MODEL: [имя модели]
42
;позиционное обозначение
;величина сопротивления
Атрибут FREQ: [&lt;выражение&gt;] — например 10*f*v(10), при этом значение атрибута FREQ заменяет значение атрибута VALUE при расчете режима по постоянному току и проведении АС-анализа
(здесь f — частота), при расчете переходных процессов сопротивление резистора равно значению
атрибута VALUE;
SLIDER_MIN — минимальное относительное значение сопротивления, изменяемого в режиме
Dynamic DC с помощью движкового регулятора;
SLIDER_MAX — максимальное относительное значение сопротивления, изменяемого в режиме
Dynamic DC с помощью движкового регулятора;
Сопротивление резистора, определяемое параметром &lt;значение&gt;, может быть числом или выражением, включающим в себя изменяющиеся во времени переменные, например 100+V(10)*2. Эти
выражения можно использовать только при анализе переходных процессов. В режиме АС эти выражения вычисляются для значений переменных в режиме по постоянному току.
Рис. 3.1. Окно задания параметров резистора
Параметры, описывающие модель резистора в MICROCAP-7, приведены в табл. 3.1.
Таблица 3.1. Параметры модели резистора
Обозначение
Параметр
R
Масштабный множитель сопротивления
Размерность
—
Значение по
умолчанию
1
43
ТС1
ТС2
ТСЕ
NM
T_MEASURED
T_ABS
T_REL_GLOBAL
T_REL_LOCAL
Линейный температурный коэффициент сопротивления
Квадратичный температурный коэффициент сопротивления
Экспоненциальный температурный
коэффициент сопротивления
Масштабный коэффициент спектральной плотности шума
Температура измерения
Абсолютная температура
Относительная температура
Разность между температурой
устройства и модели-прототипа
C-1
0
C-2
0
%/C
0
—
1
C
C
C
—
—
—
C
—
Если в описании резистора &lt;имя модели&gt; опущено, то его сопротивление равно параметру
&lt;сопротивление&gt; в Омах. Если &lt;имя модели&gt; указано и в директиве .MODEL отсутствует параметр
ТСЕ, то температурный фактор равен
TF = 1 + ТС1(Т – TNOM)+TC2(T – TNOM)2;
если параметр ТСЕ указан, то температурный фактор равен
TF =1,01TCE(T-TNOM) .
Здесь Т — текущее значение температуры (указывается по директиве .TEMP); TNOM = 27 &deg;С —
номинальная температура (указывается в окне Global Settings).
Параметр &lt;значение&gt; может быть как положительным, так и отрицательным, но не равным нулю. Сопротивление резистора определяется выражением:
&lt;значение&gt;*R*ТF*МF,
где МF=1&plusmn;&lt;разброс в процентах, DEV или LOT&gt;/100.
Спектральная плотность теплового тока резистора рассчитывается по формуле Найквиста:
Si(f)=4kT/&lt;сопротивление&gt;*NM.
Для резисторов с отрицательным сопротивлением в этой формуле берется абсолютное значение сопротивления.
3.2.2.
Конденсатор (Capacitor)
Формат схем МIСROCAP:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: &lt;значение&gt; [IC=&lt; начальное значение напряжения&gt;]
Атрибут MODEL: [имя модели]
Атрибут FREQ: [&lt;выражение&gt;] — например 10*SQRT(f), при этом значение атрибута FREQ заменяет значение атрибута VALUE при проведении АС-анализа (здесь f — частота), при расчете переходных процессов емкость конденсатора равна значению атрибута VALUE.
Емкость конденсатора, определяемая параметром &lt;значение&gt;, может быть числом или выражением, включающее в себя изменяющиеся во времени переменные, например
100+V(10)*0.002*TIME. Эти выражения можно использовать только при анализе переходных процес44
сов. В режиме АС это выражение вычисляется для значений переменных в режиме по постоянному
току.
Рис. 3.2. Окно задания параметров конденсатора
Параметры модели конденсатора приведены в табл. 3.2.
Таблица 3.2. Параметры модели конденсатора
Обозначение
Параметр
С
VC1
VC2
Масштабный множитель емкости
Линейный коэффициент напряжения
Квадратичный коэффициент напряжения
Линейный температурный коэффициент
емкости
Квадратичный температурный коэффициент емкости
Температура измерения
Абсолютная температура
Относительная температура
Разность между температурой устройства
и модели-прототипа
ТС1
ТС2
T_MEASURED
T_ABS
T_REL_GLOBAL
T_REL_LOCAL
Размерность
—
В–1
В–2
Значение по
умолчанию
1
0
0
С–1
0
С–2
0
С
С
С
—
—
—
С
—
Если в описании конденсатора &lt;имя модели&gt; опущено, то его емкость равна параметру &lt;значение&gt; в фарадах, в противном случае она определяется выражением
45
&lt;значение&gt;С(1 +VCV+VC2V2)[1 +TC1(T-TNOM)+TC2(T-TNOM)2].
Здесь V — напряжение на конденсаторе при расчете переходных процессов. При расчете частотных характеристик (режим АС) емкость считается постоянной величиной, определяемой в рабочей точке по постоянному току.
3.2.3.
Индуктивность (Inductor)
Формат схем МIСROCAP-7:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: &lt;значение&gt; [IС=&lt;начальный ток&gt;]
Атрибут MODEL: [имя модели]
Атрибут FREQ: [&lt;выражение&gt;] — например 10u*(F/100), при этом значение атрибута FREQ заменяет значение атрибута VALUE при проведении АС-анализа (здесь F — частота), при расчете переходных процессов индуктивность равна значению атрибута VALUE.
Индуктивность, определяемая параметром &lt;значение&gt;, может быть числом или выражением,
включающее в себя изменяющиеся во времени переменные, например 100+I(L2)*2. Эти выражения
можно использовать только при анализе переходных процессов. В режиме АС эти выражения вычисляется для значений переменных в режиме по постоянному току.
Параметры модели индуктивности приведены в табл. 3.3.
Таблица 3.3 Параметры модели индуктивности
Обозначение
L
IL1
IL2
ТС1
ТС2
T_MEASURED
Т_АВС
T_REL_GLOBAL
T_REL_LOCAL
46
Параметр
Масштабный множитель индуктивности
Линейный коэффициент тока
Квадратичный коэффициент
тока
Линейный температурный коэффициент индуктивности
Квадратичный температурный
коэффициент индуктивности
Температура измерений
Абсолютная температура
Относительная темпера тура
Разность между температурой
устройства
и
моделипрототипа
Размерность
Значение по
умолчанию
—
1
А–1
0
А–2
0
С–1
0
С–2
0
С
С
С
—
—
—
С
—
Рис. 3.3. Окно задания параметров катушки индуктивности
Если в описании опущено &lt;имя модели&gt;, то индуктивность равна параметру &lt;значение&gt; в Генри, в противном случае она определяется выражением
&lt;значение&gt;L(1 +IL1*I+IL2*I2)[1+TC1(T–TNOM)+TC2(T-TNOM)2].
Здесь I — ток через катушку индуктивности при расчете переходных процессов. При расчете
частотных характеристик (режим АС) индуктивность считается постоянной величиной, определяемой
в рабочей точке по постоянному току.
3.2.4.
Взаимная индуктивность и магнитный сердечник (К)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут INDUCTORS: &lt;имя индуктивности&gt;
Атрибут COUPLING: коэффициент связи&gt;
Атрибут MODEL: [имя модели]
Порядок перечисления имен индуктивностей Lyyy, Lzzz ... безразличен, знак взаимной индуктивности определяется положительными направлениями токов индуктивностей относительно начал
обмоток. Параметром взаимной индуктивности является коэффициент связи.
На одном сердечнике помещается одна или несколько обмоток с именами Lyyy, Lzzz... Все обмотки имеют одинаковый &lt;коэффициент связи&gt;. Здесь возможны 2 варианта: а) магнитосвязанными
могут быть линейные индуктивности (без сердечника); нелинейные индуктивности с нелинейным
магнитным сердечником, определяемым параметрами модели CORE.
47
a) Магнитосвязанные линейные индуктивности.
Коэффициент связи Kij двух обмоток (i, j) определяется выражением:
K ij 
M ij
Li L j
где Li, Lj — индуктивности обмоток; Mij — их взаимная индуктивность. Напряжение на катушке
Li, с учетом взаимной индукции определяется выражением:
U i  Li
dI i
dI
dI
 M ij i  M ik k  ... ,
dt
dt
dt
Где Ii — ток втекающий в вывод (+) обмотки (помечен на схеме точкой). В этом случае при вводе в схему связанных индуктивностей посредством вставки элемента K, в открывающемся окне параметров задается лишь позиционное обозначение сердечника KN, позиционные обозначения всех
катушек индуктивности (INDUCTORS) с которыми он связан и коэффициент связи (COUPLING) (см.
рис. 3.4., а). Имя модели сердечника при этом не вводится.
б) Магнитосвязанные катушки с нелинейным магнитным сердечником. При описании каждой обмотки Lyyy..., упомянутой в составе сердечника в позиции INDUCTORS, изменяется смысл параметра &lt;значение&gt;. Т.е. численное значение, задаваемое в позиции VALUE окна параметров катушки индуктивности теперь определяет не индуктивность, а число витков соответствующей обмотки сердечника. В этом случае в позиции MODEL окна параметров сердечника K вводится имя модели
нелинейного магнитного сердечника (возможно из открывающегося в этом же окне списка, см. рис.
3.4., б). Модель магнитного сердечника представляет собой вариант модели Джилса-Атертона, в котором безгистерезисная кривая намагниченности ферромагнетика является гиперболической функцией напряженности магнитного поля H (coth).
а)
б)
Рис. 3.4. Окна задания параметров сердечника: а) — линейного; б— нелинейного
48
Следовательно, в случае использования нелинейного магнитного сердечника величина, задаваемая в позиции VALUE не может быть выражением, а должна быть целым положительным числом.
Параметры модели магнитного сердечника приведены в табл. 3.4. В SPICE используется подобная модель для LEVEL=2, с тем лишь отличием, что безгистерезисная кривая имеет другую более простую аналитическую зависимость от напряженности магнитного поля H (см. лекции ММЭ).
Таблица 3.4. Параметры модели магнитного сердечника
Обозначение
Параметр
AREA
PATH
GAP
MS
Площадь поперечного сечения магнитопровода
Средняя длина магнитной силовой линии
Ширина воздушного зазора
Намагниченность насыщения
Параметр формы безгистерезисной кривой
намагничивания
Постоянная упругого смещения доменных границ
Постоянная необратимой деформации доменных
стенок
Параметр эффективности поля
A
С
К
ALPHA
Размерность
см2
см
см
А/м
Значение по
умолчанию
1
1
0
А/м
25
400103
0,001
А/м
25
—
2E-5
Основные уравнения для используемого варианта модели Джилса-Аттертона:
N — количество витков выбранной обмотки сердечника
Ma(H) — зависимость безгистерезисной намагниченности от напряженности магнитного поля H
(безгистерезисная кривая намагничивания)
H — напряженность магнитного поля
HE — эффективная напряженность магнитного поля
B — магнитная индукция в сердечнике
M — намагниченность ферромагнетика сердечника
I — ток, протекающий через выбранную обмотку сердечника
V — напряжение на клеммах катушки сердечника
Следует отметить что расчеты нелинейных магнитных элементов программе MICROCAP-7
осуществляются не в системе СИ. В программе принята следующая система единиц: намагниченность М — [A/м], магнитная индукция B — [Гаусс], напряженность магнитного поля H — [Эрстед].
Расчеты в программе осуществляются по формулам:
H
100  N  I  M  GAP
PATH
H E  H  ALPHA  Ma
 H  A 
M A  M S  cth  E  

  A  HE 
SIGN  1, если
dH
 0;
dt
SIGN  1, если
dH
0
dt
49
Основное дифференциальное уравнение Джилса-Атертона, связывающее изменение намагниченности с величиной напряженности Н и предысторией системы:
dM M A  M   Sign
C dM A



dH
K  1  C 
1  C dH
B   0  H  M  ;
1Э 
4 10 9  N 2  AREA
L
PATH
104 A
;
4 м
V L
dI
dt
1 Тл  104 Гс
См. пример схему CORE3 из каталога COMPONENTS\PASSIVE COMP и ее анализ.
3.2.5.
Трансформатор (Transformer)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: &lt;индуктивность первичной обмотки&gt;,&lt;индуктивность вторичной обмотки&gt;,коэффициент связи&gt;
В программе МС7 имеется модель идеального двухобмоточного трансформатора без потерь
(TRANSFORMER), в качестве параметров которого в позиции VALUE окна задаются значения индуктивностей обмоток и коэффициент связи, например: 0.01uH,0.5uH,.98.
Трансформатор также может быть задан как совокупность магнитосвязанных катушек индуктивности, расположенных на линейном сердечнике (K), см. пункт 3.2.4.
Еще один способ задания трансформатора — в виде схемы–макромодели, содержащей магнитосвязанные индуктивности. Так в программном пакете имеется встроенная модель двухобмоточного
трансформатора со средней точкой Component/Analog Primitives/Macros/Centap.
Все 3 способa задания трансформатора в схеме для моделирования иллюстрирует пример
TRANSFORMER из каталога COMPONENTS\PASSIVE COMP.
3.2.6.
Линия передачи (Transmission line)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: Z0=&lt;значение&gt; [ТD=&lt;значение&gt;] [F=&lt;значение&gt; [NL=&lt;значение&gt;]] — для идеальной линии передач без потерь;
Атрибут VALUE: LEN=&lt;значение&gt; R=&lt;значение&gt; L=&lt;значение&gt; G=&lt;значение&gt; C=&lt;значение&gt;
— для линии передач с потерями;
Атрибут MODEL: [имя модели]
Модель линии передачи характеризуется параметрами, указанными в табл. 3.5., а схема замещения участка длинной линии представлена на рис. 3.5.
Линия передач без потерь при расчете переходных процессов выполняет роль линии задержки, при расчете частотных характеристик она представляет собой безынерционное звено.
Для линии передач с потерями аналитически рассчитывается комплексный коэффициент передачи линии. Анализ переходных процессов производится с помощью интеграла свертки с импульсной характеристикой линии, которая вычисляется как преобразование Фурье коэффициента передачи (что требует очень больших затрат времени). Примеры моделирования линий передачи без по50
терь — TLINE_01, TLINE_02, TLINE_03; линии передачи с потерями — TLINE_L_3. Схемы находятся
в каталоге COMPONENTS\PASSIVE COMP.
Рис. 3.5. Схема замещения линии передачи
Таблица 3.5. Параметры модели линии передачи
Обозначение
Z0
TD
F
NL
R
L
G
С
LEN
Параметр
Идеальная линия без потерь
Волновое сопротивление
Время задержки сигнала
Частота для расчета NL
Электрическая длина на частоте F (относительно длины волны)
Линия с потерями
Погонное сопротивление
Погонная индуктивность
Погонная проводимость
Погонная емкость
Длина линии
Размер- Значение по
ность умолчанию
Ом
с
Гц
—
—
—
0,25
Ом/м
Гн/м
См/м
Ф/м
м
—
—
—
—
—
Рис. 3.6. Окно задания параметров линии передачи
3.2.7.
Диод (Diode) и стабилитрон (Zener)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: [Area] [OFF] [IC=&lt;Vd&gt;]
Атрибут MODEL: [имя модели]
51
Параметр Area задает коэффициент кратности для учета подключения нескольких параллельных диодов (параметры модели диода умножаются или делятся на эту величину). Параметр IC задает начальное напряжение на диоде Vd при расчете переходных процессов, если на панели Transient
Analysis Limits выключена опция Operating Point. Включение ключевого слова OFF исключает диод из
схемы при проведении первой итерации расчета режима по постоянному току.
Модель диода задается директивой
.MODEL &lt;имя модели&gt; 0[(параметры модели)]
Приведем пример модели диода Д104А:
.model D104A D (IS=5.81Е-12 RS=8.1 N=1.15 TT=8.28NS CJO=41.2PF VJ=0.71 M=0.33 FC=0.5
EG=1.11 XTI=3)
Математическая модель диода задается параметрами, перечисленными в табл. 3.6.
Таблица 3.6. Параметры модели диода
Обозначение
Level
IS
RS
N
ISR
NR
IKF
TT
CJO
VJ
M
EG
FC
BV
IBV
NBV
IBVL
NBVL
Значение по Единица
умолчанию измерения
Тип модели: 1 — SPICE2G, 2 — PSpice
1
—
Ток насыщения при температуре 27&deg;С
10–14
А
Объемное сопротивление
0
Ом
Коэффициент эмиссии (неидеальности)
1
—
Параметр тока рекомбинации
0
А
Коэффициент эмиссии (неидеальности)для тока ISR
2
Предельный ток при высоком уровне инжекции
А

Время переноса заряда
0
с
Барьерная емкость при нулевом смещении
0
Ф
Контактная разность потенциалов
1
В
Коэффициент плавности p-n перехода (1/2 —для
0,5
—
резкого, 1/3 — плавного)
Ширина запрещенной зоны
1,11
эВ
Коэффициент нелинейности барьерной емкости
0,5
—
прямосмещенного перехода
Обратное напряжение пробоя (положительная веВ

личина)
Начальный ток пробоя, соответствующий напряже10-10
А
нию BV (положительная величина)
Коэффициент неидеальности на участке пробоя
1
—
Начальный ток пробоя низкого уровня
0
А
Коэффициент неидеальности на участке пробоя
1
—
низкого уровня
Параметр
Таблица 3.6. Параметры модели диода (окончание)
XTI
TIKF
TBV1
TBV2
TRS1
TRS2
52
Температурный коэффициент тока насыщения IS
Линейный температурный коэффициент IKF
Линейный температурный коэффициент BV
Квадратичный температурный коэффициент BV
Линейный температурный коэффициент RS
Квадратичный температурный коэффициент RS
3
0
0
0
0
0
—
C-1
C-1
C-1
C-1
C-2
KF
AF
RL
T_MEASURED
T_ABS
T_REL_GLOBAL
T_REL_LOCL
Коэффициент фликкер-шума
Показатель степени в формуле фликкер-шума
Сопротивление утечки перехода
Температура измерений
Абсолютная температура
Относительная температура
Разность между температурой диода и моделипрототипа
0
1

—
—
—
—
—
Ом
C
C
C
—
C
С уравнениями, по которым производится расчет при моделировании диодов и прочих полупроводниковых приборов при необходимости можно ознакомиться в [4, 6].
Рис. 3.7. Окно задания параметров диода
Рис. 3.8. Модель диода
Стабилитроны имеют ту же модель, что и диоды. При выборе стабилитрона необходимо обращать внимание на параметр модели BV — напряжение обратного пробоя, фактически оно же и является напряжением стабилизации при обратном включении диода. См. примеры моделирования
схемные файлы DIODE &amp; ZENER из каталога COMPONENTS\PASSIVE COMP.
Диоды выбираются с помощью следующих путей в меню COMPONENTS/Analog Primitives/Passive Components/Diode, COMPONENTS/Analog Library/DIODE (далее в подменю нужный тип
диода). Стабилитроны — COMPONENTS/Analog Primitives/Passive Components/ZENER, COMPONENTS/Analog Library/Diode/ZENER.
53
3.3.
3.3.1.
Источники сигналов (Waveform sources)
Независимые источники постоянного напряжения и тока
Источники постоянного напряжения (Battery) или фиксированного смещения для аналоговых
цепей (Fixed Analog)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: &lt;значение&gt;
Источники постоянного тока (Isource)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: &lt;значение&gt;
3.3.2.
Источники сигнала, зависящего от времени
Источник импульсного напряжения (Pulse source)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут MODEL: &lt;имя модели&gt;
Параметры модели этого источника задаются по директиве:
.MODEL &lt;имя модели&gt; PUL ([список параметров])
Параметры модели источника импульсного напряжения приведены в табл. 3.7, а его форма —
на рис. 3.9, окно задания параметров — на рис. 3.10. .
Таблица 3.7. Параметры модели источника импульсного сигнала в формате МС7
Обозначение
Параметр
VZERO
VONE
Р1
Р2
РЗ
Р4
Р5
Начальное значение
Максимальное значение
Начало переднего фронта
Начало плоской вершины импульса
Конец плоской вершины импульса
Момент достижения с уровня VZERO
Период повторения
Размерность
В
В
с
с
с
с
с
Примечание. Амплитуда сигнала в режиме АС принимается равной 1 В.
Рис. 3.9. Описание импульсного сигнала в формате МС7
54
Значение по
умолчанию
0
5
0
Р1 + 0,1 нc
0,5 мкс
РЗ + 10нс
1 мкс
Рис. 3.10. Окно задания параметров импульсного сигнала
Источник синусоидального напряжения (Sine source)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут MODEL: &lt;имя модели&gt;
Параметры модели этого источника задаются по директиве:
.MODEL &lt;имя модели&gt; SIN ([список параметров])
Параметры модели источника синусоидального напряжения приведены в табл. 3.8, а его форма на рис. 3.11, окно задания параметров — на рис 3.12.
Таблица 3.8. Параметры модели источника гармонического сигнала
Обозначение
Параметр
F
А
DC
РН
RS
RP
Частота
Амплитуда
Постоянная составляющая
Начальная фаза
Внутреннее сопротивление
Период повторения затухающего сигнала
Постоянная времени изменения амплитуды сигнала по экспоненциальному закону
TAU
Размерность
Гц
В
В
радиан
Ом
с
Значение по
умолчанию
106
1
0
0
0,001
0
с
0
Примечание. Амплитуда сигнала в режиме АС принимается равной 1 В.
55
t
Vsin  DC  A  e TAU  sin2  F  t  PH 
Рис. 3.11. Синусоидальный сигнал
Рис. 3.12. Окно задания параметров источника синусоидального напряжения
Независимые источники напряжения и тока (V и I) сложной формы формата SPICE
Независимые источники напряжения (V) и тока (I) позволяют создавать входные воздействия
разнообразной формы: импульсные, синусоидальные, экспоненциальные, кусочно-линейные, с частотной модуляцией. Для всех этих сигналов указывается значение постоянной составляющей (DC)
— необязательный параметр. Кроме того, при расчете частотных характеристик (режим АС) можно
задавать амплитуду и начальную фазу этих сигналов.
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: &lt;список параметров&gt;
В &lt;список параметров&gt; вносится та же информация, что по формату SPICE, за исключением
имени компонента и номеров узлов его подключения.
Импульсный сигнал (PULSE) задается параметрами, приведенными в табл. 3.9. Обратим
внимание, что здесь источник импульсного сигнала напряжения или тока задается другим способом
по сравнению с ранее рассмотренным источником импульсного напряжения PULSE.
Ниже также приведен вид окна задания параметров импульсного источника V (I).
56
Таблица 3.9. Параметры импульсного сигнала независимого источника V или I
Обозначение
Размерность
В или А
В или А
с
с
с
с
с
Параметр
V1
V2
TD
TR
TF
PW
PER
Значение по
умолчанию
—
—
0
TSTEP*
TSTEP*
TSTOP&quot;
TSTOP**
Начальное значение
Максимальное значение
Начало переднего фронта
Длительность переднего фронта
Длительность заднего фронта
Длительность плоской части импульса
Период повторения
* TSTEP - шаг вывода на печать.
** TSTOP - конечное время анализа переходного процесса (параметры TSTEP и TSTOP задаются в
директиве TRAN).
Рис. 3.13. Окно задания параметров независимого источника V (I) импульсного сигнала (PULSE)
Синусоидальный сигнал (SIN) описывается выражением:

 2  PH 
V 0  VA  sin  360  , при 0  t  TD



V (t )  
V 0  VA  e  t TD  DF sin 2F t  TD   2  PH  , при t  TD


360 
Его параметры приведены в табл. 3.10., а окно параметров с выведенным в нем графиком – на
рис. 3.14. Пример задания и график в режиме TRANSIENT — в схемном файле WAVEFORM_V_SIN
из каталога COMPONENTS\SOURCES_ИСТОЧНИКИ.
Таблица 3.10. Параметры гармонического сигнала независимого источника V(или I)
Обозначение
V0
VA
F
Параметр
Постоянная составляющая
Амплитуда
Частота
Размерность
В или А
В или А
Гц
Значение по умолчанию
—
—
1/TSTOP
57
TD
DF
PH
Задержка
Коэффициент затухания
Фаза
с
1/с
град.
0
0
0
Рис. 3.14. Окно задания параметров независимого источника V (I) гармонического сигнала (SIN)
Экспоненциальная функция (ЕХР) описывается выражением (рис. 3.15):


V 1 при 0  t  TD1

 t TD1




V (t )  V 1  V 2  V 1  1  e TC1  при TD1  t  TD 2




 t TD 2 
 t TD1
V 1  V 2  V 1  e TC 2  e TC1  при TD 2  t



Рис. 3.15. Экспоненциальная функция
Назначение ее параметров объясняется в табл. 3.11, окно ввода параметров представлено на
рис. 3.16, пример задания и график в режиме TRANSIENT — в схемном файле WAVEFORM_V_EXP
из каталога COMPONENTS\SOURCES_ИСТОЧНИКИ.
Таблица 3.11. Параметры независимого источника (V или I) экспоненциального сигнала
58
Значение по
умолчанию
V1
Начальное значение
В или А
—
V2
Максимальное значение
В или А
—
TD1
Начало переднего фронта
с
0
TC1
Постоянная времени переднего фронта
с
TSTEP *
TD2
Начало заднего фронта
с
td+ TSTEP
TC2
Постоянная времени заднего фронта
с
TSTEP
* TSTEP — шаг по времени вывода на печать результатов расчетов переходных процессов
(задается в директиве TRAN).
Обозначение
Параметр
Размерность
Рис. 3.16. Окно задания параметров независимого источника V (I) экспоненциального сигнала (EXP)
Синусоидальная функция с частотной модуляцией (SFFM) описывается выражением:
V (t )  V 0  VA sin2  F 0  t  MI  sin 2  FM  t .
Ее параметры приведены в табл. 3.12.
Таблица 3.12. Параметры независимого источника (V или I) гармонического сигнала c частотной модуляцией
Обозначение
V0
VA
F0
MI
FM
Параметр
Постоянная составляющая
Амплитуда
Частота несущей
Индекс частотной модуляции
Частота модуляции
Размерность
В или А
В или А
ГЦ
—
Гц
Значение по
умолчанию
—
—
1/TSТОР
0
1/TSТОР
Ниже приведено окно задания параметров независимого синусоидального источника тока с
возможной частотной модуляцией.
59
Рис. 3.17. Окно задания параметров независимого источника V (I) синусоидального сигнала с частотной модуляцией (SFFM)
Кусочно-линейный сигнал (PWL) задается координатами точек излома (Ti, Vi), см. окно задания его параметров с выведенным графиком на рис. 3.18.
Рис. 3.18. Окно задания независимого источника сигнала в виде кусочно-линейной функции
Источник напряжения, задаваемый пользователем (User source)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут FILE: &lt;имя файла&gt;
Атрибут EXPRESSION: [&lt;текстовое выражение&gt;]
Пользователь имеет возможность задать источник напряжения произвольной формы. Отсчеты
сигнала записываются в текстовый файл, который имеет стандартное расширение .USR. В этом
файле записывается общее количество отсчетов N и пары значений, определяющие выражения для
отсчетов моментов времени и значения напряжений. Этот файл может быть создан с помощью любого текстового редактора (на что потребуется значительное время) или образован путем сохранения одного или нескольких сигналов, полученных в результате расчета переходных процессов. На
рисунке, приведенном ниже, показано окно задания параметров пользовательского источника. Тек60
стовый файл с расширением *.usr должен быть создан заранее путем сохранения кривой переходного процесса расчета другой схемы. Для этого после получения графиков переходных процессов
двойным щелчком левой клавиши вызывается диалоговое окно Properties, в нем выбирается закладка Save Curves и выбирается график, который мы хотим взять как пользовательский сигнал, затем
нажимается кнопка SAVE.
В окне задания параметров пользовательского источника в позиции EXPRESSION необходимо
в этом случае указать какая именно зависимость будет использована в качестве источника (в примере это зависимость напряжения V(2) от времени — V(2) vs T), а в позиции FILE имя и путь сохраненного *.USR файла (Можно воспользоваться кнопкой BROWSE).
Отметим, что если во время сохранения кривой переходного процесса название сохраняемой
зависимости поменять на LABEL vs T, то позицию EXPRESSION в окне задания параметров можно
не заполнять.
Рис. 3.19. Окно задания параметров пользовательского источника
Отметим что задание и работу всех рассмотренных в разделе 3.3 независимых источников иллюстрируют примеры WAVEFORM SOURCES.CIR, MEANDR_EXP_RC.CIR, WAVEFORM_V.CIR из
каталога COMPONENTS\SOURCES_ИСТОЧНИКИ.
3.4.
3.4.1.
Линейные и нелинейные зависимые источники
Зависимые источники линейные и полиномиальные (Dependent Sources)
Линейные зависимые источники
Формат схем:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: &lt;коэффициент передачи&gt;
В программе МС7 имеется четыре линейных зависимых источника напряжения и тока:
VofV — источник напряжения, управляемый напряжением (ИНУН);
Vofl — источник напряжения, управляемый током (ИНУТ);
lofV — источник тока, управляемый напряжением (ИТУН).
61
lofl — источник тока, управляемый током (ИТУТ);
Все они задаются единственным параметром — коэффициентом передачи.
Полиномиальные зависимые источники
В программе МС7 имеется четыре полиномиальных зависимых источника напряжения и тока:
EVofV — источник напряжения, управляемый напряжениями;
HVofl — источник напряжения, управляемый токами;
GlofV — источник тока, управляемый напряжениями.
Flofl — источник тока, управляемый токами;
Формат схем МС7:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE:
[POLY(&lt;k&gt;)] n1p n1m [n2p n2m...nkp nkm] p0 [p1...pk] [IC=c1[,c2[,c3...[,ck]]]]
[POLY(&lt;k)] v1 [v2...vk] p0 [p1...pk] [IC=c1[,c2[,c3...[,ck]]]]
При наличии ключевого слова POLY управляемый источник Y = Y(Х1, Х2,…, XN) описывается
полиномиальной функцией (здесь показан случай для трех переменных):
Y  P0  P1 x1  P2 x2  P3 x3  P4 x12  P5 x1 x2  P6 x1 x3  P7 x22  P8 x2 x3  P9 x32  P10 x13 
 P11 x12 x2   P12 x12 x3  P13 x1 x22  P14 x1 x2 x3  P15 x1 x32  P16 x23  P17 x22 x3  P18 x2 x32  P19 x33
Здесь x1 , x 2 , x3 — управляющие переменные. Они могут быть токами или разностью потенциалов; одновременное управление током и разностью потенциалов не допускается.
Если управляющие переменные — напряжения, то сразу после ключевого слова POLY, попарно
указывается список узлов: &lt;номер (или обозначение) положительного узла первого напряжения&gt;
&lt;номер (или обозначение) отрицательного узла первого напряжения&gt; ….
Если управляющие переменные — токи, то после ключевого слова POLY указывается список
источников ЭДС, через которые протекают управляющие токи. Если таковых в схеме нет, то необходимо ввести в соответствующие ветви нулевые источники ЭДС.
Все коэффициенты полинома вводить не обязательно, но вводить их необходимо подряд без
пропусков.
Примеры задания и анализа зависимых линейных и полиномиальных источников приведены в
схемных файлах DEPENDENT SOURCES, DEPENDENT SOURCES_POLY из каталога
COMPONENTS\SOURCES_ИСТОЧНИКИ.
3.4.2.
62
Линейные управляемые источники, задаваемые преобразованиями Лапласа
(Laplace Sources) и Z-преобразованиями (Z Transform Sources)
Линейные четырехполюсники могут задаваться передаточными функциями с помощью управляемых источников. Имена таких источников начинаются с символа L (Laplace Sources) или Z (Z
Transform Sources). Передаточные функции задаются с помощью формул — тогда после символа L
указывается F — или табличной зависимостью — добавляется символ Т (для Laplace Sources).
Например, LFVofV означает задаваемый формулой передаточной функции источник напряжения,
управляемый напряжением. Эти источники используются не только при расчете частотных характеристик, но и проведении всех остальных видов анализа.
Laplace Sources
Формат схем МС7:
Атрибут PART: &lt;имя&gt;
Атрибут LAPLACE для источников LFIofl, LFIofV, LFVofV, LFVofl: &lt;выражение&gt;
Атрибут FREQ для источников LTIofl, LTIofV, LTVofV, LTVofl:
&lt;&lt;частота&gt;,&lt;модуль&gt;,&lt;фаза&gt;&gt;*
Атрибут KEYWORD: [[DB | MAG] [DEG | RAD]] | [R_l]
Входящие в эти определения ключевые слова означают следующее:
DB — модуль передаточной функции задается в децибелах (по умолчанию);
MAG — модуль передаточной функции задается в абсолютных единицах;
DEG — фаза передаточной функции в градусах (по умолчанию);
RAD — фаза передаточной функции в радианах;
R_I — таблица содержит действительные и мнимые части передаточной функции.
Для источников типа LFIofV, LFIofl, LFVofV и LFVofl в качестве параметра задается формула
передаточной функции комплексной переменной S. Например:
1/(1+.001*S+1E-8*S*S)
При расчете частотных характеристик (режим АС) переменная S заменяется на 2jF. При
расчете режима по постоянному току (режим DC) полагается S=0. При расчете переходных процессов (режим Transient analysis) отыскивается импульсная переходная характеристика четырехполюсника путем обратного преобразования Фурье его передаточной функции, затем путем свертки импульсной характеристики с входным сигналом отыскивается выходное колебание.
Для источников типа LTIofV, LTIofl, LTVofV и LTVofl задается таблица передаточной функции.
Частота задается в герцах, модуль передаточной функции в децибелах или абсолютных единицах,
фаза в градусах или радианах. При указании ключевого слова R_I вместо модуля и фазы передаточной функции задаются значения ее действительной и мнимой части. Значения передаточной функции указываются в порядке возрастания частоты. Для расчета передаточной функции между опорными точками применяется линейная интерполяция в логарифмическом масштабе. Значения пере63
даточной функции вне заданного диапазона частот полагаются равными их значениям в крайних точках.
Примеры использования лапласовых зависимых источников см. в схемных файлах: LAPLACE
SOURCE_01, LAPLACE SOURCE_05 из каталога COMPONENTS\SOURCES_ИСТОЧНИКИ.
Z Transform Sources
Формат схем МС7:
Атрибут PART: &lt;имя&gt;
Атрибут ZEXP: &lt;выражение для z-прео6разования&gt;
Атрибут CLOCK FREQUENCY: &lt;частота дискретизации для z-преобразования&gt;
Рис. 3.20. Задание источника Z-TRANSFORM
Например, цифровой фильтр с передаточной функцией
H ( z) 
0.10285 ( z  1)  ( z 2  0.070621 z  1)
( z  0.55889)  ( z 2  1.1579  z  0.76494)
задается с помощью управляемого источника Е1. При схемном вводе атрибуту ZEXP присваивается значение в виде переменной ZFILTER, которая в свою очередь определяется с помощью директивы .DEFINE:
.DEFINE ZFILTER .10285*(Z+1)*(Z* Z-.070621*Z+1)/((Z-.55889)*(Z* Z-1.1579*Z+.76494))
Частота дискретизации 24 кГц задается с помощью атрибута CLOCK FREQUENCY=24k.
Примеры моделирования цифровых фильтров приведены в схемных файлах
ZTRANSFORM
SOURCE_01…
Z-TRANSFORM
SOURCE_04
из
каталога
COMPONENTS\SOURCES_ИСТОЧНИКИ.
3.4.3.
64
Функциональные источники сигналов (Function Sources)
Управляемые источники Function sources, имена которых начинаются с N, задаются функциональными зависимостями во временной области.
Формат схем МС7:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE для источников NFV и NFI: &lt;формула&gt;
Атрибут TABLE для источников NTIofl, NTIofV, NTVofV, NTVofl: (&lt;x2&gt;,&lt;y2&gt;) ... (&lt;xk&gt;,&lt;yk&gt;)
Нелинейные зависимые источники напряжения NFV и тока NFI описываются произвольной
функциональной зависимостью от напряжений и токов схемы, например:
10*Sin(2*PI*1E6*T)*V(3)*l(L1)*EXP(-V(IN)/100ns)
K*POW((V(Plate)-V(Cathode)+Mu*(V(Grid) – V(Cathode))),1.5)
Зависимые источники NTVofl, NTIofl, NTIofV и NTVofV задаются таблицей зависимостей значений выходного сигнала Yk от значений входного сигнала Xk. Значения отсчетов выходного сигнала Y
указываются в порядке возрастания аргумента X. Для расчета выходного сигнала между опорными
точками применяется линейная интерполяция. Значения сигнала Y вне заданного диапазона изменения аргумента полагаются равными их значениям в крайних точках.
Приведем пример: (-.01,-10) (.01,10)
Для источника NTVofl выходной сигнал — ЭДС источника, аргумент — ток входной ветви. Для
источника NTIofl выходной сигнал — ток источника, аргумент — ток входной ветви. Для источника
NTIofV выходной сигнал — ток источника, аргумент — напряжения на входных зажимах. Для источника NTVofV выходной сигнал — ЭДС источника, аргумент — напряжение на входных зажимах.
Примеры определения и использования функциональных источников приведены в схемных
файлах FUNCTION SOURCE_01…FUNCTION SOURCE_03, FUNCTION (TABLE) SOURCE из каталога
COMPONENTS\SOURCES_ИСТОЧНИКИ.
3.5.
Смесь (Miscellaneous)
В раздел Miscellaneous (Смесь) помещены ключи, стрелки и контакты.
3.5.1.
Ключ (Switch)
Формат схем МС7:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: &lt;[V | Т | I] &lt;n1, n2&gt;[,Ron&gt;[,&lt;Roff&gt;]]
При расчете переходных процессов используются ключи, управляемые разностью потенциалов, током (через индуктивность) и коммутируемые в определенные моменты времени. Это наиболее старый вид ключей, применяемых в ранних версиях программы МС. В последней версии используются также ключи типа S и W (см. ниже), имеющие более плавный переход между состояниями
&quot;включено&quot; и &quot;выключено&quot;. В ключах SWITCH приняты обозначения:
V — управление разностью потенциалов;
I — управление током;
65
Т — переключение в определенные моменты времени;
n1, n2— значения управляющей величины, при которых происходят переключения;
Ron, Roff — сопротивления ключа в замкнутом и разомкнутом состояниях.
Если n1&lt;n2, то ключ замкнут (находится в состоянии ON) при управляющем сигнале n1&lt;Х&lt;n2 и
разомкнут (находится в состоянии OFF), когда Х&lt;n1 или Х&gt;n2.
Если же n1&gt;n2, то ключ разомкнут (OFF) при управляющем сигнале n1&gt;Х&gt;n2 и замкнут (OFF),
когда Х&gt;n1 или Х&lt;n2.
Для ключей типа V управляющий сигнал X представляет собой разность потенциалов между
управляющими выводами ключа.
Для ключей типа I управляющий сигнал X представляет собой ток через индуктивность, включенную между управляющими выводами ключа.
Для ключей типа Т управляющий сигнал X представляет время, при этом управляющие выводы
ключа должны быть заземлены.
При выполнении расчетов частотных характеристик или режима по постоянному току ключ заменяется постоянным сопротивлением.
Приведем примеры спецификации ключей: V,2,3 l,2ma,3ma,0.01,1MEG Т, 5us, 6us.
Примеры всех указанных видов ключей Switch и графики переходных процессов с их участием
в схемном файле SWITCH_01 из каталога COMPONENTS\MISC.
3.5.2.
Ключ, управляемый напряжением (S)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут MODEL: &lt;имя модели&gt;
Параметры ключа задаются по директиве
.MODEL &lt;имя модели&gt; VSWITCH (VON=&lt;значение&gt; VOFF=&lt;значение&gt; RON=&lt;значение&gt;
ROFF=&lt;значение&gt;)
Параметры модели ключа, управляемого напряжением, приведены в табл. 3.13.
Если VON&gt;VOFF, то ключ замкнут при управляющем напряжении Vynp&gt;VON и разомкнут при
Vyпp&lt;VOFF. На интервале VOFF&lt;Vynp &lt;VON сопротивление ключа плавно изменяется от значения
ROFF до RON.
Если VON&lt;VOFF, то ключ замкнут при Vyпp &lt;VON и разомкнут при Vупр&gt;VOFF.
Таблица 3. 13. Параметры модели ключа
Обозначение
VON
VOFF
RON
ROFF
Параметр
Напряжение замыкания ключа
Напряжение размыкания ключа
Сопротивление замкнутого ключа
Сопротивление разомкнутого ключа
3.5.3.
В
В
Ом
Ом
Ключ, управляемый током (W)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут REF: &lt;имя источника тока, управляющего ключом&gt;
66
Размерность
Значение по
умолчанию
1
0
1
106
Атрибут MODEL: &lt;имя модели&gt;
Параметры ключа задаются по директиве
.MODEL &lt;имя модели&gt; ISWITCH (ON=&lt;значение&gt; IOFF=&lt;значение&gt; RON=&lt;значение&gt;
ROFF=&lt;значение&gt;)
Смысл этих параметров такой же, как для ключа, управляемого напряжением, только параметр
ION по умолчанию равен 1 мА.
Примеры моделирования ключей, управляемых напряжением (S) и током (W) приведены в
схемном файле SWITCH_02 из каталога COMPONENTS\MISC.
3.5.4.
Устройство выборки-хранения Sample and Hold
Атрибут PART: &lt;имя&gt;
Атрибут INPUT EXPRESSION: &lt;функция&gt;
Атрибут SAMPLE EXPRESSION: [&lt;логическое выражение&gt;]
Атрибут PERIOD: &lt;значение&gt;
Устройство выборки хранения представляет собой аналоговое запоминающее устройство, которое запоминает аналоговый сигнал в заданные моменты времени и хранит это значение в течение
определенного времени, равного периоду дискретизации.
В поле атрибута INPUT EXPRESSION вносится функция напряжений, токов и (возможно) времени, которая будет обрабатываться устройством выборки-хранения.
В поле атрибута SAMPLE EXPRESSION вносится логическое выражение, при выполнении которого (истинности значения), устройство осуществляет отслеживание входной функции (повторяет
во времени функцию, заданную в поле INPUT EXPRESSION). При невыполнении этого логического
выражения, на выходе устройства — значение, запомненное в момент времени перехода логического выражения из истинного в ложное состояние. Таким образом, при задании поля SAMPLE EXPRESSION момент перехода логического выражения из ложного в истинное — это поступление команды на выборку (слежение) за входной функцией; а момент перехода из истинного в ложное — это
поступление команды на хранение. В этом случае значение, указанное в поле PERIOD игнорируется.
В поле атрибута PERIOD указывается интервал времени, через который будут производиться
выборки сигнала. На это же время происходит и запоминание выборки. Значение этого атрибута
принимается во внимание при анализе, если поле атрибута SAMPLE EXPRESSION не заполнено.
Примеры работы устройства выборки-хранения см. в схемных файлах SAMPLE AND HOLD_01…
SAMPLE AND HOLD_04 из каталога COMPONENTS\MISC.
3.5.5.
Стрелки (Arrow) и контакты (Bubble)
Если в графе Definition редактора компонентов Component Editor (разд. 2.3) выбран тип Blank
(пустой), то компонент такого типа не имеет электрических свойств, не участвует в моделировании и
предназначен лишь для нанесения на схему дополнительной информации. К таким компонентам относится Arrow — стрелка, указывающая, в частности, направление тока, и Bubble — контакт, помеченный текстовой меткой.
3.6.
Активные компоненты (Active components)
67
В программе МС7 используются в большинстве случаев (за исключением модели нелинейного
магнитного сердечника) те же математические модели полупроводниковых приборов, что и программа PSpice [4]. При необходимости полную информацию по моделям активных приборов (включая и формулы по которым производится расчет при моделировании), можно взять из [4] (на русском
языке) и из [6] (на английском языке, есть файл в формате pdf). Появился также фрагмент перевода
на русский [6], касающийся моделей активных приборов.
3.6.1.
Биполярный транзистор (Bipolar transistor — BJT)
Формат схем МС7:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: [Area] [OFF] [IC=&lt;Vbe&gt;[,Vce]]
Атрибут MODEL: [имя модели]
Модели биполярных транзисторов задаются в виде
.MODEL &lt;имя модели&gt; NPN [(параметры модели)]
n-p-n p-n-p
.MODEL &lt;имя модели&gt; PNP [(параметры модели)]
Параметр Area задает коэффициент кратности для учета подключения нескольких параллельных транзисторов (параметры модели транзистора умножаются или делятся на эту величину). Параметр IC (Initial Conditions) задает начальное напряжение база-эмиттер Vbe и коллектор-эмиттер Vсе
при расчете переходных процессов, если на панели Transient Analysis Limits выключена опция
Operating Point. Включение ключевого слова OFF исключает транзистор из схемы при проведении
первой итерации расчета режима по постоянному току.
В программе МС7 используется схема замещения биполярного транзистора в виде модели
Гуммеля-Пуна, которая автоматически упрощается до более простой модели Эберса-Молла, если
опустить некоторые параметры. Список параметров полной математической модели биполярного
транзистора приведен в табл. 3.14.
Таблица 3.14. Параметры модели биполярного транзистора
Имя параметра
IS
BF
BR
NF
NR
ISE*
ISC*
ISS
NS
IKF*
68
Параметр
Ток насыщения при температуре 27&deg;С
Максимальный коэффициент усиления тока в нормальном
режиме в схеме с ОЭ (без учета токов утечки)
Максимальный коэффициент усиления тока в инверсном режиме в схеме с ОЭ
Коэффициент эмиссии (неидеальности) для нормального режима
Коэффициент эмиссии (неидеальности) для инверсного режима
Ток насыщения утечки перехода база-эмиттер
Ток насыщения утечки перехода база-коллектор
Ток насыщения p-n перехода подложки
Коэффициент эмиссии тока p-n-перехода подложки
Ток начала спада зависимости BF oт тока коллектора в нормальном режиме
Значение
по умолчанию
1E-16
Единица измерения
А
100
1
1
1
0
0
0
А
А
А

А
Имя параметра
IKR*
NE*
NC*
NK
VAF
VAR*
RC
RE
RB
RBM*
IRB*
TF
TR
XTF
VTF
ITF
PTF
Параметр
Ток начала спада зависимости BR от тока эмиттера в инверсном режиме
Коэффициент эмиссии тока утечки эмиттерного перехода
Коэффициент эмиссии тока утечки коллекторного перехода
Коэффициент перегиба при больших токах
Напряжение Эрли в нормальном режиме
Напряжение Эрли в инверсном режиме
Объемное сопротивление коллектора
Объемное сопротивление эмиттера
Объемное сопротивление базы (максимальное) при нулевом
смещении перехода база-эмиттер
Минимальное сопротивление базы при больших токах
Ток базы, при котором сопротивление базы уменьшается на
50% полного перепада между RB и RBM
Время переноса заряда через базу в нормальном режиме
Время переноса заряда через базу в инверсном режиме
Коэффициент, определяющий зависимость TF от смещения
база-коллектор
Напряжение, характеризующее зависимость TF от смещения
база-коллектор
Ток, характеризующий зависимость ТF от тока коллектора при
больших токах
Дополнительный фазовый сдвиг на граничной частоте транзистора f гр 
1
2  TF
Значение
по умолчанию
Единица измерения

А
1,5
2
0.5


0
0
В
В
Ом
Ом
0
Ом
RB
Ом

А
0
0
с
с
0

В
0
А
0
град.
пФ
В
CJE
VJE (РЕ)
Емкость эмитгерного перехода при нулевом смещении
Контактная разность потенциалов перехода база-эмиттер
0
0,75
MJE (ME)
Коэффициент, учитывающий плавность эмиттерного перехода
0,33
CJC
VJC (PC)
MJC(MC)
CJS (CCS)
VJS (PS)
MJS (MS)
XCJC
FC
EG
XTB
XTI(PT)
Емкость коллекторного перехода при нулевом смещении
Контактная разность потенциалов перехода база-коллектор
Коэффициент, учитывающий плавность коллекторного перехода
Емкость перехода коллектор-подложка при нулевом смещении
Контактная разность потенциалов перехода коллекторподложка
Коэффициент, учитывающий плавность перехода коллекторподложка
Коэффициент расщепления барьерной емкости базаколлектор по отношению к внутренней базе
Коэффициент нелинейности барьерных емкостей прямосмещенных переходов
Ширина запрещенной зоны
Температурный коэффициент BF и ВR
Температурный экспоненциальный коэффициент для тока IS
0
0,75
Ф
В
0,33
0
Ф
0,75
В
0
1
~
0,5
1,11
0
3
эВ
—
—
69
Имя параметра
Параметр
TRE1
TRE2
TRB1
TRB2
TRM1
TRM2
TRC1
TRC2
Линейный температурный коэффициент RE
Квадратичный температурный коэффициент RЕ
Линейный температурный коэффициент RВ
Квадратичный температурный коэффициент RB
Линейный температурный коэффициент RВМ
Квадратичный температурный коэффициент RВМ
Линейный температурный коэффициент RС
Квадратичный температурный коэффициент RС
Коэффициент, определяющий спектральную плотность фликKF
кер-шума
Показатель степени, определяющий зависимость спектральAF
ной плотности фликкер-шума от тока через переход
T_MEASURED Температура измерений
T_ABS
Абсолютная температура
T_REL_GLOBAL Относительная температура
Разность между температурой транзистора и моделиT_REL_LOCAL
прототипа
* Для модели Гуммеля-Пуна.
Значение
по умолчанию
0
0
0
0
0
0
0
0
Единица измерения
C-1
C-2
C-1
C-2
C-1
C-2
C-1
C-2
0
1
—
—
—
&deg;С
&deg;С
&deg;C
&deg;C
Рис. 3.21. Модель биполярного транзистора
3.6.2.
Арсенид-галлиевый полевой транзистор (GaAsFET)
Формат схем МС7:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: [Area] [OFF] [IC=&lt;Vds&gt;[,Vgs]]
Атрибут MODEL: [имя модели]
Параметр Area задает коэффициент кратности для учета подключения нескольких параллельных транзисторов (параметры модели транзистора умножаются или делятся на эту величину). Параметр IC (Initial Conditions) задает начальное напряжение сток-исток Vds и затвор-сток Vgs при расчете
переходных процессов, если на панели Transient Analysis Limits выключена опция Operating Point.
Включение ключевого слова OFF исключает транзистор из схемы при проведении первой итерации
расчета режима по постоянному току.
70
Модель арсенид-галлиевого полевого транзистора задается в виде:
.MODEL &lt;имя модели&gt;GASFET [(параметры модели)]
Арсенид-галлиевые полевые транзисторы (GaAsFET) являются приборами с каналом n-типа и
имеют три модели, предложенные Куртисом (Curtice), Рэйтеоном (Raytheon) и TriQuint модель. Модель Куртиса дает удовлетворительные результаты лишь при расчете статического режима. Остальные модели отражают и динамические характеристики арсенид-галлиевого транзистора. Параметры
трех математических моделей приведены в табл. 3.15.
Таблица 3.15. Параметры модели арсенид-галлиевого транзистора
Обозначение
LEVEL
VTO
ALPHA
В
BETA
LAMBDA
GAMMA
DELTA
Q
RG
RD
RS
CGD
CGS
CDS
IS
M
N
FC
VBI
EG
XTI
VDELTA
VMAX
VTOTC
ВЕТАТСЕ
TRG1
TRD1
TRS1
KF
AF
Параметр
Тип модели: 1 — модель Куртиса, 2 — модель Рэйтеона, 3
— модель TriQuint
Барьерный потенциал перехода Шоттки или пороговое
напряжение
Коэффициент для напряжения насыщения тока стока
Параметр легирования (Level=2)
Удельная крутизна (удельная передаточная проводимость)
Параметр модуляции длины канала
Параметр статической обратной связи (для Level=3)
Параметр выходной обратной связи (для Level=3)
Показатель степени (для Level=3)
Объемное сопротивление области затвора
Объемное сопротивление области стока
Объемное сопротивление области истока
Емкость затвор-сток при нулевом смещении
Емкость затвор-исток при нулевом смещении
Емкость сток-исток фиксированная
Ток насыщения р-n-перехода затвор-канал
Коэффициент плавности p-n-перехода затвора
Коэффициент эмиссии p-n-перехода затвор-канал
Коэффициент нелинейности барьерной емкости прямосмещенного p-n-перехода затвора
Контактная разность потенциалов р-n-перехода затвора
Ширина запрещенной зоны
Температурный коэффициент тока IS
Напряжение, входящее в выражения для емкостей переходов (для Level=2 и 3)
Максимальное напряжение, входящее в выражения для
емкостей переходов (для Level=2 и 3)
Температурный коэффициент VTO
Температурный экспоненциальный коэффициент BETA
Линейный температурный коэффициент RG
Линейный температурный коэффициент RD
Линейный температурный коэффициент RS
Коэффициент, определяющий спектральную плотность
фликкер-шума
Показатель степени, определяющий зависимость спектральной плотности фликкер-шума от тока через переход
Значение Единица
по умолча- измерению
ния
1
-2,5
В
2,0
0,3
0,1
0
0
0
2
0
0
0
0
0
0
1E-14
0,5
1
1/В
1/В
А/В2
1/В
(АВ)-1
—
Ом
Ом
Ом
Ф
Ф
Ф
А
—
0,5
1
1,11
0
В
эВ
0,2
В
0,5
В
0
0
0
0
0
В/&deg;С
%/C
1/&deg;С
1/&deg;С
1/&deg;С
0
1
71
Обозначение
Параметр
T_MEASURED Температура измерения
T_ABS
Абсолютная температура
T_REL_GLOBAL Относительная температура
T_REL_LOCAL
Значение Единица
по умолча- измерению
ния
&deg;С
—
&deg;С
—
&deg;С
—
Разность между температурой транзистора и моделипрототипа
&deg;С
Рис. 3.22. Модель арсенидгаллиевого полевого транзистора
3.6.3.
Полевой транзистор (JFET)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE: [Area] [OFF] [IC=&lt;Vds&gt;[,Vgs]]
n-ch p-ch
Атрибут MODEL: [имя модели]
Параметр Area задает коэффициент кратности для учета подключения нескольких параллельных транзисторов (параметры модели транзистора умножаются или делятся на эту величину). Параметр IC задает начальное напряжение сток-исток Vds и затвор-сток Vgs при расчете переходных
процессов, если на панели Transient Analysis Limits выключена опция Operating Point. Включение
ключевого слова OFF исключает транзистор из схемы при проведении первой итерации расчета режима по постоянному току. Модель полевого транзистора задается в виде:
.MODEL &lt;имя модели&gt; NJF [(параметры модели)]
.MODEL &lt;имя модели&gt; PJF [(параметры модели)]
Полевые транзисторы с управляющим p-n-переходом описываются моделью ШихманаХоджеса, параметры которой приведены в табл. 4.11.
72
Таблица 3.16. Параметры модели полевого транзистора
Обозначение
VTO
Параметр
Пороговое напряжение
Коэффициент пропорциональности (удельная передаточBETA
ная проводимость
LAMBDA
Параметр модуляции длины канала
IS
Ток насыщения р-n-перехода затвор-канал
RD
Объемное сопротивление области стока
RS
Объемное сопротивление области истока
CGD
Емкость перехода затвор-сток при нулевом смещении
CGS
Емкость перехода затвор-исток при нулевом смещении
M
Коэффициент плавности перехода затвор-исток
Коэффициент нелинейности емкостей переходов при
FC
прямом смещении
PB
Контактная разность потенциалов р-n-перехода затвора
VTOTC
Температурный коэффициент VTO
ВЕТАТСЕ
Температурный экспоненциальный коэффициент BETA
XTI
Температурный коэффициент тока IS
Коэффициент, определяющий спектральную плотность
KF
фликкер-шума
Показатель степени, определяющий зависимость спекAF
тральной плотности фликкер-шума от тока
T_MEASURED Температура измерения
T_ABS
Абсолютная температура
T_REL_GLOBAL Относительная температура
Разность между температурой транзистора и моделиT_REL_LOCAL
прототипа
Значение Единица
по умолча- измерению
ния
В
–2
1E-4
А/В2
0
1E-14
0
0
0
0
0,5
1/В
А
Ом
Ом
Ф
Ф
0,5
&quot;
1
0
0
3
В
В/&deg;С
%/&deg;С
—
0
1
—
—
—
&deg;С
&deg;С
&deg;С
&deg;С
Рис. 3.23. Модель полевого транзистора с управляющим p-n переходом
73
3.6.4.
МОП-транзистор (MOSFET)
Формат схем МС:
Атрибут PART: &lt;имя&gt;
Атрибут VALUE:
[L=&lt;значение&gt;] [W=&lt;значение&gt;]
[АD=&lt;значение&gt;]
n-ch p-ch
[АS=&lt;значение&gt;]
+ [РD=&lt;значение&gt;] [РS=&lt;значение&gt;] [NRD=&lt;значение&gt;] [NRS=&lt;значение&gt;]
+ [NRG=&lt;значение&gt;] [NRВ=&lt;значение&gt;] [OFF] [IC=&lt; Vds&gt;[, Vgs[, Vbs]]]
Атрибут MODEL: [имя модели]
Параметр IC задает начальное напряжение сток-исток Vds, затвор-сток Vgs и затвор-подложка
Vbs при расчете переходных процессов, если на панели Transient Analysis Limits выключена опция
Operating Point. Включение ключевого слова OFF исключает транзистор из схемы при проведении
первой итерации расчета режима по постоянному току. Необязательные параметры приведены в
табл. 4.9. Параметры L и W могут быть заданы при описании модели МОП-транзистора по директиве
.MODEL; кроме того, параметры L, W, AD и AS по умолчанию принимают значения, присваиваемые в
диалоговом окне Global Settings (см. п. 1.4.2. с. 22).
Таблица 3.17. Физико-топологические параметры МОП-транзистора
Обозначение
L
W
AD
AS
PD
PS
NRD
NRS
NRG
NRB
Параметр
Длина канала
Ширина канала
Площадь диффузионной области стока
Площадь диффузионной области истока
Периметр диффузионной области стока
Периметр диффузионной области истока
Удельное относительное сопротивление стока
Удельное относительное сопротивление истока
Удельное относительное сопротивление затвора
Удельное относительное сопротивление подложки
Значение по
умолчанию
DEFL
DEFW
DEFAD
DEFAS
0
0
1
1
0
0
Размерность
м
м
м
м
м
м
—
—
—
—
Модели МОП-транзисторов задаются в виде:
.MODEL &lt;имя модели&gt; NMOS[(параметры модели)]
.MODEL &lt;имя модели&gt;PMOS[(параметры модели)]
В программе МС7 МОП-транзисторы описываются тремя разными системами уравнений, выбор которых определяется параметром LEVEL, принимающим значения 1, 2 и 3. Модель первого
уровня (LEVEL=1) используется в тех случаях, когда не предъявляются высокие требования к точности моделирования вольт-амперных характеристик транзистора, в частности, при моделировании
МОП-транзисторов с коротким или узким каналом. Модели второго (LEVEL=2) и третьего (LEVEL=3)
уровней учитывают более тонкие физические эффекты. Параметры трех математических моделей
приведены в табл. 3.18.
74
Таблица 3.18. Параметры модели МОП-транзистора
Уровень
Обозначение модели
LEVEL
LEVEL
L
W
LD
WD
VTO
КР
1-3
1-3
1-3
1-3
1-3
1-3
GAMMA
1-3
PHI
LAMBDA
RD
RS
RG
RB
RDS
1-3
1,2
1-3
1-3
1-3
1-3
1-3
RSH
1-3
IS
1-3
JS
1-3
JSSW
1-3
PB
1-3
PBSW
1-3
N
1-3
CBD
1-3
CBS
1-3
CJ
1-3
CJSW
1-3
MJ
1-3
MJSW
1-3
FC
1-3
Параметр
Индекс уровня модели
Длина канала
Ширина канала
Глубина области боковой диффузии
Ширина области боковой диффузии
Пороговое напряжение при нулевом смещении
Параметр удельной крутизны
Коэффициент влияния потенциала подложки на
пороговое напряжение
Поверхностный потенциал сильной инверсии
Параметр модуляции длины канала
Объемное сопротивление стока
Объемное сопротивление истока
Объемное сопротивление затвора
Объемное сопротивление подложки
Сопротивление утечки сток-исток
Удельное сопротивление диффузионных областей
истока и стока
Ток насыщения р-n-перехода сток-подложка (истокподложка)
Плотность тока насыщения перехода сток (исток)подложка
Удельная плотность тока насыщения (на длину
периметра)
Напряжение инверсии приповерхностного слоя
подложки
Напряжение инверсии боковой поверхности р-nперехода
Коэффициент неидеальности перехода подложкасток (исток)
Емкость донной части перехода сток-подложка при
нулевом смещении
Емкость донной части перехода исток-подложка
при нулевом смещении
Удельная емкость донной части р-n-перехода сток
(исток)-подложка при нулевом смещении (на площадь перехода)
Удельная емкость боковой поверхности перехода
сток (исток)-подложка при нулевом смещении (на
длину периметра)
Коэффициент, учитывающий плавность донной
части перехода подложка-сток (исток)
Коэффициент, учитывающий плавность бокового
перехода подложка-сток (исток)
Коэффициент нелинейности барьерной емкости
прямосмещенного перехода подложки
1
DEFL
DEFW
0
0
1
2E-5
Единица измерения
—
м
м
м
м
В
А/В2
0
В1/2
0,6
0
0
0
0
0
∞
В
1/В
Ом
Ом
Ом
Ом
Ом
0
Ом/кв.
1E-14
А
0
А/м2
0
А/м
0,8
В
PB
В
Значение
по умолчанию
1
0
Ф
0
Ф
0
Ф/м2
0
Ф/м
0,5
0,33
0,5
75
Уровень
Обозначение модели
LEVEL
CGSO
1-3
CGDO
1-3
CGBO
1-3
TT
NSUB
1-3
2, 3
NSS
2,3
NFS
2,3
TOX
1-3
TPG
2,3
XJ
2,3
UO
2,3
UCRIT
2
UEXP
2
UTRA
GDSNOI
NLEV
VMAX
2
1-3
1-3
2, 3
NEFF
2
XQC
2, 3
DELTA
2, 3
THETA
3
ETA
3
KAPPA
3
KF
1-3
AF
1-3
T_MEASURED
T_ABS
T_REL_GLOBAL
1-3
1-3
1-3
76
Параметр
Удельная емкость перекрытия затвор-исток (за
счет боковой диффузии)
Удельная емкость перекрытия затвор-сток на длину канала (за счет боковой диффузии)
Удельная емкость перекрытия затвор-подложка (за
счет выхода затвора за пределы канала)
Время переноса заряда через р-n-переход
Уровень легирования подложки
Плотность медленных поверхностных состояний
на границе кремний-подзатворный оксид
Плотность быстрых поверхностных состояний на
границе кремний-подзатворный оксид
Толщина оксидной пленки
Тип материала затвора (+1 — легирование затвора примесью того же типа, как и для подложки; –1
— примесью противоположного типа; 0 — металл)
Глубина металлургического перехода областей
стока и истока
Поверхностная подвижность носителей
Критическая напряженность поля, при которой подвижность носителей уменьшается в два раза
Экспоненциальный коэффициент снижения подвижности носителей
Коэффициент снижения подвижности носителей
Коэффициент дробового шума канала
Выбор шумового уравнения
Максимальная скорость дрейфа носителей
Эмпирический коэффициент коррекции концентрации примесей в канале
Доля заряда канала, ассоциированного со стоком
Коэффициент влияния ширины канала на пороговое напряжение
Коэффициент модуляции подвижности носителей
под влиянием вертикального поля
Параметр влияния напряжения сток-исток на пороговое напряжение (статическая обратная связь)
Фактор поля насыщения (Параметр модуляции
длины канала напряжением сток-исток)
Коэффициент, определяющий спектральную плотность фликкер-шума
Показатель степени, определяющий зависимость
спектральной плотности фликкер-шума от тока через переход
Температура измерения
Абсолютная температура
Относительная температура
Значение
по умолчанию
Единица измерения
0
Ф/м
0
Ф/м
0
Ф/м
0
Нет
с
1/см3
Нет
1/см2
0
1/см2
1E-7
м
1
0
м
600
см2/В/с
1E4
В/см
0
0
1
2
0
м/с
м/с
1
0
0
0
1/В
0
0,2
0
1
—
—
—
&deg;С
&deg;С
&deg;С
Параметр
Значение
по умолчанию
Единица измерения
Разность между температурой транзистора и
модели-прототипа
—
&deg;С
Уровень
Обозначение модели
LEVEL
T_REL_LOCAL
1-3
Рис. 3.24. Модель полевого транзистора с изолированным затвором (МОП-транзистора).
3.6.5.
Операционный усилитель (ОРАМР)
Формат схем МС:
Атрибут PART: &lt;имя&gt; Атрибут MODEL: [имя модели]
В программе МС7 имеются модели операционных усилителей трех типов:
LEVEL 1 — простейшая линейная модель, представляющая собой источник тока, управляемый
напряжением. ОУ имеет конечное выходное и бесконечное входное сопротивление (тем не менее
выводы питания ОУ нужно подключить к схеме, так как в модели они подсоединены к &laquo;земле&raquo; через
сопротивления 1 Ом), рис. 3.25, а;
LEVEL 2 — более сложная линейная модель, состоящая из трех каскадов и имитирующая два
полюса передаточной функции ОУ, ограничение скорости нарастания выходного напряжения, конечный коэффициент усиления и конечное выходное сопротивление, рис. 3.25, б;
LEVEL 3 — нелинейная модель, аналогичная той, что применяется в программе PSpice. В ней
учитываются ограничения на скорость нарастания выходного напряжения, значения выходного сопротивления на постоянном и переменном токе, ток и напряжение смещения, запас по фазе на частоте единичного усиления, площадь усиления, коэффициент подавления синфазного сигнала, реальные значения диапазона выходного напряжения и тока, рис. 3.25, в, г. Возможен выбор типа
входного дифференциального каскада (на биполярных или полевых транзисторах).
Все они имеют одинаковую графику символов. В отличие от программы PSpice, в которой модель ОУ описывается только как макромодель, в программе МС7 также используются и встроенные
модели ОУ (LEVEL =1, 2, 3), что упрощает работу с ними и повышает скорость моделирования. Модель ОУ задается по директиве:
.MODEL &lt;имя модели&gt; ОРА ([список параметров])
Перечень параметров модели ОУ приведен в табл. 3.19.
77
а)
б)
в)
г)
Рис. 3.25. Модели операционного усилителя первого (а), второго (б) и третьего (в) уровней LEVEL
78
Таблица 3.19. Параметры моделей операционных усилителей
УроЗначеРазвень
ние по
Обозначение
Параметр
мермодели
умолчаность
LEVEL
нию
LEVEL
1
1—3 Уровень модели (1 , 2, 3)
—
Тип входного транзистора: 1 — NPN, 2 — PNP, 3 —
TYPE
1
3
JFET
С
30E-12
3
Емкость коррекции
Ф
A
2E5
1—3 Коэффициент усиления на постоянном токе
~
ROUTAC
75
1 —3 Выходное сопротивление по переменному току
Ом
ROUTDC
125
1 —3 Выходное сопротивление по постоянному току
Ом
VOFF
0,001
3
Напряжение смещения нуля
В
IOFF
1E-9
3
Разность входных токов смещения
А
Максимальная скорость нарастания выходного напряSRP
5E5
2,3
В/с
жения
SRN
5E5
2,3
Максимальная скорость спада выходного напряжения
В/с
IBIAS
1E-7
3
Входной ток смещения
А
VCC
15
3
Положительное напряжение питания
В
VEE
-15
3
Отрицательное напряжение питания
В
VPS
13
3
Максимальное выходное положительное напряжение
В
VNS
-13
3
Максимальное выходное отрицательное напряжение
В
CMRR
10E5
3
Коэффициент подавления синфазного сигнала
Площадь усиления (равна произведению коэффициенGBW
1E6
2, 3
та усиления А на частоту первого полюса)
PM
60
2, 3
Запас по фазе на частоте единичного усиления
град.
PD
0,025
3
Рассеиваемая мощность
Вт
IOSC
0,02
3
Выходной ток короткого замыкания
А
T_MEASURED
—
3
Температура измерений
&deg;С
T_ABC
—
3
Абсолютная температура
&deg;С
T_REL_GLOBAL
—
3
Относительная температура
&deg;С
Разность между температурой устройства и модеT_REL_LOCAL
3
&deg;С
ли-прототипа
79
4.
Выполнение моделирования
После того как нарисована принципиальная схема переходят к расчету характеристик, выбирая
в меню Analysis один из видов анализа:
Transient (Alt+1) — расчет переходных процессов;
AC (Alt+2) — расчет частотных характеристик;
DC (Alt+3) — расчет передаточных функций по постоянному току (при вариации постоянной составляющей одного или двух источников сигналов, вариации температуры или параметров моделей
компонентов);
Dynamic DC (Alt+4) — расчет режима по постоянному току и динамическое отображение на
схеме узловых потенциалов, токов ветвей и рассеиваемой мощности;
Transfer Function (Alt+5) — расчет малосигнальных передаточных функций в режиме по постоянному току;
Sensitivity (Alt+6) — расчет чувствительностей режима по постоянному току.
4.1.
Расчет передаточных функций по постоянному току (DC —Alt+3)
В режиме DC рассчитываются передаточные характеристики по постоянному току. Ко входам
цепи подключаются один или два независимых источника постоянного напряжения или тока. В качестве выходного сигнала может рассматриваться разность узловых потенциалов или ток через ветвь,
в которую включен резистор. При расчете режима DC программа закорачивает индуктивности, исключает из схемы конденсаторы и затем рассчитывает режим по постоянному току при нескольких значениях входных сигналов. Например, при подключении одного источника постоянного
напряжения может рассчитываться передаточная функция усилителя, а при подключении двух источников — семейство статических выходных характеристик транзистора. Как правило, режим анализа DC и используется в основном для этих двух целей: построения вольтамперных характеристик
полупроводниковых и электронных приборов (см. каталог схем ANALYSIS\DC\ВАХи_Приборов) и
снятия передаточных характеристик усилителей постоянного тока не содержащих реактивных компонентов (см. схемы DIFFAMP, MOSDIFF, UA741, UA709, RCA3040 из каталога Analysis\DC)
После перехода в режим DC программа МС7 проверяет правильность схемы. При отсутствии
ошибок программа составляет топологическое описание схемы, выполняет подготовку к численному
расчету нелинейных уравнений итерационным методом Ньютона-Рафсона и открывает окно задания
параметров моделирования DC Analysis Limits.
4.1.1.
Задание параметров моделирования DC Analysis Limits
В окне задания параметров расчета передаточных характеристик по постоянному току, показанном на рис. 4.1, имеются следующие разделы.
К о м а н д ы:
Run — начало моделирование. Щелчок на пиктограмме
в строке инструментов или нажатие F2 также начинает моделирование. Моделирование может быть остановлено в любой момент
времени нажатием на пиктограмму
му
80
или клавишу Esc. Последовательные нажатия на пиктограм-
прерывают и затем продолжают моделирование;
Add — добавление еще одной строки спецификации вывода результатов после строки, отмеченной курсором. На этой строке устанавливается способ отображения результатов и аналитические
выражения для построения графиков. При наличии большого количества строк, не умещающихся на
экране, появляется линейка прокрутки;
Delete — удаление строки спецификации вывода результатов, отмеченной курсором;
Expand — открытие дополнительного окна для ввода текста большого размера при расположении курсора в одной из граф, содержащих выражения, например Y Expression;
Stepping — открытие диалогового окна задания вариации параметров;
Properties — открытие диалогового окна задания параметров вывода результатов моделирования (окон графиков, текстовых надписей, толщины и цвета линий и др.);
Help— вызов раздела DC Analysis системы помощи.
Рис. 4.1. Задание параметров расчета в режиме DC
Числовые
п а р а м е т р ы:
Variable 1 — задание первой варьируемой переменной.
В графе Method выбирается метод варьирования переменной (Auto — выбираемый автоматически; Linear — линейный, задаваемый в графе Range по формату Final[,lnitial[,Step]], если опустить
параметр Step (шаг), то шаг будет принят равным (Final— lnitial)/50, если опустить параметр Initial, то
начальное значение будет положено равным нулю, если изменяется только один источник, то можно
оставить строку пустой; Log — логарифмический; List — в виде списка значений, разделяемых запятыми).
81
В графе Name из списка, открываемого нажатием на кнопку , выбирается имя варьируемой
переменой — величины источника постоянного напряжения или тока, температуры или имени одного
из компонентов, имеющих математические модели; при выборе в графе Name имени такого компонента в расположенном справа окне выбирается варьируемый параметр его математической модели.
Variable 2 — задание второй варьируемой переменной. Если она отсутствует, то в графе
Method выбирается None.
Number of Points — количество точек, выводимых в таблицы, т. е. количество строк в таблице
вывода результатов, минимальное значение равно 5. При выводе в таблицы применяется линейная
интерполяция.
Temperature — диапазон изменения температуры в градусах Цельсия; при выборе параметра
Linear имеет формат High[,Low[,Step]]; если параметр Step (шаг) опущен, то выполняется анализ при
двух значениях температуры Low (минимальной) и High (максимальной), если опущены оба параметра Low и Step, то расчет проводится при единственной температуре, равной High, при выборе параметра List указывается список температур, разделяемых запятыми. При изменении температуры изменяются параметры компонентов, имеющие ненулевые температурные коэффициенты ТС, а также
ряд параметров полупроводниковых приборов. Значение установленной здесь температуры может
использоваться в различных выражениях, она обозначается как переменная TEMP.
Maximum change, % — максимально допустимое приращение графика первой функции на одном шаге (в процентах от полной шкалы). Если график функции изменяется быстрее, то шаг приращения первой переменной автоматически уменьшается.
О п ц и и:
Run Options — управление выдачей результатов расчетов:
Normal — результаты расчетов не сохраняются,
Save — сохранение результатов расчетов в бинарном дисковом файле &lt;имя схемы&gt;.DSА,
Retrieve — считывание последних результатов расчета из дискового файла&lt;имя схемь.DSA,
созданного ранее. При этом производится построение графиков и таблиц, как после обычного расчета.
Auto Scale Ranges — присвоение признака автоматического масштабирования &quot;Auto&quot; по осям X,
Y для каждого нового варианта расчетов. Если эта опция выключена, то принимаются во внимание
масштабы, указанные в графах X Range, Y Range.
Вывод результатов
м о д е л и р о в а н и я:
Ниже раздела &laquo;Числовые параметры&raquo; и слева от раздела &laquo;Выражения&raquo; расположена группа
пиктограмм. Нажатие каждой пиктограммы определяет характер вывода данных, задаваемых в той
же строке. Имеются следующие возможности:
X Log/Linear Scale — переключение между логарифмической и линейной шкалой по
оси X. При выборе логарифмической шкалы диапазон изменения переменной должен быть положительным;
Y Log/Linear Scale — переключение между логарифмической и линейной шкалой по
оси У. При выборе логарифмической шкалы диапазон изменения переменной должен быть положительным;
82
Color— вызов меню для выбора одного из 16 цветов для окрашивания графиков. График
окрашивается в цвет кнопки;
Numeric Output — при нажатии этой кнопки в текстовый выходной файл заносится таблица отсчетов функции, заданной в графе Y Expression. Запись производится в файл &laquo;&lt;имя схемы.АМО&raquo;. Таблица просматривается в окне Numeric Output (открывается нажатием клавиши F5). Количество отсчетов функции (число строк в таблице) задается параметром Number of Points в разделе
Числовые параметры;
Plot Group — в графе Р числом от 1 до 9 указывается номер графического окна, в котором
должна быть построена данная функция. Все функции, помеченные одним и тем же номером, выводятся в одном окне. Если это поле пусто, график функции не строится.
В ы р а ж е н и я:
X Expression — математическое выражение переменной, откладываемой по оси X.
Y Expression — математическое выражение переменной, откладываемой по оси Y.
X Range — максимальное и минимальное значение переменной Х на графике по формату
High[,Low]. Если минимальное значение Low равно нулю, его можно не указывать. Для автоматического выбора диапазона переменных в этой графе указывается Auto. В этом случае сначала выполняется моделирование, в процессе которого графики строятся в стандартном масштабе и затем автоматически перестраиваются;
Y Range — максимальное и минимальное значение переменной Y на графике; если минимальное значение равно нулю, его можно не указывать. Для автоматического выбора диапазона переменных в этой графе указывается Auto.
4.1.2.
Использование клавиши Р
После выполнения команды Run начинается расчет передаточных функций, и в процессе получения результатов на экран выводятся их графики. После нажатия клавиши Р в нижней части графического окна справа от обозначения каждой переменной выводятся их текущие численные значения. Этот способ удобен для контроля за длительными расчетами передаточных функций, диапазон
изменения которых заранее не известен (так что текущие результаты могут быть не видны на
экране). Однако моделирование при этом значительно замедляется, поэтому после просмотра
наиболее интересного фрагмента данных следует выключить этот режим повторным нажатием клавиши Р.
4.1.3.
Меню режимов расчета передаточных функций DC
После перехода в режим расчета передаточных функций в строке меню появляется новое меню DC, содержащее помимо стандартных пунктов RUN, Limits, Stepping, Exit, State Variables Editor и
расширенные команды: OPTIMIZE, Watch, Breakpoints, 3D Windows, Reduce Data Points. Состав этих
команд приблизительно одинаков для всех видов анализа, смысл их ясен из названия, а назначение
и результат выполнения определяются самостоятельно при углубленном изучении программного пакета.
83
4.2.
Расчет режима по постоянному току (Dynamic DC —Alt+4)
По команде Analysis/Dynamic DC производится расчет режима по постоянному току и его
отображение на чертеже семы. Причем если на закладке Common команды Options/Preferences
включен параметр Show Slider, то на схеме у изображений батарей и резисторов размещаются движковые регуляторы — при их перемещении движением курсора изменяются номинальные значения
этих компонентов, и на схеме отображаются новые значения режима по постоянному току, как показано на рис. 4.2. Минимальные и максимальные значения номинальных значений определяются с
помощью атрибутов SLIDER_MIN, SLIDER_MAX каждой батареи и каждого резистора, см. рис. 4.3.
Рис. 4.2. Отображение результатов расчета режима по постоянному току
Объем выводимой на схему информации определяется нажатием пиктограмм:
— номера узлов;
— напряжения аналоговых узлов или логические состояния цифровых узлов;
— токи ветвей;
— мощности, рассеиваемые в ветвях;
— состояния p-n переходов: LIN — линейный режим, ON — переход открыт, OFF— переход закрыт, SAT — находится в режиме насыщения, .
84
Рис. 4.3. Задание диапазона изменений номинальных значений для режима Dynamic DC.
При выполнении команды Analysis&gt;Dynamic DC по умолчанию нажата пиктограмма
остальные пользователи включают по мере надобности.
Так в примере (см. рис. 4.2) дополнительно нажата кнопка
для отображения состояния
транзистора.
Данный режим (Dynamic DC) может быть очень полезен, например, для настройки режима по
постоянному току усилительного каскада (многокаскадных усилителей), т.е. для правильной установки рабочей точки. Транзистор должен при этом находиться в линейном режиме, а напряжение на выходе должно быть в диапазоне 1/3…2/3 от напряжения питания. Примеры использования режима
DYNAMIC DC в схемных файлах US_BJT_ОЭ_настройка, US_NMOS_ОИ_настройка из каталога
ANALYSIS\DYNAMIC DC.
В 1-ом примере каскад в исходном состоянии не обладает необходимыми усилительными
свойствами, в чем можно убедиться, запустив режим анализа TRANSIENT — каскад будет искажать
синусоидальный сигнал, ограничивая его с одной стороны. Настройка производится изменением величины резистора R2 движком в режиме DYNAMIC DC при включенной дополнительно кнопке
,
до тех пор, пока транзистор не окажется в усилительном режиме (LIN, HOT) и напряжение на коллекторе не будет приблизительно равно половине напряжения питания. После этого можно снова запустить TRANSIENT анализ, ответив &laquo;NO&raquo; на вопрос о восстановлении исходного состояния каскада
по номиналам и убедиться в надлежащей работе усилительного каскада.
Во 2-м примере все делается аналогично, только настройка каскада выполняется изменением
напряжения источника в цепи затвора V1.
Отметим, что при использовании перечисленных выше кнопок при анализе переходных процессов на схеме отображаются не значения режима по постоянному току, а значения переходных
процессов в последний момент времени, если не выбрана опция Operation Point Only. После завершения расчетов по командам Analysis/AC, DC на схеме отображаются значения режима по постоянному току, рассчитанного последним.
85
4.3.
Расчет малосигнальных передаточных функций (Transfer Function —
Alt+5)
По команде Analysis/Transfer Function выполняется расчет малосигнальных передаточных
функций в режиме по постоянному току, которые рассчитываются после линеаризации схемы в
окрестности рабочей точки. Задание на расчет составляется в диалоговом окне, показанном на рис.
4.4. На строке Output Expression указывается выражение для выходной переменной, на строке Input
Source Name — имя входной переменной. В качестве выходной переменной может использоваться
любая переменная или функция, имеющие смысл при анализе режима по постоянному току, например, напряжение V(A,B) или ток I(R1). В качестве входной переменной может быть использовано
напряжение или ток источника напряжения или тока, например VIN. Расчет производится после
нажатия на панель Calculate. Результаты расчета передаточной функции, например dV(A,B)/dVIN,
указывается на строке Transfer Function. Кроме того, на строках Input(Output) Impedance указываются
значения входного (выходного) сопротивлений. При выборе опции Place Text результаты расчета помещаются в виде текста непосредственно на схему (рис. 4.4).
Рис. 4.4. Диалоговое окно Transfer Function (а) и текстовая информация о результатах расчетов (б)
4.4.
Расчет чувствительностей по постоянному току (Sensitivity — Alt+6)
Чувствительность режима по постоянному току рассчитывается по команде
Analysis/Sensitivity. Чувствительность рассчитывается после линеаризации схемы в окрестности
рабочей точки. При этом рассчитывается чувствительность одной или нескольких выходных переменных к изменению выбранных параметров схемы. Диалоговое окно команды показано на рис. 4.5.
86
В графе Output указывается одно или несколько выражений для выходных переменных, каждое
выражение на отдельной строке, например Iс(Q1). В окне Input Variable выбирается один входной параметр, например Ib (несколько параметров здесь выбирать не разрешается). Результаты расчета
&auml;I Q1 &auml;I B Q1 &auml;I E Q1
чувствительности, в приведенном выше примере это C
,
,
, после нажатия
&auml;I B
&auml;I B
&auml;I B
на панель Calculate помещаются в графу Sensitivity. В графе Sensitivity %/% помещаются значение
приращения выходной переменной в процентах, разделенное на изменение входного параметра в
процентах. Тип входных переменных выбирается с помощью кнопок Component, Model и Symbolic.
При выборе переменной типа Model можно в качестве входных выбрать несколько параметров математической модели указанного компонента (все параметры выбираются нажатием на кнопку Аll On,
при этом результаты расчета чувствительностей заносятся в текстовый файл с расширением *.sen в
виде таблиц.
Рис. 4.5. Диалоговое окно Sensitivity
Резюме: Все перечисленные выше в подразделах 4.1…4.4 режимы анализа являются разновидностями анализа по постоянному току и выполняются при исключении из схемы конденсаторов и
закорачивании катушек индуктивности.
4.5.
Анализ по переменному току на малом сигнале (AC — Alt+2)
В режиме АС сначала рассчитывается режим схемы по постоянному току, затем линеаризуются
все нелинейные компоненты (пассивные компоненты с нелинейными параметрами, диоды, транзисторы, нелинейные управляемые источники) и выполняется расчет комплексных амплитуд узловых
потенциалов и токов ветвей. При линеаризации цифровые компоненты заменяются их входными и
выходными комплексными сопротивлениями, передача сигналов через них не рассматривается.
87
Ко входу схемы должен быть подключен источник синусоидального SIN или импульсного сигнала PULSE или сигнала USER, форма которого задается пользователем. Этот источник в данном режиме (AC) задает место подключения гармонического возмущения с переменной частотой.
При расчете частотных характеристик комплексная амплитуда этого сигнала автоматически полагается равной 1 В, начальная фаза нулевая (независимо от того, как заданы значения параметров
модели сигнала), а частота меняется в пределах, задаваемых в меню AC Analysis Limits. Возможно
также подключение независимых источников напряжения V или тока I в формате SPICE, для которых задаются значения амплитуды и фазы.
Если имеется один источник сигнала, то выходные напряжения будут совпадать с частотными
характеристиками устройства. Если же источников сигнала несколько, то отклики от каждого сигнала
будут складываться как комплексные величины (см. рис. 4.6) и пример AC_FUNC из каталога Analysysis\AC.
Рис. 4.6. Пример анализа по переменному току с несколькими источниками сигнала
После перехода в режим анализа частотных характеристик программа МС7 проверяет правильность составления схемы. При отсутствии ошибок в схеме программа составляет ее топологическое описание, выполняет подготовку к численному решению системы нелинейных алгебраических
уравнений и открывает окно задания параметров моделирования AC Analysis Limits (См. рис. 4.7.).
Основная последовательность вычислений, выполняемая при проведении малосигнального частотного анализа AC по команде RUN следующая:
1. Рассчитывается режим работы схемы по постоянному току, исходя из величин постоянных
источников напряжения и тока в схеме (Baterry, Isource) а также значений постоянных составляющих
88
источников сигнала схемы (атрибут DC для SINE SOURCE и источников V и I, VZERO для PULSE
SOURСE).
2. Составляется линейная эквивалентная схема замещения каждого прибора на переменном
токе в окрестности рассчитанного режима по постоянному току.
3. Составляется полная линеаризованная схема замещения анализируемой схемы по переменному току в окрестности рассчитанного режима по постоянному току (ей соответствует система
линейных дифференциальных уравнений).
Рис. 4.7. Окно задания параметров AC анализа AC Analysis Limits
4. Все источники сигнала схемы принимаются синусоидальными с частотой f=fmin и амплитудой А=1 нулевой начальной фазой (это не относится к источникам сигнала V и I в формате SPICE,
для них значение амплитуды и фазы задается в атрибутах AC MAGNITUDE и AC PHASE).
5. Анализируется схема и находятся отклики в виде комплексных величин узловых потенциалов и токов схемы для линеаризованной схемы на заданной частоте.
6. Для заданной переменной и для заданных величин (Re, Im, Mag, PHASE, и пр.) на графике(ах) строятся точки и (или) выводятся численные значения в файл.
7. Увеличивается частота f на заданный шаг.
8. Проверяется условие: превысила ли частота f значение fmax? Если да — то завершить расчет, в противном случае — перейти к п. 5.
4.5.1.
Задание параметров моделирования AC Analysis Limits (F9,
)
В окне задания параметров расчета переходных процессов, показанном на рис. 4.7, имеются
следующие разделы.
К о м а н д ы:
Run — начало моделирование. Щелчок на пиктограмме
в строке инструментов или нажатие F2 также начинает моделирование. Моделирование может быть остановлено в любой момент
89
нажатием на пиктограмму
или клавишу Esc. Последовательные нажатия на пиктограмму
:
прерывают и затем продолжают моделирование;
Add — добавление еще одной строки спецификации вывода результатов после строки, отмеченной курсором. На этой строке устанавливается способ отображения результатов и аналитические
выражения для построения графиков. При наличии большого количества строк, не умещающихся на
экране, появляется линейка прокрутки;
Delete — удаление строки спецификации вывода результатов, отмеченной курсором;
Expand — открытие дополнительного окна для ввода текста большого размера при расположении курсора в одной из граф, содержащих выражения, например Y Expression;
Stepping — открытие диалогового окна задания вариации параметров;
Properties — открытие диалогового окна задания параметров (окон графиков, текстовых
надписей, толщины и цвета линий и др.);
Help — вызов раздела AC Analysis системы помощи.
Ч и с л о в ы е п а р а м е т р ы:
Frequency Range — спецификация конечной и начальной частоты по формату Fmax, Fmin. Отрицательные значения частоты не допускаются. Если значение Fmin не указано, то расчет не производится;
Number of Points — количество точек по частоте (Nf), в которых производится расчет частотных характеристик. Минимальное значение равно 5. В связи с тем, что в режиме АС не производится
интерполяция, то в таблицы и на графики выводятся все данные, полученные при расчете. Значения
частот, на которых производится расчет характеристик, зависит от параметров, установленных в
разделе &laquo;Опции&raquo;: Auto, Linear, Log. В режиме Auto параметр Number of Points во внимание не принимается и количество точек определяется величиной Maximum Change. Если принят линейный шаг
(Linear), то шаг приращения частоты равен
Fk+1 - Fk= (Fmax - Fmin)/(Nf - 1).
Если принят логарифмический масштаб (Log), то отношение соседних частотных точек равно
Fk+1/Fk= (Fmax/Fmin)/(Nf - 1).
Temperature — диапазон изменения температуры в градусах Цельсия. При выборе параметра
Linear имеет формат High[,Low[,Step]]; если при этом параметр Step (шаг) опущен, то выполняется
анализ при двух значениях температуры Low (минимальной) и High (максимальной), если опущены
оба параметра Low и Step, то расчет проводится при единственной температуре, равной High. При
выборе параметра List указывается список температур, разделяемых запятыми. При изменении температуры изменяются параметры компонентов, имеющие ненулевые температурные коэффициенты
ТС, а также ряд параметров полупроводниковых приборов. Значение установленной здесь температуры может использоваться в различных выражениях, она обозначается как переменная TEMP.
Maximum Change,% — максимально допустимое приращение графика первой функции на интервале шага по частоте (в процентах от полной шкалы). Принимается во внимание только при выборе опции Auto. Если график функции изменяется быстрее, то шаг приращения частоты автоматически уменьшается;
Noise Input— имя входного источника сигнала, используемого при расчете шумовых параметров. При указании переменной INOISE в графе Y expression выводится график квадратного корня
спектральной плотности напряжения или тока внутренних шумов цепи, пересчитанной к этим зажи90
мам. Если в качестве источника входного сигнала включается источник напряжения, то на вход пересчитывается спектральная плотность напряжения, а если источник тока, то спектральная плотность
тока;
Noise Output — номера узлов выходных зажимов цепи, в которых вычисляется спектральная
плотность напряжения выходного шума цепи. Формат: узел 1[,узел2].
Вывод
результатов
м о д е л и р о в а н и я:
Ниже раздела &laquo;Числовые параметры&raquo; и слева от раздела &laquo;Выражения&raquo; расположена группа
пиктограмм. Нажатие каждой пиктограммы определяет характер вывода данных, задаваемых в той
же строке. Имеются следующие возможности:
X Log/Linear Scale — переключение между логарифмической и линейной шкалой по
оси X. При выборе логарифмической шкалы диапазон изменения переменной должен быть положительным
Y Log/Linear Scale — переключение между логарифмической и линейной шкалой по
оси Y. При выборе логарифмической шкалы диапазон изменения переменной должен быть положительным;
Color— вызов меню для выбора одного из 16 цветов для окрашивания графиков. График
окрашивается в цвт кнопки;
Numeric Output — при нажатии этой кнопки в текстовый выходной файл заносится таблица отсчетов функции, заданной в графе Y Expression. Запись производится в файл &laquo;&lt;имя
схемь&gt;.АNО&raquo;. Таблица просматривается в окне Numeric Output (открывается нажатием клавиши F5).
Количество отсчетов функции (число строк в таблице) задается параметром Number of Points в разделе Числовые параметры;
Rectangular — вывод графиков в прямоугольной (декартовой) системе координат,
Polar — вывод графиков в полярной системе координат;
Smith chart plot — вывод графиков на круговой диаграмме (диаграмме Смита);
Plot Group — в графе Р числами от 1 до 9 указывается номер графического окна, в котором
должна быть построена данная функция. Все функции, помеченные одним и тем же номером, выводятся в одном окне. Если это поле пусто, график функции не строится.
В ы р а ж е н и я:
X Expression — имя переменной, откладываемой по оси X. Обычно при анализе переходных
процессов по этой оси откладывается частота (переменная F), однако это не обязательно. Так при
расчете импульсной характеристики с помощью преобразования Фурье по этой оси откладывается
время (переменная Т), а при построении годографа для анализа устойчивости по методу Найквиста
— действительная часть комплексного сигнала;
Y Expression — математическое выражение для переменной, откладываемой по оси Y. Это
может быть простая переменная типа напряжения в узле V(5), падение напряжения на двухполюсном
компоненте V(L1) или тока ветви I(2,3), I(L1), произведения комплексных величин, например
V(VCC)*I(VCC), и другие выражения (см. разд. 2.1.3). Для расчета уровня внутреннего шума в графе
Y Expression помещают имена переменных ONOISE, INOISE; при этом графики других переменных
нельзя одновременно выводить на экран;
91
X Range — максимальное и минимальное значение переменной Х на графике по формату
High[,Low]. Если минимальное значение Low равно нулю, его можно не указывать. Для автоматического выбора диапазона переменных в этой графе указывается Auto. В этом случае сначала выполняется моделирование, в процессе которого графики строятся в стандартном масштабе и затем автоматически перестраиваются. Удобно также использовать Fmax,Fmin, в этом случае не надо дублировать диапазон, указанный в Frequency Range;
Y Range — максимальное и минимальное значение переменной Y на графике; если минимальное значение равно нулю, его можно не указывать. Для автоматического выбора диапазона переменных в этой графе указывается Auto.
О п ц и и:
Run Options — управление выдачей результатов расчетов:
Normal — результаты расчетов не сохраняются,
Save — сохранение результатов расчетов в бинарном дисковом файле &lt;имя схемы&gt;.АSА,
Retrieve — считывание последних результатов расчета из дискового файла &lt;имя схемы&gt;.ASA,
созданного ранее. При этом производится построение графиков и таблиц, как после обычного расчета;
State Variables (Zero, Read, Leave) — установка начальных условий;
Frequency Step — шаг изменения частоты:
Auto — автоматический выбор шага по частоте, выбираемого на основе контроля максимального приращения функции первого графика;
Linear — расчет с постоянным линейным шагом по частоте;
Log — расчет с постоянным шагом на логарифмической шкале частоты;
Operation Point — предварительное выполнение расчета режима по постоянному току;
Auto Scale Ranges — присвоение признака автоматического масштабирования &laquo;Auto&raquo; по осям
X, Y для каждого нового варианта расчетов. Если эта опция выключена, то принимаются во внимание
масштабы, указанные в графах X Range, Y Range.
4.5.2.
Использование клавиши Р
После выполнения команды Run начинается расчет частотных характеристик, и в процессе получения результатов на экран выводятся их графики. После нажатия клавиши Р в нижней части графического окна справа от обозначения каждой переменной выводятся их текущие численные значения. Этот способ удобен для контроля за длительными расчетами частотных характеристик, диапазон изменения которых заранее не известен (так что текущие результаты могут быть не видны на
экране). Однако моделирование при этом значительно замедляется, поэтому после просмотра
наиболее интересного фрагмента данных следует выключить этот режим повторным нажатием клавиши.
4.5.3.
Меню режимов расчета частотных характеристик АС
После перехода в режим расчета частотных характеристик меняется состав меню команд (см.
рис. 4.8). Появляется новый режим АС, имеющий следующие команды.
Run (F2)
— выполнение моделирования;
Limits (F9)
Stepping (F11)
92
— задание пределов моделирования и построения графиков;
— многовариантный анализ (см. разд. 4.7);
Optimize (Ctrl+F11)
— параметрическая оптимизация;
Analysis Window (F4)
— открытие графического окна результатов моделирования;
Watch (Ctrl+W) — одновременный просмотр схемы, результатов моделирования и текстовых
выражений в трех окнах (см. рис. 4.9);
Рис. 4.8. Команды АС анализа
Breakpoints (Alt+F9) — остановка моделирования в заданной точке;
3D Windows (трехмерная графика):
Add 3D Window — добавление окна трехмерной графики,
Delete 3D Window — удаление окна трехмерной графики;
Performance Windows — расширенный анализ (параметрическая зависимость):
Add Performance Window — добавление окна параметрической зависимости,
Delete Performance Window — удаление окна параметрической зависимости;
Thumb Nail Plot
углу экрана;
Numeric Output (F5)
— размещение графика текущего окна малого размера в верхнем правом
— вывод на экран численных результатов в табличной форме;
State Variables Editor (F12)
ных условий);
— вызов редактора значений переменных состояния (началь-
93
DSP parameters — открытие диалогового окна DSP (Digital Signal Processing — цифровая обработка сигналов), в котором задаются границы интервала частот для расчета преобразования
Фурье (Upper Frequency, Lower Frequency) и количество отсчетов Number of Points (должно быть в
точности равно степени числа 2 в интервале от 64 до 8192), рис. 4.9. Заданные значения принимаются во внимание, если в графе Status нажать кнопку On. Расчет импульсных характеристик путем обратного преобразования Фурье комплексных коэффициентов передачи иллюстрируется примером
FFT4 из каталога Analysysis\AC. Следует отметить, что возможность задания параметров в окне DSP
parameters на практике почти никогда не используется, все необходимые параметры можно задать в
окне AC Analysis Limits (см. пример FFT4);
Reduce Data Points — открытие диалогового окна сокращения объема информации, выводимой на графиках и сохраненной в файлах;
Exit Analysis (F3) — завершение режима анализа и возвращение в окно схем.
Рис. 4.9. Окно задания диапазона частот для расчета преобразования Фурье
4.5.4.
Вывод численных данных
Результаты расчета схемы по постоянному току и таблицы значений переменных, отмеченных
нажатием кнопок
в соответствующих строках окна AC Analysis Limits, заносятся в текстовый
файл &lt;имя схемы&gt;.ANO. Просмотр его содержания выполняется нажатием на пиктограмму
в
меню АС.
В начале файла результатов моделирования, как и в режиме Transient Analysis, помещаются
значения режима по постоянному току (узловые потенциалы, токи через индуктивности и логические
состояния цифровых узлов). Далее приведены параметры линейных моделей диодов и транзисторов, рассчитанных в режиме по постоянному току и состояния р-n-переходов. В заключение — таблица дискретных отсчетов выходных переменных, графики которых изображены в окне Analysis Plot.
Количество строк в этой таблице равно значению параметра Number of Points в меню АС Analysis
Limits, если выбран постоянный шаг по частоте или определяется в соответствии с заданной точностью расчетов.
Примечание. Отметим, что при включении опции Auto Scale Ranges и выборе Frequency
Step=Auto масштаб графиков выбирается автоматически совершенно правильно, но при перестроении графиков после определения масштаба шаг по частоте выбирается слишком крупным и графики
строятся грубо. Поэтому в этом случае приходится проводить моделирование дважды: сначала при
включенной опции Auto Scale Ranges автоматически определить масштаб, а затем выключить эту
опцию и повторить моделирование — графики будут построены с обеспечением заданной точности.
Примеры использования AC анализа см. в схемных файлах BJT_OЭ, Butter, FILTER, NYQUIST,
ФИЛЬТР_МОСТ ВИНА из каталога Analysysis\AC.
94
4.5.5.
Расчет уровня внутреннего шума
В математических моделях компонентов, принятых в программе МС7, так же как и в программе
PSpice, учитываются тепловые, дробовые и низкочастотные фликкер-шумы (см. подробности в [4,
6]).
Спектральные плотности шума от отдельных источников суммируются. В качестве спектральной плотности выходного шума (размерность В2/Гц) рассчитывается спектральная плотность напряжения между узлами схемы, указанных в спецификации Noise Output. Если в качестве источника
входного сигнала включается источник напряжения, то на вход пересчитывается спектральная плотность напряжения, а если источник тока, то спектральная плотность тока. В результате расчета уровня шума на графиках и в таблицах выводятся значения квадратного корня из спектральной плотности напряжения шума (размерность В/Гц) или спектральной плотности тока шума (размерность
А/Гц). См. примеры анализа шумовых характеристик в схемных файлах NOISEBJT, DIFFAMP,
MOSDIFF, UA741 из каталога Analysysis\AC.
4.6.
Анализ переходных процессов (TRANSIENT — Alt+1)
После перехода в режим анализа переходных процессов программа МС7 проверяет правильность составления схемы. При наличии ошибок выводится информационное сообщение, при отсутствии ошибок в схеме программа составляет ее топологическое описание, выполняет подготовку к
численному расчету переходных процессов и открывает окно задания параметров моделирования
Transient Analysis Limits.
4.6.1.
Задание параметров моделирования Transient Analysis Limits (F9,
)
В окне задания параметров расчета переходных процессов, показанном на рис. 4.10, имеются
следующие разделы.
Команды:
Run — начало моделирования (щелчок на пиктограмме
в строке инструментов или нажатие
F2 также начинает моделирование). Моделирование может быть остановлено в любой момент нажатием на пиктограмму
или клавишу Esc. Последовательные нажатия на пиктограмму
вают и затем продолжают моделирование;
преры-
95
Рис. 4.10. Задание параметров расчета переходных процессов
Add— добавление еще одной строки спецификации вывода результатов после строки, отмеченной курсором. На этой строке устанавливается способ отображения результатов и аналитические
выражения для построения графиков. При наличии большого количества строк, не умещающихся на
экране, появляется линейка прокрутки;
Delete — удаление строки спецификации вывода результатов, отмеченной курсором;
Expand — открытие дополнительного окна для ввода текста большого размера при расположении курсора в одной из граф, содержащих выражения, например Y Expression;
Stepping — открытие диалогового окна задания вариации параметров;
Properties — открытие диалогового окна, имеющего 5 или 6 закладок: Plot — управление выводом графиков на экран и на принтер, Scales and Formats — выбор масштабов по осям координат,
Colors, Fonts and Lines — выбор цвета объектов, параметров шрифта и типа линий, Header— нанесение заголовков в выходных числовых данных, Save Curves выбор одной или нескольких переменных для сохранения в файлах User Source (рис. 4.11), только в режиме TRANSIENT, Tool Bar — нанесение пиктограмм команд на панель инструментов);
Help — вызов раздела Transient Analysis системы помощи.
96
Рис. 4.11. Диалоговое окно Properties (закладка Save Curves)
Числовые
п а р а м е т р ы:
Time Range — спецификация конечного и начального времени расчета переходных процессов
по формату Tmax[,Tmin]; по умолчанию назначается Tmin=0 (отрицательные значения моментов
времени недопустимы). Например, спецификация &quot;1.2ms,0.4ms&quot; задает интервал моделирования от
0,4 до 1,2 мс;
Maximum Time Step — максимальный шаг интегрирования. Расчет переходных процессов ведется с переменных шагом, выбираемым автоматически, величина которого определяется допустимой относительной ошибкой RELTOL. Максимальная величина шага интегрирования равна заданному значению. Если этот шаг не задан (или задан равным нулю), то максимальный шаг интегрирования полагается равным (Тmах—Tmin)/50;
Number of Points — количество точек, выводимых в таблицы, т. е. количество строк в таблице
вывода результатов по умолчанию принимается равным 51, минимальное значение 6. Если заданные моменты времени не совпадают со значениями, при которых проводился численный расчет, то
производится интерполяция. Интервал вывода данных равен
(Тmах—Tmin)/(&lt;Number of Points&gt;–1).
Эта опция доступна, если нажатием на одну из пиктограмм
выбран вывод переменных в
текстовый выходной файл (Numeric Output).
Temperature — диапазон изменения температуры в градусах Цельсия; при выборе параметра
Linear имеет формат High[,Low[,Step]]; если параметр Step (шаг) опущен, то выполняется анализ при
двух значениях температуры Low (минимальной) и High (максимальной), если опущены оба параметра Low и Step, то расчет проводится при единственной температуре, равной High; при выборе параметра List указывается список температур, разделяемых запятыми. При изменении температуры изменяются параметры компонентов, имеющие ненулевые температурные коэффициенты ТС, а также
ряд параметров полупроводниковых приборов. Значение установленной здесь температуры может
использоваться в различных выражениях, она обозначается как переменная TEMP.
Вывод
результатов
моделирования:
97
Ниже раздела &laquo;Числовые параметры&raquo; и слева от раздела &laquo;Выражения&raquo; расположена группа
пиктограмм. Нажатие каждой пиктограммы определяет характер вывода данных, задаваемых в той
же строке. Имеются следующие возможности:
X Log/Linear Scale — переключение между логарифмической и линейной шкалой по
оси X. При выборе логарифмической шкалы диапазон изменения переменной должен быть положительным;
Y Log/Linear Scale — переключение между логарифмической и линейной шкалой по
оси У. При выборе логарифмической шкалы диапазон изменения переменной должен быть положительным;
Color— вызов меню для выбора одного из 16 цветов для окрашивания графиков. Кнопка
окрашивается в выбранный цвет;
Numeric Output— при нажатии этой кнопки в текстовый выходной файл заносится таблица
отсчетов функции, заданной в графе Y Expression. Запись производится в файл &laquo;&lt;имя схемы&gt;.TNO&raquo;.
Таблица просматривается в окне Numeric Output (открывается нажатием клавиши F5). Количество
отсчетов функции (число строк в таблице) задается параметром Number of Points в разделе Числовые параметры;
Plot Group — в графе Р числом от 1 до 9 указывается номер графического окна, в котором
должна быть построена данная функция. Все функции, помеченные одним и тем же номером, выводятся в одном окне. Если это поле пусто, график функции не строится.
Выражения:
X Expression — имя переменной, откладываемой по оси X. Обычно при анализе переходных
процессов по этой оси откладывается время (переменная Т), однако это не всегда так. Так при расчете спектра сигнала с помощью преобразования Фурье (FFT) по оси X откладывается частота (переменная F, как показано на рис. 4.12), а при расчете петли гистерезиса ферромагнетика — напряженность магнитного поля, например Н(К1) (см. рис. 4.12);
Y Expression — математическое выражение для переменной, откладываемой по оси Y. Это
может быть простая переменная типа напряжения в узле V(5), падения напряжения на двухполюсном
компоненте V(L1), тока ветви I(2,3), I(L1) или математическое выражение, например V(VCC)*I(VCC).
После щелчка правой кнопки мыши при расположении курсора в любой графе Y Expression открывается показанное на рис. 4.12 всплывающее меню, позволяющее выбрать из предлагаемых списков
переменные и константы, размещаемые в этих графах;
X Range — максимальное и минимальное значение переменной Х на графике по формату
High[,Low]. Если минимальное значение Low равно нулю, его можно не указывать. Для автоматического выбора диапазона переменных в этой графе указывается Auto. В этом случае сначала выполняется моделирование, в процессе которого графики строятся в стандартном масштабе и затем автоматически перестраиваются. Удобно также с помощью открывающегося списка выбрать
Tmax,Tmin, что избавляет от необходимости при изменении диапазона времени моделирования, менять его для каждой интересующей переменной;
98
Рис. 4.12. Примеры задания параметров анализа переходных процессов
99
Y Range — максимальное и минимальное значение переменной Y на графике; если минимальное значение равно нулю, его можно не указывать. Для автоматического выбора диапазона переменных в этой графе указывается Auto.
Опции:
Run Options — управление выдачей результатов расчетов:
Normal — результаты расчетов не сохраняются,
Save — сохранение результатов расчетов в бинарном файле &lt;имя схемыхТSА,
Retrieve — считывание последних результатов расчета из файла &lt;имя схеvs&gt;.ТSА, созданного
ранее. При этом производится построение графиков и таблиц переходных процессов, как после
обычного расчета.
State Variables — установка начальных условий:
Zero — установка нулевых начальных условий для потенциалов всех аналоговых узлов и
токов через индуктивности и неопределенных логических состояний &laquo;X&raquo; для цифровых узлов,
Read — чтение начальных условий из бинарного файла &lt;имя схемы&gt;.ТОР, созданного с
помощью State Variables Editor, перед каждым вариантом расчета при изменении температуры
или другого параметра,
Leave — установка в качестве начальных условий значений, полученных при окончании
расчета предыдущего варианта. При расчете первого варианта они полагаются нулевыми. Если в предыдущем варианте рассчитывался только режим по постоянному току, то в качестве
начальных значений будут приняты параметры этого режима.
Рис. 4.13. Иллюстрация установки опции Operating Point
100
Operation Point — выполнение расчета режима по постоянному току перед началом каждого
расчета переходных процессов. Данные этого режима заменяют значения всех начальных условий,
если они были установлены (см. рис. 4.13 и сравните результаты анализа здесь и на рис. 4.10, где
опция Operation Point не была установлена);
Operation Point Only — расчет только режима по постоянному току (расчет переходных процессов не производится;
Auto Scale Ranges — присвоение признака автоматического масштабирования &laquo;Auto&raquo; по осям
X для каждого нового варианта расчетов. Если эта опция выключена, то принимаются во внимание
масштабы, указанные в графах X Range, Y Range.
Еще одна кнопка на панели инструментов
открывает режим анимации (Animate), который
позволяет замедлить вывод графиков, что удобно при построении наряду с зависимостями во времени зависимостей различных величин между собой, например B(H) — петли гистерезиса материала
магнитного сердечника.
4.6.2.
Использование клавиши Р
После выполнения команды Run начинается моделирование, и в процессе получения результатов на экран выводятся их графики. После нажатия клавиши Р в нижней части графического окна
справа от обозначения каждой переменной выводятся их текущие численные значения. Этот способ
удобен для контроля за моделированием медленно протекающих процессов, диапазон изменения
которых заранее не известен (так что текущие результаты могут быть не видны на экране). Однако
моделирование при этом значительно замедляется, поэтому после просмотра наиболее интересного
фрагмента данных следует выключить этот режим повторным нажатием клавиши Р.
4.6.3.
Меню режимов расчета переходных процессов TRANSIENT
После перехода в режим расчета переходных процессов меняется состав меню команд. Появляется новый режим Transient, имеющий следующие команды.
Run (F2)
— выполнение моделирования;
Limits (F9)
— задание пределов моделирования и построения графиков (см. разд. 4.6.1);
Stepping (F11)
Optimize (Ctrl+F11)
— многовариантный анализ (см. разд. 4.7);
— параметрическая оптимизация;
Analysis Window (F4)
— открытие графического окна результатов моделирования;
Watch (Ctrl+W) — одновременный просмотр схемы, результатов моделирования и текстовых
выражений в трех окнах;
Breakpoint (Alt+F9) — введение точек останова для остановки моделирования в заданной точке;
3D Windows (трехмерная графика):
Add 3D Window — добавление окна трехмерной графики,
Delete 3D Window — удаление окна трехмерной графики;
Performance Windows — окно расширенного анализа (параметрическая зависимость):
Add Performance Window — добавление окна параметрической зависимости,
Delete Performance Window — удаление окна параметрической зависимости;
101
Thumb Nail Plot — размещение графика текущего окна малого размера в верхнем правом углу
экрана;
Numeric Output (F5)
— вывод на экран численных результатов в табличной форме;
State Variables Editor (F12)
— вызов редактора значений переменных состояния (см. разд.
4.6.4);
DSP Parameters — открытие диалогового окна DSP (Digital Signal Processing — цифровая обработка сигналов), в котором задаются границы интервала времени для расчета спектральных плотностей (Upper Time Limit, Lower Time Limit) и количество отсчетов Number of Points (должно быть в
точности равно степени числа 2 в интервале от 64 до 8192). Заданные значения принимаются во
внимание, если в графе Status нажать кнопку On (см. рис. 4.14). Эти данные необходимы для того,
чтобы при расчете спектров периодических процессов выделить на участке установившегося режима
интервал времени, равный целому числу периодов первой гармоники. См. примеры спектрального
анализа в схемных файлах US-BJT_ОЭ_STEND, FFT1, FFT3, FFT4, FFT5, FFT7 из каталога Analysis\Harmonic Analysis;
Рис. 4.14. Окно задания интервала времени для спектрального анализа
Reduce Data Points — открытие диалогового окна сокращения объема информации, выводимой на графиках и сохраненной в файлах, рис. 4.15;
Рис. 4.15. Окно сокращения объема выводимой информации
Exit Analysis (F3) — завершение режима анализа и возвращение в окно схем.
4.6.4.
Задание начальных значений и редактирование переменных состояния
Состояние электрической схемы полностью описывается потенциалами ее аналоговых узлов,
токами через индуктивности и логическими состояниями цифровых узлов. Перед началом расчета
переходных процессов их значения должны быть определены. В программе МС7 для этого используются следующие возможности.
Перед первым расчетом переходных процессов какой-нибудь схемы, если не используется редактор State Variables Editor, все переменные состояния полагаются равными нулю, а состоянию
цифровых узлов присваивается состояние неопределенности &laquo;X&raquo;.
102
При последующих расчетах той же схемы, выполняемых нажатием клавиши F2 или кнопки Run,
начальные условия устанавливаются в соответствии со значениями параметра State Variables, установленного в окне Analysis Limits. Здесь имеются три варианта:
Zero — установка нулевых начальных условий для потенциалов всех аналоговых узлов и токов
через индуктивности. Цифровым узлам присваиваются неопределенные логические состояния &laquo;X&raquo;, а
выходным состояниям триггеров Q, QB присваиваются значения &quot;0&quot;, &quot;1&quot; или &quot;X&quot; в соответствии со
значением глобального параметра DIGINITSTATE, устанавливаемым в окне Global Setting;
Read — чтение начальных условий из бинарного дискового файла &lt;имя схемы&gt;.ТОР, созданного ранее с помощью State Variables Editor, перед каждым вариантом расчета при изменении температуры или другого параметра,
Leave — программа МС7 ничего не делает с начальными условиями, она оставляет их без изменений. Здесь возможны три варианта:
первый расчет — если не используется редактор State Variables Editor, все переменные состояния полагаются равными нулю,
последующие расчеты — установка в качестве начальных условий значений, полученных при
окончании расчета переходного процесса в предыдущем варианте;
редактирование — если переменные состояния редактировались с помощью State Variables
Editor, то их значения принимаются в качестве начальных условий.
Используя эти начальные условия, производится расчет режима по постоянному току при
включении источников питания (если включена опция Operation Point, см. п. 4.6.1), начальные условия переопределяются и затем рассчитываются переходные процессы при включении источников
переменных сигналов. Если же опция Operation Point выключена, то переходные процессы рассчитываются с первоначально заданными начальными условиями. При включении опции Operation Point
Only переменные состояния принимают значения, определенные в режиме по постоянному току и
отображаются в окне State Variables Editor.
Окно State Variables Editor. Редактор значений переменных имеет меню состояния, вызываемый нажатием пиктограммы
, показанное на рис. 4.16. В трех колонках располагаются значения
узловых потенциалов Node Voltages, токов через катушки индуктивностей Inductor Currents и логических состояний цифровых узлов Node Levels. Узловые потенциалы помечаются именами узлов, а в
их отсутствие номерами узлов, токи через катушки индуктивностей — их позиционными обозначениями, логические состояния цифровых узлов (если они имеются в схеме) — именами или номерами
узлов. В начальный момент времени эти переменные полагаются равными нулю или состоянию неопределенности &laquo;X&raquo;. После окончания моделирования в этом окне приведены конечные значения
переменных состояния. Обычно не требуется редактировать эти значения. Однако это можно сделать, подводя курсор мыши в нужную строку или нажимая [Tab] для перевода курсора в следующую
строку.
В нижней части экрана расположены кнопки команд:
Close — закрытие диалогового окна;
Clear — присвоение нулевых значений всем переменным состояния;
Read — чтение переменных состояния из файла &lt;имя схемы&gt;.ТОР (создается по команде
Write);
Write — немедленная запись значений переменных состояний в бинарный дисковый файл
&lt;имя схемы&gt;.ТОР;
103
Print —запись значений переменных состояний в текстовый файл &lt;имя схемы.SVV, содержание которого немедленно выводится в текстовое окно;
Рис. 4.16. Редактор переменных состояния State Variables Editor
.IC — запись существующих переменных состояния в виде директивы .IC и запись ее в текстовом окне;
Help — вызов раздела State Variables Editor системы помощи.
4.6.5.
Вывод численных данных
Результаты расчета схемы по постоянному току и таблицы отсчетов переменных, отмеченных
нажатием кнопок
в соответствующих строках окна Transient Analysis Limits, заносятся в текстовый
файл &lt;имя схемы&gt;.TNO. Просмотр его содержания выполняется нажатием на пиктограмму
или
по команде Numeric Output (F5) в меню Transient.
В начале файла результатов моделирования, как и для программы PSpice [4], помещаются
значения режима по постоянному току (узловые потенциалы, токи через индуктивности и логические
состояния цифровых узлов, состояния полупроводниковых р-n-переходов). Далее приведены параметры линейных моделей диодов и транзисторов, рассчитанных в режиме по постоянному току. В
заключение — таблица дискретных отсчетов выходных переменных, графики которых изображены в
окне Transient Analysis. Количество строк в этой таблице равно значению параметра Number of Points
в меню Transient Analysis Limits.
В заключение отметим, что примеры, иллюстрирующие анализ переходных процессов, в том
числе и продемонстрированные в разделе 4.6, находятся в подкаталоге Analysis\Transient.
104
4.7.
Многовариантный анализ
В меню трех видов анализа Transient, AC и DC имеется диалоговое окно Stepping (вызывается
также нажатием пиктограммы
), с помощью которого производится вариация от одного до 20 параметров. В нем (см. рис. 4.17) содержатся следующие строки.
Step What — на верхней строке указывается имя компонента и имя его варьируемого параметра. Содержание этой строки зависит от выбранного ниже типа параметра: Component, Model или
Symbol.
Parameter Type — тип вариации параметров. Если выбран тип Component, то нажатие на кнопку
в первой строке открывает список имен компонентов, содержащихся в схеме, например, С1,
С2, СЗ, D1, L1, R1, V2, V3. Если в этом списке выбрать простой компонент, имеющий единственный
параметр, например конденсатор, то справа на первой строке появится стандартное имя Value (обозначающее значение параметра). Если же выбранный компонент имеет модель или макромодель
(описываемую по директивам .MODEL или .SUBCKT), то справа на первой строке нужно выбрать имя
ее параметра.
Рис. 4.17. Варьирование параметров компонентов и их моделей
Причем если компонент входит в состав макромодели, то используется составное имя: сначала
указывается имя макромодели, затем после десятичной точки имя входящего в нее компонента,
например X1.D13, X2.DIN555. Причем если в окне Global Settings включены опции PRIVATEANALOG
и PRIVATEDIGITAL, то варьироваться будут только параметры индивидуально выбранного компонента; параметры других компонентов, имеющих те же модели, варьироваться не будут. При выключении этих опций варьироваться будут параметры всех компонентов, имеющих ту же модель. При
105
вариации параметров моделей все подобные модели, содержащие параметр АКО, варьироваться не
будут и вариация температур T_MEASURED, T_ABS, T_REL_GLOBAL, T_REL_LOCAL недоступна;
Если выбран тип Model, то нажатие на кнопку в первой строке открывает список имен моделей, и справа на первой строке нужно выбрать имя варьируемого параметра выбранной модели.
Например, в первой строке слева можно указать тип модели NPN $GENERIC_N (n-p-n транзистор), а
справа — имя одного из его параметров, например CJC (емкость коллекторного перехода). По этому
способу варьируются параметры всех компонентов, имеющих выбранную модель. Так в данном примере варьируются параметры CJC всех транзисторов, имеющих модель $GENERIC_N.
Если выбран тип Symbolic, то становится доступен список параметров, определенных по директиве .define.
From — начальное значение параметра. При выборе логарифмической шкалы оно должно
быть больше нуля.
То — конечное значение параметра. При выборе логарифмической шкалы оно должно быть
больше нуля.
Step Value — величина шага параметра. При линейной шкале она прибавляется к начальному
значению, а при логарифмической шкале умножается на текущее значение параметра.
Step It — включение режима вариации параметров (Yes) или его выключение (No).
Method — характер изменения варьируемого параметра:
Linear — линейная шкала;
Log — логарифмическая шкала;
List — список значений.
Change — метод изменения нескольких параметров:
Step all variables simultaneously — одновременное изменение всех варьируемых параметров, в этом случае количества вариаций всех параметров должны быть равны между собой
Step variables in nested loops — поочередное (вложенное) изменение варьируемых параметров, в этом случае во внешнем цикле изменяется переменная на 1-ой закладке.
Перед выполнением вариации параметров рекомендуется убедиться, что моделирование выполняется без ошибок при номинальном значении параметров. Одновременная вариация параметров в режиме Stepping и статистический анализ по методу Монте-Карло невозможен.
Пример многовариантного расчета частотных характеристик усилительного каскада при вариации параметра модели транзистора BF приведен на рис. 4.17.
Ограничения на вариации параметров: нельзя варьировать параметры компонентов
Transformer, User source, Laplace source, Function source, зависимых источников SPICE (типа E, F, G и
Н).
В заключение отметим, что графики, полученные путем многовариантного анализа можно пометить, чтобы знать какому значению варьируемого параметра соответствует каждая кривая. Осуществляется это с помощью команды SCOPE/Label Branches.
106
4.8.
Параметрическая оптимизация
Параметрическая оптимизация выполняется в программе МС7 методом Пауэлла (Powell) в любом из видов анализа: анализ переходных процессов, малосигнальный АС-анализ и расчет характеристик на постоянном токе DC. Проиллюстрируем последовательность действий при оптимизации на
примере схемы OPT4.CIR из каталога ANALYSIS\OPTIMIZE, изображенной на рис. 4.18. Задача приведенного примера состоит в том, чтобы изменяя параметры схемы R1, C1, L1 в процессе проведения оптимизации добиться максимально близкого расположения амплитудно-частотной характеристики к 6 заданным точкам (частота, амплитуда).
Рис. 4.18. Пример оптимизации схемы Opt4.cir
Сначала в меню Analysis выберем режим АС и нажмем на клавишу Run (F2) и затем на клавишу
F8, чтобы вывести маркеры для считывания с графиков численных значений (рис. 4.18). Заметим,
что на частотах 2 и 10 МГц переменная db(V(Out)) равна 1,398 и -9,583 дБ соответственно.
После этого нажатием на кнопку
(Ctrl+F11) открывают диалоговое окно, показанное на рис.
4.18 внизу справа.
В этом диалоговом окне вводится следующая информация.
Find:
Parameter — выбор оптимизируемых параметров;
Low — минимальное значение оптимизируемого параметра (вводится);
High — максимальное значение оптимизируемого параметра (вводится);
107
Step — шаг изменения оптимизируемого параметра (вводится при выборе метода Stepping Powell);
Current — текущее значение оптимизируемого параметра (индицируется);
Optimized — поиск наиболее подходящего значения оптимизируемого параметра (индицируется);
That — выбор критерия(ев) оптимизации.
Method — выбор метода оптимизации:
Standard Powell — стандартный метод оптимизации Пауэлла,
Stepping Powell — согласно этому методу параметры изменяются от значения Low до
значения High с шагом Step. На каждом шаге изменения параметров применяется
стандартный метод Пауэлла.
Total Error — корень квадратный из суммарной ошибки (разности между целевой функцией и
ее фактической величиной); выводится когда выбрано поле Equates в группе THAT.
Constraints — ограничения типа неравенств и равенств, записываемые на четырех строках,
например, PD(R1)&lt;=100m, V(Out)&gt;=1.2, VCE(Q1)*IC(Q1)&lt;=200m
Optimize — начало оптимизации.
Stop — остановка оптимизации.
Apply — изменение на схеме значения параметров в соответствии с результатами оптимизации.
Format — выбор формы представления чисел.
Close — завершение режима оптимизации.
В приведенном примере требуется изменением L1, C1, R1 добиться такого вида АЧХ, чтобы
она максимально близко проходила возле 6 заданных точек (частота, амплитуда в дБ): (2e6, 2.188),
(4e6, 10.449), (6e6,-1.696), (8e6,-9.103), (10e6, -13.939), (20e6,-27.134). Это означает, что корень
квадратный из суммы квадратов отклонений полученной АЧХ от заданных значений в заданных точках принимает минимальное значение. В соответствии с заданной целевой функцией и заполняются
поля группы THAT в окне OPTIMIZE (см. рис. 4.18, 4.19). Например Y_Level(DB(V(OUT)),1,1,2e+006)
обозначает значение кривой оптимизируемой характеристики (АЧХ в дБ) при значении независимой
переменной (частоты) равной 2E6 Hz. Выбор Equates означает, что оптимизация идет для наилучшего удовлетворения условию равества коэффициента передачи в дБ заданному значению 2.188.
Отметим, что в группе THAT вместо Equates может быть выбрано Minimize или Maximize, тогда
оптимизация выполняется с целью достижения минимального (максимального) значения кривой Y в
выбранной точке X. См. примеры OPT1…OPT3 из каталога Analysis\Optimize.
Заполнение полей группы FIND в рассматриваемом примере осуществляется в соответствии с
оптимизируемыми параметрами R1, C1, L1 (поля Parameter) и заданными диапазонами их изменения
(поля Low и High).
108
Рис. 4.19. Вид окна Optimize после проведения оптимизации
Рис. 4.20. Вид АЧХ схемы после оптимизации
После заполнения диалогового окна нажатием на панель Optimize выполняют оптимизацию
(см. рис. 4.19) и затем при необходимости нажатием на панель Apply переносят найденные оптимальные значения параметров на схему. Выполняемый после таких действий анализ выведет характеристики схемы при полученных оптимальных значениях параметров (см. рис. 4.20). По его результатам пользователь может проверить соответствие выполненной оптимизации техническому заданию.
4.9.
Статистический анализ по методу Монте-Карло
При выборе режимов моделирования Transient, AC или DC становится доступен подрежим
Monte Carlo для расчета характеристик цепей при случайном разбросе параметров:
Options — установка параметров метода Монте-Карло (см. рис. 4.21);
Add Histogram — добавление окна гистограмм (доступно после проведения моделирования);
109
Delete Histogram — удаление окна гистограмм (доступно после проведения моделирования);
Statistics — статистическая обработка результатов (доступно после построения гистограммы).
В диалоговом окне Monte Carlo Options (рис. 4.21, а), открываемом по команде Monte
Carlo/Options, указывается количество статистических испытаний Number of Runs (не более 30000) и
характер закона распределения случайных параметров, заданных значением LOT параметра модели: Uniform равномерное распределение, Gauss — гауссово, Worst Case — наихудший случай.
Напомним, что в окне Global Settings задается отношение разброса случайных параметров к среднеквадратическому отклонению SD.
Гауссово распределение (Gauss) случайной величины x описывается уравнением:
2
e -0.5s
,
f(x) 
  2 
Где s 
x

,  — номинальное значение параметра,  — величина отклонения, указываемая
после ключевого слова LOT (здесь абсолютное значение), x — значение случайной величины, f(x) —
плотность вероятности принятия случайной величиной значения x.
Равномерное распределение (Uniform) — означает одинаковую вероятность принятия случайной величиной x любого значения внутри диапазона, определяемого параметром модели LOT.
а)
б)
Рис. 4.21. Диалоговое окно Monte Carlo Options (а) и окно задания функций (б)
Наихудший случай (Worst case) соответствует равной вероятности (0.5) принятия случайной
величиной минимально возможного и максимально возможного значения (см. пример CARLO2_LOT
&amp; DEV из каталога ANALYSIS\Monte Carlo).
На строке Report When указывается условие, при выполнении которого выводится предупреждающее сообщение в тестовый файл результатов моделирования, имеющий расширение имени
*.OUT. Имя указываемой на этой строке функции может быть выбрано в списке доступных функций
(рис. 4.21, б), открываемом нажатием на клавишу Function. Перед выполнением расчетов по методу
Монте-Карло следует поставить переключатель Status в положение On. Выделение параметров,
имеющих случайный разброс, выполняется с помощью ключевых слов LOT и/или DEV, как показано
на изображенной на рис. 4.23 схеме.
Для расчета разброса значений параметров, имеющих разброс LOT и DEV, используются различные генераторы случайных чисел. В свою очередь параметры, имеющие признак DEV, получают
110
независимые случайные значения, а имеющие признак LOT — коррелированные случайные значения в пределах параметров одного элемента. Ключевые слова LOT и DEV помещаются после номинального значения параметра и имеют формат:
[LOT=&lt;paзброс&gt;[%]][DEV=&lt;paзбpoc&gt;[%]]
Указывается либо абсолютное, либо относительное значение разброса в процентах (в последнем случае надо ввести знак %).
Примеры:
.model VIN SIN (F=10kHz A=10mV LOT=10% DC=0 PH=0 RS=1)
.model KT316B NPN (IS=2.8f LOT=5% BF=75 LOT=5% DEV=20%)
.MODEL IND1 IND (L=1.0 LOT=10% )
.MODEL CAP2 CAP (C=1.0 LOT=10% )
.MODEL RMOD RES (R=1 LOT=10%)
Во втором примере параметр BF имеет некоррелированный разброс DEV=20% и, кроме того,
разброс LOT = 5%, коррелированный с изменением параметра IS.
а)
б)
в)
Рис. 4.22. Использование LOT и DEV
В примере рис. 4.22, а RE транзистора Q1 имеет случайный разброс независимый от случайного разброса RE транзистора Q2 (они создаются разными генераторами случайных чисел). В примере
рис. 4.22, б сопротивления RE обоих транзисторов Q1 и Q2 имеют коррелированный разброс, однако
их значения не будут одинаковыми из-за различия номиналов. В примере 4.22, в случайные разбросы RE (в пределах заданного диапазона LOT) обоих транзисторов коррелированы, однако в целом
разбросы не связаны из-за использования различных генераторов для DEV. DEV задает относительное изменение параметра в процентах в сторону увеличения или уменьшения после вычисления
случайной величины по значению LOT в соответствии с заданным законом распределения (См. пример CARLO2_LOT &amp; DEV).
111
Рис. 4.23. Семейство реализаций переходного процесса при случайных назависимых разбросах индуктивности и емкости
Рис. 4.24. Окно построения гистограмм
112
Допустим, что в режимах Transient, AC или DC анализируется некоторая функция цепи y=f(x),
где х — независимая переменная (время, частота, входное постоянное напряжение или ток), у — зависимая переменная (узловой потенциал, входное сопротивление и т. п.). Для каждой реализации
процесса у(х) рассчитывается глобальная характеристика F (the collaction function), например максимальное значение реализации F=max{y(x)} (вводится HIGH_Y). Название характеристики F вводится,
на строке Report When (см. рис. 4.21, а) или выбирается из окна Functions (рис. 4.21, б), открываемого
нажатием на клавишу GET (см. рис. 4.21, а).
После установки параметров начинают моделирование выбором пункта Run в меню моделирования выбранного типа или нажатием F2. Реализации характеристик цепи у(х) выводятся на экран
дисплея в виде семейства графиков, как в качестве примера показано на рис. 4.23 при расчете частотных характеристик резонансного контура.
Статистическая обработка результатов моделирования производится по команде Monte
Carlo/Histograms/Add Histograms. Ее результаты представляются в виде гистограммы, примерный
вид которой показан на рис. 4.24. Двойной щелчок курсором мыши, расположенном в окне гистограмм, открывается диалоговое окно задания параметров Properties (закладка Plot), оно же открывается в начале выполнения команды Add Histograms. В нем в строке Function (вызываемой нажатием
клавиши GET) указывается имя анализируемой функции F, а в строке Expression — имя характеристики цепи у (см. рис. 4.24).
На графике гистограммы по горизонтальной оси откладываются значения характеристики F, по
вертикали — вероятности в процентах.
Значения характеристики F во всех реализациях выведены в окне в правой части экрана. Ниже
гистограмм располагается окно, в котором можно задать количество интервалов разбиения области
определения анализируемой характеристики F (Intervals) и значения ее границ (Low, High).
В нижней части экрана слева помещается следующая статистическая информация: Low — минимальное значение характеристики, Mean — ее среднее значение, High — максимальное значение,
Sigma — среднеквадратическое отклонение случайной величины F.
Результаты статистической обработки заносятся также в текстовый файл после выбора подкоманды Monte Carlo/Statistics. Текстовая информация размещается в файлах, имеющих то же имя,
что и имя схемы, и расширения имени .АМС, .DMC, .ТМС в зависимости от вида анализа. Примеры
статистического анализа см. в схемных файлах CARLO, CARL02, CARLO4 подкаталога Analysis\Monte Carlo.
4.10.
Просмотр и обработка результатов моделирования
По завершении моделирования в графическом окне выводятся графики характеристик схемы.
Дальнейшая обработка графиков может выполняться в нескольких режимах.
4.10.1.
Окно отображения результатов моделирования
Рассмотрим средства отображения, просмотра, обработки сигналов и нанесения надписей на
их графики непосредственно после завершения моделирования.
Во-первых, двойной щелчок курсором мыши в поле графиков открывает диалоговое окно
Properties (см. рис. 4.11). Во-вторых, нажатие на пиктограммы в меню инструментов включает один из
следующих режимов:
Scale (F7) — вывод на весь экран части графика, заключенного в рамку.
113
(F8) — режим электронного курсора для считывания координат одной или двух точек на
графике, имя переменной которой подчеркнуто. Расположение точек на графике изменяется их буксировкой правой и левой кнопками мыши.
Point Tag — нанесение на график значений координат X, выбранной точки. Формат представления чисел задается параметром Analysis Plot Tags на закладке Format окна Preferences.
Horizontal Tag — нанесение расстояния по горизонтали между двумя выбранными точками
графика. Формат представления чисел задается параметром Analysis Plot Tags на закладке Format
окна Preferences.
Vertical Tag — нанесение расстояния по вертикали между двумя выбранными точками графика. Формат представления чисел задается параметром Analysis Plot Tags на закладке Format окна
Preferences.
Text Mode — ввод текста (в абсолютных и относительных координатах).
Properties (F10) — просмотр и редактирование свойств объектов.
4.10.2.
Панорамирование окна результатов моделирования
Панорамированием называется перемещение окна без изменения масштаба изображения. Оно
выполняется с помощью клавиатуры или мыши.
Клавиатура. Одновременное нажатие клавиш Сtrl+&lt;клавиша стрелок&gt; перемещает графики
активного окна в направлении стрелки. Например, нажатие Ctrl+ перемещает все графики вправо.
Активным является окно графиков, в котором щелчком курсора выбрано имя одного из графиков (оно
помечается подчеркиванием).
Мышь. Щелчок и буксировка правой кнопки мыши перемещает график движением мыши (курсор при этом принимает форму руки). Однако панорамирование графиков в режиме электронного
курсора Cursor Mode с помощью мыши невозможно.
4.10.3.
Масштабирование окна результатов моделирования
Масштабирование графиков выполняется с помощью команд меню Scope, дублируемых следующими пиктограммами или функциональными клавишами:
Auto Scale, F6 — автоматическое масштабирование графиков выбранного окна так, чтобы они
заняли все окно.
Restore Limit Scales, Ctrl+Home — перечерчивание всех графиков в масштабе, указанном в
окне Analysis Limits.
4.10.4.
Режим электронной лупы Scope
Характер оформления графиков, представления на них информации и команды управления
электронным курсором определяются в меню режима Scope, команды которого приведены в табл.
4.1.
При включении режима Cursor mode в начале координат появляются изображения двух вертикальных пунктирных линий, помещаемых в определенные точки графиков нажатием левой и правой
кнопок мыши для проведения различных измерений. Курсоры привязываются к графикам, имена которых также выбираются кнопками мыши — выбранные имена подчеркиваются. Перемещение курсоров по выбранным графикам осуществляется с помощью кнопок мыши или клавиатуры (что обеспечивает более точную настройку): первый курсор перемещается влево или вправо нажатием клавиш  или , второй — одновременным нажатием клавиш Shift+, Shift+. Снизу от каждого ок114
на графиков располагается таблица, число строк которой равно числу построенных графиков плюс
одна строка, в которой размещаются значения независимой переменной, откладываемой по оси X
(время, частота и т. д.). В колонках таблицы располагается информация:
Имя переменной, выведенной на график,
Left — значение переменной, помеченной левым курсором,
Right — значение переменной, помеченной правым курсором,
Delta — разность значений координат курсора,
Slope — тангенс угла наклона прямой (DELTAy/DELTAx), соединяющей два курсора.
Перемещение левого курсора между несколькими графиками результатов многовариантного
анализа выполняется нажатием клавиш , , правого курсора — Shift ,( ).
Таблица 4.1. Команды режима Scope
Команда
Назначение
Удаление всех значений координат, текста и всех графических объектов,
Delete
All
нанесенных ранее (для удаления индивидуального объекта он выбирается
Objects
щелчком курсора и затем удаляется нажатием клавиши Delete или Ctrl+X)
Auto Scale (F6) Автоматическое масштабирование графиков выбранного окна
Restore Limit
Перечерчивание графиков всех окон в масштабе, указанном на закладке Scale
Scales
диалогового окна Properties
(Ctrl+Home)
View
Характер отображения информации:
Отображение на графиках расчетных точек
Data Points
Нанесение на графики специальных значков для облегчеTokens
ния их распознавания
Нанесение разметки координатных осей вместо изображеRuler
ния сетки
Замена изображения сетки знаками &laquo;+&raquo;
Plus Mark
Horizontal
Axis
Нанесение сетки по горизонтальной оси координат
Grids
Vertical Axis Grids Нанесение сетки по вертикальной оси координат
Нанесение более мелкой логарифмической сетки на всех
осях координат, размеченных в логарифмическом масMinor Log Grids
штабе
Нанесение нулевой линии на выбранный график
Baseline
Проведение горизонтальной линии через точку пересечения курсора с графиком при включенном режиме Cursor
Horizontal Cursor
Mode
Управление изображением координат на графиках (команды доступны в ре-
Trackers
Cursor
Functions
жиме Cursor Mode, активизируемым нажатием пиктограммы
):
Cursor
Включение/выключение координат вертикальных курсоров
на точке пересечения с графиком.
(Ctrl+Shifl+C)
Включение/выключение индикации координат точек пересечения вертикальных курсоров с графиком на осях коорIntercept (Ctrl+l)
динат
Включение/выключение координат курсора мыши)
Mouse (Ctrl+M)
Перемещение курсора к характерным точкам выбранного графика (команды доступны в режиме Cursor Mode, активизируемым нажатием пиктограммы
115
Перемещение курсора к следующей точке данных при нажатии на пиктограмму и клавиши 
Перемещение курсора к следующей интерполированной
точке нажатии на пиктограмму и клавиши 
Перемещение курсора к следующему пику, расположенному
слева или справа от текущего положения курсора нажатием
Peak
клавиш  соответственно
Перемещение курсора к следующей впадине, расположенной слева или справа от текущего положения курсора нажаValley
тием клавиш  соответственно
Перемещение курсора нажатием пиктограммы и клавиш
High
 к наиболее высокой точке (глобальному максимуму)
Перемещение курсора нажатием пиктограммы и клавиш
Low
 к наиболее низкой точке (глобальному минимуму)
Перемещение курсора к следующей точке перегиба (точке, в
Inflection
которой 2-ая производная графика изменяет знак).
Активизация графика, расположенного сверху
Top (Alt+Home)
Bottom (Alt+End) Активизация графика, расположенного снизу
Перемещение курсора нажатием пиктограммы или клавиш
 к наиболее высокой точке семейства графиков
Global High
(наиболее эффективно при многовариантном анализе или
статистическом анализе по методу Монте-Карло)
Перемещение курсора нажатием клавиш  к наиболее
низкой точке семейства графиков (наиболее эффективно
Global Low
при многовариантном анализе или статистическом анализе
по методу Монте-Карло)
Остальные команды меню SCOPE
Простановка параметров графиков при многовариантном анализе
Next Simulation
Data Point
Next Interpolation
Data Point
Label Branches
Label Time
(Frequency)
Point
Animate
Options...
Normalize at
Cursor (Ctrl+N)
Go To X...
(Shift+Ctrl+X)
GO TO Y...
(Shift+Ctrl+Y)
Go to
Performance...
Go to Branch
Tag Left Cursor
(Ctrl+L)
Tag Right Cursor (Ctrl+R)
Tag Horizontal
(Shift+Ctrl+H)
Tag Vertical
(Shift+Ctrl+V)
116
Пометка точек с заданным временем (частотой) в режиме TRANSIENT
(AC)
Открытие диалогового окна Animate Options для задания параметров
анимации (замедления расчета и вывода графиков)
Нормализация выбранного графика (деление всех его ординат Y на значение ординаты Y точки графика, отмеченной курсором)
Перемещение левого или правого курсора в точку с заданной координатой по оси X
Перемещение левого или правого курсора в ближайшую точку с заданной координатой по оси Y
Перемещение левого или правого курсора в точку с заданными свойствами, выбранными с помощью функции Performance (см. табл. 4.2).
Переход к указанной реализации многовариантного анализа.
Нанесение на график значений координат левого курсора
Нанесение на график значений координат правого курсора
Нанесение на график размерных линий между точками графика, отмеченными левым и правым курсором и простановка расстояния между ними по
горизонтали
Нанесение на график размерных линий между точками графика, отмеченными левым и правым курсором и простановка расстояния между ними по
вертикали.
Align Cursors
Keep Cursors
on Same Branch
Same Y Scales
Thumb Nail Plot
Синхронное перемещение курсора и считывание координат всех графиков, расположенных во всех графических окнах
Поддержание перемещения левого и правого курсоров по одному и тому же графику результатов многовариантного анализа
Перестроение всех графиков так, чтобы они имели общую ось Y (используется в том случае, если графики строятся в одном окне, но в разных
масштабах)
Изображение текущих графиков в отдельном окне в мелком масштабе
4.10.5.
Функции раздела PERFORMANCE
MICROCAP имеет группу специальных функций PERFORMANCE, которые используются для
указания и измерения некоторых характеристик построенных графиков. Эти функции могут вызываться с помощью панели инструментов графического окна после построения графиков соответствующего анализа нажатием кнопки
. Из окна оптимизации OPTIMIZE и анализа Monte Carlo —
PROPERTIES группа функций PERFORMANCE вызывается нажатием клавиши GET. Ниже в таблице
приведен список этих функций с их аргументами и результат их выполнения. При этом приняты следующие обозначения.
Y_Expr — выражение для переменной откладываемой по оси ординат, для которого необходимо выполнить функцию группы PERFORMANCE.
Boolean_Expr — логическое выражение при выполнении которого будет вычисляться функция
группы PERFORMANCE. Обычно вычисления производят после установления быстрых переходных
процессов, что заставляет исключать начальный этап из рассмотрения. Поэтому данное выражение
обычно имеет вид следующего типа &laquo;T&gt;100 ns&raquo;.
N — целое число, указывающее какое по порядку измерение делается. Например необходимо
измерить длительность фронта нескольких идущих подряд импульсов. N=1 соответствует первому
импульсу слева. Величина N в режиме Cursor Mode увеличивается на 1 при каждом нажатии на кнопки GO TO, Left, Right.
Low — нижнее граничное значение переменной, используемое соответствующими функциями.
High — верхнее граничное значение переменной, используемое соответствующими функциями.
Level — уровень значения переменной, используемый при вычислении различных параметров
сигналов.
Функции
раздела
PERFORMANCE
Rise_Time(Y_expr,Boolean_expr,N,low,high) — длительность возрастания вдоль оси X переменной Y от указанного нижнего (Low) до указанного верхнего (High) уровней при выполнении заданного логического выражения Boolean_expr.
Fall_Time(Y_expr,Boolean_expr,N,low,high) — длительность убывания вдоль оси X переменной Y от указанного верхнего (High) до указанного нижнего (Low) уровней при выполнении заданного
логического выражения Boolean_expr.
В режиме Cursor Mode курсоры графиков помещаются последовательно в две выбранные точки
и возвращается разность координат X для этих точек. Функции Rise_Time и Fall_Time можно использовать для измерения времени нарастания и спада импульсных сигналов.
Peak_X(Y_expr,Boolean_expr,N) — Эта функция возвращает координату X очередного локального максимума (PEAK) выбранной переменной Y_expr. Локальный максимум — это точка, значение
117
функции Y в которой больше чем в соседних точках с обеих сторон. В режиме Cursor Mode при этом
дополнительно помещается левый или правый курсор в очередную точку локального максимума.
Peak_Y(Y_expr,Boolean_expr,N) — функция аналогична функции Peak_X, но возвращает значение координаты Y точки локального максимума. Функция может использоваться для измерения
значений выбросов при анализе переходных процессов и пульсаций коэффициента передачи фильтров при проведении AC анализа.
Valley_X(Y_expr,Boolean_expr,N) — функция возвращает координату X очередного локального
минимума (VALLEY) выбранной переменной Y_expr. Локальный минимум — это точка, значение
функции Y в которой меньше чем в соседних точках с обеих сторон. В режиме Cursor Mode при этом
дополнительно помещается левый или правый курсор в очередную точку локального максимума.
Valley_Y(Y_expr,Boolean_expr,N): Эта функция аналогична функции Valley_X, но возвращает
значение координаты Y точки локального минимума. Функция может использоваться для измерения
значений отрицательных выбросов при анализе переходных процессов и пульсаций коэффициента
передачи фильтров при проведении AC анализа.
Peak_Valley(Y_expr,Boolean_expr,N) — возвращает разность координат Y 2-х соседних точек
локального максимума и минимума выбранной переменной Y_expr. В режиме Cursor Mode дополнительно помещаются левый и правый курсоры в очередные найденные 2 точки максимума и минимума. Может использоваться для измерения размаха разнообразных пульсаций, выбросов и амплитуд
сигналов.
Period(Y_expr,Boolean_expr,N) — возвращает период колебаний переменной Y_expr путем
измерения расстояния по оси X между последовательными одинаковыми значениями величины
Y_expr. Первоначально находится среднее значения величины Y_expr на интервале моделирования,
где соблюдается истинность логического выражения Boolean_expr. Затем ищутся 2 очередных последовательных участка возрастания величины от среднего значения. Разница в расстоянии по оси
X между этими точками и принимается за значение периода колебаний. Как правило, вводимое логическое выражение бывает типа &quot;T&gt;500ns&quot; и используется для исключения ошибок определения периода на неколебательном участке процесса. Удобна для определения периода колебаний преобразователей напряжение-частота, где существует необходимость измерения периода колебаний с высокой точностью. Функция работает наиболее эффективно для колеблющейся переменной, проходящей при этом через свое среднее значение в течение периода. Она не будет работать с достаточной точностью с колебаниями, которые содержат гармоники значительной величины. В режиме Cursor Mode дополнительно помещаются левый и правый курсоры в 2 указанные точки графика (которые определяются как показано выше) и возвращается расстояние между ними по оси X.
Frequency(Y_expr,Boolean_expr,N) — дополнение функции Period. Работает в точности также
как и функция PERIOD, но возвращается значение 1/Period.
Width(Y_expr,Boolean_expr,N,level): Эта функция измеряет расстояние по оси X между 2-мя
точками графика Y_expr с заданными значениями ординаты level. В режиме Cursor Mode дополнительно помещаются курсоры графического окна (левый и правый) в очередные выбранные точки
графика и возвращается как результат расстояние по оси X между этими точками.
High_X(Y_expr,Boolean_expr) — определяет координату X точки глобального максимума
функции Y_expr. В режиме Cursor Mode дополнительно помещается выбранный левый (или правый)
курсор в найденную точку и возвращается ее координата по оси X.
118
High_Y(Y_expr,Boolean_expr) — определяет координату Y точки глобального максимума
функции Y_expr. В режиме Cursor Mode дополнительно помещается выбранный левый (или правый)
курсор в найденную точку и возвращается ее координата по оси Y.
Low_X(Y_expr,Boolean_expr) — определяет координату X точки глобального минимума функции Y_expr. В режиме Cursor Mode дополнительно помещается выбранный левый (или правый) курсор в найденную точку и возвращается ее координата по оси X.
Low_Y(Y_expr,Boolean_expr) — определяет координату Y точки глобального минимума функции Y_expr. В режиме Cursor Mode дополнительно помещается выбранный левый (или правый) курсор в найденную точку и возвращается ее координата по оси Y.
X_Level(Y_expr,Boolean_expr,N,Y_level) — определяет координату X очередной точки графика, в которой переменная Y_expr принимает значение Y_Level. В режиме Cursor Mode дополнительно
помещается выбранный левый (или правый) курсор в найденную точку и возвращается ее координата по оси X.
Y_Level(Y_expr,Boolean_expr,N,X_level) — определяет значение переменной Y_expr в точке с
абсциссой X_Level. В режиме Cursor Mode дополнительно помещается выбранный левый (или правый) курсор в найденную точку и возвращается ее координата по оси Y.
X_Delta(Y_expr,Boolean_expr,N,Y_low,Y_high) — определяет разность абсцисс 2-х очередных
точек графика, в которых переменная Y_expr принимает значения Y_High и Y_Low. В режиме Cursor
Mode дополнительно помещаются курсоры в найденные точки и возвращается разность их абсцисс.
Y_Delta(Y_expr,Boolean_expr,N,X_low,X_high) — определяет разность ординат 2-х точек графика, в которых абсцисса принимает значения X_High и X_Low.
X_Range(Y_expr,Boolean_expr,N,Y_low,Y_high) — определяет диапазон изменения абсцисс 2х очередных точек графика в которых переменная Y_expr принимает заданные значения
Y_low,Y_high. Сначала она находит очередные точки графика в которых Y_expr принимает заданные
Y_Low и Y_High значения. Затем исследуются все точки внутри диапазона Y_Low…Y_High и ищутся с
наибольшим и наименьшим значением абсциссы X (В эти точки и помещаются курсоры в режиме
Cursor Mode). Разность между найденными абсциссами возвращается как значение функции
X_range.
Y_Range(Y_expr,Boolean_expr,N,X_low,X_high) — определяет диапазон изменения переменной Y_expr 2-х точек графика в которых абсцисса принимает заданные значения X_low, X_high. Сначала она находит точки графика которые имеют абсциссы X_Low и X_High. Затем исследуются все
точки внутри диапазона X_Low…X_High и ищутся с наибольшим и наименьшим значением переменной Y_expr (В эти точки и помещаются курсоры в режиме Cursor Mode). Разность между найденными
ординатами и возвращается как значение функции Y_range. Функция может использоваться для измерения пульсаций АЧХ фильтра.
Slope(Y_expr,Boolean_expr,N,X_value) — Вычисляет производную функции Y_expr в окрестности точки с абсциссой X_value. Курсоры помещаются в точку с абсциссой X_value и ближайшую к ней
точку (отстоящую на шаг расчета). Затем разность ординат указанных точек делится на разность
абсцисс и полученная величина возвращается как значение функции Slope.
Phase Margin(Y_expr) — вычисляет запас по фазе графика частотной характеристики Y_expr.
При этом заранее должны быть построены графики dB(Y_expr) и PHASE(Y_expr). Данная функция
доступна только из AC анализа.
4.10.6.
Вывод графиков характеристик в режиме Probe
119
Характерная особенность программы MicroCap, отличающая ее от других программ типа PSpice
— построение графиков не после окончания всех расчетов, а в процессе моделирования. Такая особенность пакета позволяет прервать моделирование при обнаружении явно ошибочных результатов.
Однако такой метод имеет и недостаток, связанный с необходимостью до начала моделирования
перечислять имена переменных, выводимых на график, и их масштабы. Для построения графиков
других переменных необходимо повторить моделирование. Поэтому в программе МС7 предусмотрен
специальный режим Probe для создания файла данных, в который заносятся потенциалы всех узлов
схемы, что позволяет после завершения моделирования построить график любой переменной. Просмотр графиков в режиме Probe производится в следующем порядке.
В меню команды Analysis выбирается один из видов анализа и заполняются все графы окна
Analysis Limits, обращая особое внимание на задание пределов изменения независимой переменной (времени, частоты и т. п.). Далее в меню команды Analysis выбирается режим Probe с тем же видом анализа: Probe Transient, Probe AC, Probe DC. В этом режиме экран делится на две части.
Справа размещается окно с изображением схемы, а слева окно построения графиков характеристик.
При этом содержание строки команд изменяется. В меню команды Probe выбирается строка New run
для выполнения моделирования, все результаты которого (узловые потенциалы аналоговых узлов и
токи ветвей с индуктивностями, логические состояния цифровых узлов) заносятся в дисковый файл,
что позволяет вывести на экран график любой характеристики. При этом если в режиме статистического анализа Monte Carlo указано количество реализаций n&gt;1, то все равно будет доступна только
первая реализация при номинальных значениях параметров. Далее курсором на схеме указывается
узел схемы, вывод компонента или сам компонент (указывать промежуточные точки цепей нельзя) —
в левой части экрана немедленно вычерчивается его характеристика. Тип переменных, откладываемых по осям графиков, предварительно выбирается в пунктах меню Vertical, Horizontal. Если при
этом в окне не видна нужная часть схемы, то окно схемы можно открыть полностью. После выбора
нужного узла окно схемы минимизируется и вновь появляется окно графиков с нанесенной новой характеристикой. Перед работой в режиме Probe рекомендуется пометить номера узлов схемы, выбрав
щелчком на пиктограмме
режим Node numbers, чтобы легко идентифицировать графики результатов.
Описание всех команд режима Probe приведено в табл. 4.2.
Таблица 4.2. Описание команд режима Probe
Команда
Назначение
Меню Probe
Выполнение нового моделирования.
New Run (F2)
Удаление графиков переменных, имена которых указываются дополниDelete Plots...
тельно
Delete All (Ctrl+F9) Удаление графиков всех переменных
Separate Analog Размещение графиков аналоговых и цифровых переменных в разных
and Digital
окнах
One Trace
Построение только одного графика
Many Traces
Построение нескольких графиков
Сохранение всех переменных. Используется при построении графиков
заряда, магнитного потока, емкости, индуктивности, магнитной индукции
Save All
и напряженности магнитного поля и др. (бледный шрифт в левой колонке)
120
Команда
Save V and l Only
Plot Group (1...9)
Exit Probe (F3)
Voltage
Current
Energy
Power
Resistance
Charge
Capacitance
Flux
Inductance
В Field
H Field
Time
Linear
Log
Voltage
Current
Inoise
Onoise
Frequency
Magnitude (dB)
Phase
Group Delay
Real Part
Imag Part
Linear
Log
Назначение
Сохранение значений отсчетов времени, логических состояний цифровых узлов, напряжений и токов
Фиксирование группы графиков для выбора следующего графика при
нанесении надписей
Завершение режима Probe и возвращение в окно схем
Меню Vertical и Horizontal
Анализ переходных процессов — Transient Analysis
Построение узлового потенциала или логического состояния выбранного
узла или напряжения на 2-полюсном компоненте при указании курсором
на этот компонент. Если курсор размещен между двух выводов многополюсного компонента, выводится график разности напряжений
Ток двухполюсного компонента или ток, втекающий в вывод 3- или 4полюсного активного компонента
Энергия указанного компонента
Мощность указанного компонента
Сопротивление указанного резистора
Заряд указанного конденсатора или внутренняя емкость между выводами полупроводникового прибора
Емкость, ассоциированная с зарядом указанного компонента
Магнитный поток через индуктивность
Индуктивность, ассоциированная с магнитным потоком
Магнитная индукция
Напряженность магнитного поля
Текущее время
Линейная шкала
Логарифмическая шкала
Анализ частотных характеристик — AC Analysis
Комплексная амплитуда потенциала узла при указании курсором узла
или напряжения на 2-полюсном компоненте при указании курсором на
этот компонент. Если курсор размещен между двух выводов многополюсного компонента, рассчитывается комплексная амплитуда разности
напряжений
Комплексная амплитуда тока двухполюсного компонента или тока, втекающего в вывод 3- или 4-полюсного активного компонента
Корень квадратный из спектральной плотности шума, приведенного ко
входу схемы, указанному в строке Noise Input окна Analysis Limits (независимо от точки расположения курсора)
Корень квадратный из спектральной плотности выходного шума, указанного в строке Noise Output окна Analysis Limits (независимо от точки расположения курсора)
Отсчеты частоты в заданных пределах
Построение модуля выбранной переменной
Построение фазы выбранной переменной
Построение группового времени запаздывания выбранной переменной
Построение действительной части выбранной переменной
Построение мнимой части выбранной переменной
Линейная шкала
Логарифмическая шкала
Анализ передаточных функций — DC Analysis
121
Команда
Voltage
Current
Linear
Log
Назначение
Потенциал или логическое состояние выбранного узла. Напряжение на 2полюсном компоненте при указании курсором на этот компонент. Если
курсор размещен между двух выводов многополюсного компонента, выводится график разности напряжений
Логическое состояние выбранного цифрового узла. Ток двухполюсного
компонента или ток, втекающий в вывод 3- или 4-полюсного активного
компонента
Линейная шкала
Логарифмическая шкала
Пример использования режима анализа PROBE TRANSIENT см. в схемном файле AD16 из каталога PROBE.
Из недостатков режима Probe отметим недоступность многих команд электронной обработки
графиков Scope и невозможность изображения логических состояний шин в цифровых устройствах.
4.11.
Анимация и трехмерные графики
Режим анимации есть один из способов просмотра результатов моделирования. После нажатия в режиме Analysis на кнопку
(Animate) выводится диалоговое окно, в котором выбирается
способ построения графиков:
Don't wait — выключение режима анимации (построение графиков без дополнительной задержки), обеспечивается максимальная скорость построения графиков;
Wait for Key Press -- задержка построения очередной точки графиков до нажатия указанной
комбинации клавиш CTRL+&lt;пробел&gt;;
Wait for time Delay — включение режима анимации, при котором очередная точка графиков
строится с указанным запаздыванием (по умолчанию установлено запаздывание 0,5 с).
Для построения примера трехмерного графика загрузим пример 3D1.cir из каталога PROBE_3D
и в режиме Transient выполним моделирование переходных процессов. После этого выполним команду Transient/3D Window/Add 3D Plot и в открывшемся диалоговом окне выберем переменные, откладываемые по осям X, Y и Z (можно просто выбрать DROP vs T vs R1). Затем нажатием клавиши
ОК построим трехмерный график — в рассматриваемом примере это зависимость выходной функции
Drop от времени Т и сопротивлении R резистора R1. Выходная переменная указывается в виде выражения, указываемого на двумерном графике в графе Y Expression. См. также пример 3D2.cir из каталога PROBE_3D.
122
</pre>
                    </div>
    </section>
    
<section class="viewer-info">
    <div class="container">
                    <a class="btn download" href="/download/700552" target="_blank" rel="nofollow">
                Скачать            </a>
        
        <ol class="breadcrumb row">
                                                            <li><a href="/catalog/%D0%A2%D0%B5%D1%85%D0%BD%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D0%B8">Технологии</a></li>
                                    <li><a href="/catalog/%D0%A2%D0%B5%D1%85%D0%BD%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D0%B8/%D0%AD%D0%BB%D0%B5%D0%BA%D1%82%D1%80%D0%BE%D1%82%D0%B5%D1%85%D0%BD%D0%B8%D0%BA%D0%B0">Электротехника</a></li>
                                    </ol>
        <h1 class="title">лекции по MC7</h1>
        <div class="tags">
            <span class="fa fa-tags fa-flip-horizontal"></span>
                    </div>
    </div>
</section>

<section class="viewer-similar">
    <div class="container">
        <div class="card-columns">
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/000149122_1-9107416f313921fccd92f13e2c3881cf-260x520.png" alt="сведение о мицро">
                        <a class="card-img-overlay" href="/doc/149122/svedenie-o-micro"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/149122/svedenie-o-micro">сведение о мицро</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/000165156_1-2b03bf4c162afbfa86bb223e2856acca-260x520.png" alt="Руководство пользователя к пакету">
                        <a class="card-img-overlay" href="/doc/165156/rukovodstvo-pol._zovatelya-k-paketu"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/165156/rukovodstvo-pol._zovatelya-k-paketu">Руководство пользователя к пакету</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/003835420_1-2f620e8d1ed635b13b8528d807cdc2cf-260x520.png" alt="Диалоговое окно Текст (Text)">
                        <a class="card-img-overlay" href="/doc/3835420/dialogovoe-okno-tekst--text-"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/3835420/dialogovoe-okno-tekst--text-">Диалоговое окно Текст (Text)</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/004063129_1-0aa39fc796aace97d9126854a78dddec-260x520.png" alt="Методичка MicroCap - ИжГТУ имени М.Т.Калашникова">
                        <a class="card-img-overlay" href="/doc/4063129/metodichka-microcap---izhgtu-imeni-m.t.kalashnikova"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/4063129/metodichka-microcap---izhgtu-imeni-m.t.kalashnikova">Методичка MicroCap - ИжГТУ имени М.Т.Калашникова</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/000974039_1-9e3b28859b4c63f077e7c368fe012722-260x520.png" alt="моделированиеинтегральных операционных усилителей и">
                        <a class="card-img-overlay" href="/doc/974039/modelirovanieintegral._nyh-operacionnyh-usilitelej-i"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/974039/modelirovanieintegral._nyh-operacionnyh-usilitelej-i">моделированиеинтегральных операционных усилителей и</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/000618376_1-b56e56db652f32ec7193b8ff755b5c12-260x520.png" alt="Федеральное агентство по образованию  Российской Федерации Санкт-Петербургский государственный университет">
                        <a class="card-img-overlay" href="/doc/618376/federal._noe-agentstvo-po-obrazovaniyu--rossijskoj-federaci..."></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/618376/federal._noe-agentstvo-po-obrazovaniyu--rossijskoj-federaci...">Федеральное агентство по образованию  Российской Федерации Санкт-Петербургский государственный университет</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/002028876_1-aa311392a68acbb689d174b317155281-260x520.png" alt="Методы идентификации параметров моделей интегральных">
                        <a class="card-img-overlay" href="/doc/2028876/metody-identifikacii-parametrov-modelej-integral._nyh"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/2028876/metody-identifikacii-parametrov-modelej-integral._nyh">Методы идентификации параметров моделей интегральных</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/004293652_1-2c3cb4d9c4b8f6790ee3f4b1967dcf1f-260x520.png" alt="Для настройки интеграции информационного сервиса с">
                        <a class="card-img-overlay" href="/doc/4293652/dlya-nastrojki-integracii-informacionnogo-servisa-s"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/4293652/dlya-nastrojki-integracii-informacionnogo-servisa-s">Для настройки интеграции информационного сервиса с</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/002101940_1-d90dd3ceba769157effca902d43a45d8-260x520.png" alt="моделирование переходных режимов работы ограничителя">
                        <a class="card-img-overlay" href="/doc/2101940/modelirovanie-perehodnyh-rezhimov-raboty-ogranichitelya"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/2101940/modelirovanie-perehodnyh-rezhimov-raboty-ogranichitelya">моделирование переходных режимов работы ограничителя</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/002136329_1-1959161f67c29cf31f5586bb4d0cb130-260x520.png" alt="Руководство пользователя National Instruments Corporation 1">
                        <a class="card-img-overlay" href="/doc/2136329/rukovodstvo-pol._zovatelya-national-instruments-corporation-1"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/2136329/rukovodstvo-pol._zovatelya-national-instruments-corporation-1">Руководство пользователя National Instruments Corporation 1</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/004736877_1-6650ed3d55f0bd25e9d20ee368437aee-260x520.png" alt="ppt, 662 кб">
                        <a class="card-img-overlay" href="/doc/4736877/ppt--662-kb"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/4736877/ppt--662-kb">ppt, 662 кб</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/000420772_1-4435dc741ebd37bbe426ed9420e9655d-260x520.png" alt="Министерство образования Российской Федерации ГОУ Уральский государственный технический университет - УПИ">
                        <a class="card-img-overlay" href="/doc/420772/ministerstvo-obrazovaniya-rossijskoj-federacii-gou-ural._sk..."></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/420772/ministerstvo-obrazovaniya-rossijskoj-federacii-gou-ural._sk...">Министерство образования Российской Федерации ГОУ Уральский государственный технический университет - УПИ</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/000655415_1-0bf5fd56c6af7e6ed2cf14697848925c-260x520.png" alt="Курс ОКП РЭС - Конспект лекций, глава 6">
                        <a class="card-img-overlay" href="/doc/655415/kurs-okp-re-s---konspekt-lekcij--glava-6"></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/655415/kurs-okp-re-s---konspekt-lekcij--glava-6">Курс ОКП РЭС - Конспект лекций, глава 6</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			                <div class="card document">
                    <div class="card-preview">
                        <img class="card-img-top" src="//s1.studydoc.ru/store/data/000437479_1-70e7216ad0f5b80c92ac4f9000c278f0-260x520.png" alt="Правительство Российской Федерации  Федеральное государственное автономное образовательное учреждение высшего профессионального образования">
                        <a class="card-img-overlay" href="/doc/437479/pravitel._stvo-rossijskoj-federacii--federal._noe-gosudarst..."></a>
                    </div>
                    <div class="card-block">
                        <h4 class="card-tit">
                            <a href="/doc/437479/pravitel._stvo-rossijskoj-federacii--federal._noe-gosudarst...">Правительство Российской Федерации  Федеральное государственное автономное образовательное учреждение высшего профессионального образования</a>
                        </h4>
                        <p class="card-text">
							                        </p>
                    </div>
                </div>
			        </div>
    </div>
</section>

	</div>

    <footer class="footer-default">
        <div class="container">
            <div class="row">
                <IDXSKIP><div class="col-xs-4 text-left">
					studydoc                    &copy; 2017
                </div></IDXSKIP>
                <div class="col-xs-4 text-center">
					
                </div>
                <IDXSKIP><div class="col-xs-4 text-right">
                    <!--
					<a class="text-nowrap" href="/about">О проекте</a>
					-->
					<a class="text-nowrap" href="/dmca">DMCA</a>
					<a class="text-nowrap" href="/abuse">Пожаловаться</a>
				</div></IDXSKIP>
            </div>
        </div>
    </footer>
	<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
            try {
                w.yaCounter35560525 = new Ya.Metrika({
                    id:35560525
                });
            } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
            s = d.createElement("script"),
            f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
            d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
    })(document, window, "yandex_metrika_callbacks");
</script>
<IDXSKIP><noscript><div><img src="//mc.yandex.ru/watch/35560525" style="position:absolute; left:-9999px;" alt="" /></div></noscript></IDXSKIP>
<!-- /Yandex.Metrika counter -->

    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-563210ea4459bc74" async="async"></script>
</body>
</html>

